

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.1. Development Quick-start &mdash; Buildbot 4.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=d0ae6d56"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.2. Submitting Pull Requests" href="pull-request.html" />
    <link rel="prev" title="3. Buildbot Development" href="index.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Buildbot
              <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1. Development Quick-start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-buildbot-python-environment">3.1.1. Create a Buildbot Python Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-javascript-frontend-environment">3.1.2. Create a JavaScript Frontend Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">3.1.2.1. Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hacking-the-buildbot-javascript">3.1.2.2. Hacking the Buildbot JavaScript</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">3.3. General Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">3.7. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">3.8. Database connectors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">3.10. Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Buildbot Development</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.1. </span>Development Quick-start</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="development-quick-start">
<h1><span class="section-number">3.1. </span>Development Quick-start<a class="headerlink" href="#development-quick-start" title="Link to this heading"></a></h1>
<p>Buildbot is a python based application.
It tries very hard to follow the python best practices and make it easy to dive into the code.</p>
<p>In order to develop on Buildbot you need just a python environment and possibly some native packages in stripped-down setups.
The most up to date list is in the docker file we use to manage our CI (<a class="reference external" href="https://github.com/buildbot/metabbotcfg/blob/nine/docker/metaworker/Dockerfile">MetaBBotDockerFile</a>).</p>
<p>If you are completely new to python, it’s best to first follow the tutorials you get when you type “python virtualenv for dummies” in your favorite search engine.</p>
<section id="create-a-buildbot-python-environment">
<span id="pythondevquickstart"></span><h2><span class="section-number">3.1.1. </span>Create a Buildbot Python Environment<a class="headerlink" href="#create-a-buildbot-python-environment" title="Link to this heading"></a></h2>
<p>Buildbot uses Twisted <a class="reference external" href="http://twistedmatrix.com/trac/wiki/TwistedTrial">trial</a> to run its test suite.
Windows users also need GNU make on their machines.
The easiest way is to install it via the choco package manager, <code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">make</span></code>.
But WSL or MSYS2 is an even better option because of the integrated bash.
Note that on Windows you need to create virtualenv manually.</p>
<p>Following is a quick shell session to put you on the right track, including running the test suite.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># the usual buildbot development bootstrap with git and virtualenv</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/buildbot/buildbot
<span class="nb">cd</span><span class="w"> </span>buildbot

<span class="c1"># run a helper script which creates the virtualenv for development.</span>
<span class="c1"># Virtualenv allows to install python packages without affecting</span>
<span class="c1"># other parts of the system.</span>
<span class="c1"># This script does not support Windows: you should create the virtualenv and install</span>
<span class="c1"># requirements-ci.txt manually.</span>
make<span class="w"> </span>virtualenv

<span class="c1"># activate the virtualenv (you should now see (.venv) in your shell prompt)</span>
.<span class="w"> </span>.venv/bin/activate

<span class="c1"># now run the test suite</span>
trial<span class="w"> </span>buildbot

<span class="c1"># using all CPU cores within the system helps to speed everything up</span>
trial<span class="w"> </span>-j16<span class="w"> </span>buildbot

<span class="c1"># find all tests that talk about mail</span>
trial<span class="w"> </span>-n<span class="w"> </span>--reporter<span class="o">=</span>bwverbose<span class="w"> </span>buildbot<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>mail

<span class="c1"># run only one test module</span>
trial<span class="w"> </span>buildbot.test.unit.test_reporters_mail

<span class="c1"># you can also skip the virtualenv activation and</span>
<span class="c1"># run the test suite in one step with make</span>
make<span class="w"> </span>trial

<span class="c1"># you can pass options to make using TRIALOPTS</span>
make<span class="w"> </span>trial<span class="w"> </span><span class="nv">TRIALOPTS</span><span class="o">=</span><span class="s1">&#39;-j16 buildbot&#39;</span>

<span class="c1"># or test with a specific Python version</span>
make<span class="w"> </span>trial<span class="w"> </span><span class="nv">VENV_PY_VERSION</span><span class="o">=</span>/usr/local/bin/python3
</pre></div>
</div>
</section>
<section id="create-a-javascript-frontend-environment">
<h2><span class="section-number">3.1.2. </span>Create a JavaScript Frontend Environment<a class="headerlink" href="#create-a-javascript-frontend-environment" title="Link to this heading"></a></h2>
<p>This section describes how to get set up quickly to hack on the JavaScript UI.
It does not assume familiarity with Python, although a Python installation is required, as well as <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>.
You will also need <code class="docutils literal notranslate"><span class="pre">NodeJS</span></code>, and <code class="docutils literal notranslate"><span class="pre">yarn</span></code> installed.</p>
<section id="prerequisites">
<h3><span class="section-number">3.1.2.1. </span>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Buildbot UI requires at least node 14.18 or newer and yarn 1.x.</p>
</div>
<ul>
<li><p>Install LTS release of node.js.</p>
<p><a class="reference external" href="http://nodejs.org/">http://nodejs.org/</a> is a good start for Windows and OSX.</p>
<p>For modern Linux distributions, you can often just install the distribution-provided packages if
they are recent enough. Note, that on Debian-based distributions yarn is available as yarnpkg.</p>
<p>The below method has been tested on Debian Bookworm.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install nodejs yarnpkg
</pre></div>
</div>
<p>In other cases, use <a class="reference external" href="https://deb.nodesource.com">https://deb.nodesource.com</a> and <a class="reference external" href="https://classic.yarnpkg.com/lang/en/docs/install">https://classic.yarnpkg.com/lang/en/docs/install</a>.</p>
</li>
</ul>
</section>
<section id="hacking-the-buildbot-javascript">
<span id="jsdevquickstart"></span><h3><span class="section-number">3.1.2.2. </span>Hacking the Buildbot JavaScript<a class="headerlink" href="#hacking-the-buildbot-javascript" title="Link to this heading"></a></h3>
<p>To effectively develop Buildbot JavaScript, you’ll need a running Buildmaster configured to operate out of the source directory.</p>
<p>As a prerequisite, follow <a class="reference internal" href="#pythondevquickstart"><span class="std std-ref">Create a Buildbot Python Environment</span></a>.
With that, you should have created and enabled a virtualenv Python environment.</p>
<p>Next, you need to install the <code class="docutils literal notranslate"><span class="pre">buildbot</span></code> and <code class="docutils literal notranslate"><span class="pre">buildbot-www</span></code> python packages in <code class="docutils literal notranslate"><span class="pre">--editable</span></code> mode, which means their source directories will be directly used.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make frontend
</pre></div>
</div>
<p>This will fetch a number of python dependencies from pypi, the Python package repository, and also a number of node.js dependencies that are used for building the web application.
Then the actual frontend code will be built with artifacts stored in the source directory, e.g. <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>.
Finally, the built python packages will be installed to virtualenv environment as <code class="docutils literal notranslate"><span class="pre">--editable</span></code> packages.
This means that the webserver will load resources from <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>.</p>
<p>Now you need to create a master instance.
For more details, see the Buildbot <a class="reference internal" href="../tutorial/firstrun.html#first-run-label"><span class="std std-ref">First Run</span></a> tutorial.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir test-master
buildbot create-master test-master
mv test-master/master.cfg.sample test-master/master.cfg
buildbot start test-master
</pre></div>
</div>
<p>If all goes well, the master will start up and run in the background.
During <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">frontend</span></code>, the www frontend was built using production mode, so everything is minified and hard to debug.
However, the frontend was installed as an editable python package, so all changes in the artifacts (e.g. <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>) in the source directories will be observed in the browser.
Thus, we can manually rebuild the JavaScript resources using development settings, so they are not minified and easier to debug.
This can be done by running the following in e.g. <code class="docutils literal notranslate"><span class="pre">www/base</span></code> directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run build-dev
</pre></div>
</div>
<p>The above rebuilds the resources only once. After each change you need to refresh the built resources.
The actual commands that are run are stored in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file under the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> key.</p>
<p>To avoid the need to type the above command after each change, you can use the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run dev
</pre></div>
</div>
<p>This will watch files for changes and reload automatically.</p>
<p>To run unit tests, do the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run test
</pre></div>
</div>
<p>To run unit tests within all frontend packages within Buildbot, do the following at the root of the project:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make frontend_tests
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="3. Buildbot Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pull-request.html" class="btn btn-neutral float-right" title="3.2. Submitting Pull Requests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>