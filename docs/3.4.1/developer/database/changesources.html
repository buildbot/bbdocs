

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.8.9. Change sources connector &mdash; Buildbot 3.4.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/buildbot_rtd.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/icon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.8.10. Schedulers connector" href="schedulers.html" />
    <link rel="prev" title="3.8.8. Changes connector" href="changes.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Buildbot
          

          
            
            <img src="../../_static/full_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html">3.1. Development Quick-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general.html">3.3. General Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">3.7. Database</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">3.8. Database connectors API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="buildsets.html">3.8.1. Buildsets connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildrequests.html">3.8.2. Buildrequests connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="builders.html">3.8.3. Builders connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="builds.html">3.8.4. Builds connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="build_data.html">3.8.5. Build data connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="steps.html">3.8.6. Steps connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="logs.html">3.8.7. Logs connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="changes.html">3.8.8. Changes connector</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.8.9. Change sources connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="schedulers.html">3.8.10. Schedulers connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="sourcestamps.html">3.8.11. Source stamps connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="state.html">3.8.12. State connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="users.html">3.8.13. Users connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="masters.html">3.8.14. Masters connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="workers.html">3.8.15. Workers connector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes.html">3.10. Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indices.html">6. API Indices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Buildbot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">3. </span>Buildbot Development</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">3.8. </span>Database connectors API</a> &raquo;</li>
        
      <li><span class="section-number">3.8.9. </span>Change sources connector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/developer/database/changesources.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Buildbot no longer supports Python 2.7 on the Buildbot master.</p>
</div>
<div class="section" id="module-buildbot.db.changesources">
<span id="change-sources-connector"></span><h1><span class="section-number">3.8.9. </span>Change sources connector<a class="headerlink" href="#module-buildbot.db.changesources" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><dl class="py exception">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourceAlreadyClaimedError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">buildbot.db.changesources.</span></span><span class="sig-name descname"><span class="pre">ChangeSourceAlreadyClaimedError</span></span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourceAlreadyClaimedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a changesource request is already claimed by another master.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourcesConnectorComponent">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">buildbot.db.changesources.</span></span><span class="sig-name descname"><span class="pre">ChangeSourcesConnectorComponent</span></span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent" title="Permalink to this definition">¶</a></dt>
<dd><p>This class manages the state of the Buildbot changesources.</p>
<p>An instance of this class is available at <code class="docutils literal notranslate"><span class="pre">master.db.changesources</span></code>.</p>
<p>Changesources are identified by their changesourceid, which can be obtained from <a class="reference internal" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent.findChangeSourceId" title="buildbot.db.changesources.ChangeSourcesConnectorComponent.findChangeSourceId"><code class="xref py py-meth docutils literal notranslate"><span class="pre">findChangeSourceId</span></code></a>.</p>
<p>Changesources are represented by dictionaries with the following keys:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> - changesource’s ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> - changesource’s name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">masterid</span></code> - ID of the master currently running this changesource, or None if it is inactive</p></li>
</ul>
</div></blockquote>
<p>Note that this class is conservative in determining what changesources are inactive: a changesource linked to an inactive master is still considered active.
This situation should never occur, however; links to a master should be deleted when it is marked inactive.</p>
<dl class="py method">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourcesConnectorComponent.findChangeSourceId">
<span class="sig-name descname"><span class="pre">findChangeSourceId</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent.findChangeSourceId" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – changesource name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>changesource ID via Deferred</p>
</dd>
</dl>
<p>Return the changesource ID for the changesource with this name.
If such a changesource is already in the database, this returns the ID.
If not, the changesource is added to the database and its ID returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourcesConnectorComponent.setChangeSourceMaster">
<span class="sig-name descname"><span class="pre">setChangeSourceMaster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">changesourceid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masterid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent.setChangeSourceMaster" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>changesourceid</strong> – changesource to set the master for</p></li>
<li><p><strong>masterid</strong> – new master for this changesource, or None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Deferred</p>
</dd>
</dl>
<p>Set, or unset if <code class="docutils literal notranslate"><span class="pre">masterid</span></code> is None, the active master for this changesource.
If no master is currently set, or the current master is not active, this method will complete without error.
If the current master is active, this method will raise <code class="xref py py-exc docutils literal notranslate"><span class="pre">ChangeSourceAlreadyClaimedError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourcesConnectorComponent.getChangeSource">
<span class="sig-name descname"><span class="pre">getChangeSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">changesourceid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent.getChangeSource" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>changesourceid</strong> – changesource ID</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>changesource dictionary or None, via Deferred</p>
</dd>
</dl>
<p>Get the changesource dictionary for the given changesource.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.db.changesources.ChangeSourcesConnectorComponent.getChangeSources">
<span class="sig-name descname"><span class="pre">getChangeSources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masterid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.db.changesources.ChangeSourcesConnectorComponent.getChangeSources" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>active</strong> (<em>boolean</em>) – if specified, filter for active or inactive changesources</p></li>
<li><p><strong>masterid</strong> (<em>integer</em>) – if specified, only return changesources attached associated with this master</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of changesource dictionaries in unspecified order</p>
</dd>
</dl>
<p>Get a list of changesources.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">active</span></code> is given, changesources are filtered according to whether they are active (true) or inactive (false).
An active changesource is one that is claimed by an active master.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">masterid</span></code> is given, the list is restricted to schedulers associated with that master.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="schedulers.html" class="btn btn-neutral float-right" title="3.8.10. Schedulers connector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="changes.html" class="btn btn-neutral float-left" title="3.8.8. Changes connector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Buildbot Team Members.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>