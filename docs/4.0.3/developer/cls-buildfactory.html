<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.10.3. BuildFactory &mdash; Buildbot 4.0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=04fc738e"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.10.4. Change Sources" href="cls-changesources.html" />
    <link rel="prev" title="3.10.2. Workers" href="cls-worker.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Buildbot
              <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.0.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">3.1. Development Quick-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">3.3. General Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">3.7. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">3.8. Database connectors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="classes.html">3.10. Classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cls-build.html">3.10.1. Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-worker.html">3.10.2. Workers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.10.3. BuildFactory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#buildfactory-implementation-note">3.10.3.1. BuildFactory Implementation Note</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cls-changesources.html">3.10.4. Change Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-remotecommands.html">3.10.5. RemoteCommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-buildsteps.html">3.10.6. BuildSteps</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-basescheduler.html">3.10.7. BaseScheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-forcesched.html">3.10.8. ForceScheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-irenderable.html">3.10.9. IRenderable</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iproperties.html">3.10.10. IProperties</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iconfigurator.html">3.10.11. IConfigurator</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-resultspec.html">3.10.12. ResultSpecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-protocols.html">3.10.13. Protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-workermanager.html">3.10.14. WorkerManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-log.html">3.10.15. Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-logobserver.html">3.10.16. LogObservers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-auth.html">3.10.17. Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-avatar.html">3.10.18. Avatars</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-www.html">3.10.19. Web Server Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Buildbot Development</a></li>
          <li class="breadcrumb-item"><a href="classes.html"><span class="section-number">3.10. </span>Classes</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.10.3. </span>BuildFactory</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/cls-buildfactory.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="buildfactory">
<h1><span class="section-number">3.10.3. </span>BuildFactory<a class="headerlink" href="#buildfactory" title="Link to this heading"></a></h1>
<section id="buildfactory-implementation-note">
<h2><span class="section-number">3.10.3.1. </span>BuildFactory Implementation Note<a class="headerlink" href="#buildfactory-implementation-note" title="Link to this heading"></a></h2>
<p>The default <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildFactory</span></code>, provided in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">buildbot.process.factory</span></code> module, contains an internal list of <cite>BuildStep</cite> factories.
A <cite>BuildStep</cite> factory is simply a callable that produces a new <cite>BuildStep</cite> with the same arguments that were used during its construction.
These <cite>BuildStep</cite> factories are constructed when the config file is read, by asking the instances passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">addStep</span></code> for their factories.</p>
<p>When asked to create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Build</span></code>, the <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildFactory</span></code> puts a copy of the list of <cite>BuildStep</cite> factories into the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Build</span></code> object.
When the <code class="xref py py-class docutils literal notranslate"><span class="pre">Build</span></code> is actually started, these <cite>BuildStep</cite> factories are used to create the actual set of <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildStep</span></code>s, which are then executed one at a time.
This serves to give each Build an independent copy of each step.</p>
<p>Each step can affect the build process in the following ways:</p>
<ul class="simple">
<li><p>If the step’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">haltOnFailure</span></code> attribute is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then a failure in the step (i.e. if it completes with a result of <code class="docutils literal notranslate"><span class="pre">FAILURE</span></code>) will cause the whole build to be terminated immediately: no further steps will be executed, with the exception of steps with <code class="xref py py-attr docutils literal notranslate"><span class="pre">alwaysRun</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
<code class="xref py py-attr docutils literal notranslate"><span class="pre">haltOnFailure</span></code> is useful for setup steps upon which the rest of the build depends: if the Git checkout or <strong class="command">./configure</strong> process fails, there is no point in trying to compile or test the resulting tree.</p></li>
<li><p>If the step’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">alwaysRun</span></code> attribute is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then it will always be run, regardless of if previous steps have failed.
This is useful for cleanup steps that should always be run to return the build directory or worker into a good state.</p></li>
<li><p>If the <code class="xref py py-attr docutils literal notranslate"><span class="pre">flunkOnFailure</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">flunkOnWarnings</span></code> flag is set, then a result of <code class="docutils literal notranslate"><span class="pre">FAILURE</span></code> or <code class="docutils literal notranslate"><span class="pre">WARNINGS</span></code> will mark the build as a whole as <code class="docutils literal notranslate"><span class="pre">FAILED</span></code>.
However, the remaining steps will still be executed.
This is appropriate for things like multiple testing steps: a failure in any one of them will indicate that the build has failed, however it is still useful to run them all to completion.</p></li>
<li><p>Similarly, if the <code class="xref py py-attr docutils literal notranslate"><span class="pre">warnOnFailure</span></code> or <code class="xref py py-attr docutils literal notranslate"><span class="pre">warnOnWarnings</span></code> flag is set, then a result of <code class="docutils literal notranslate"><span class="pre">FAILURE</span></code> or <code class="docutils literal notranslate"><span class="pre">WARNINGS</span></code> will mark the build as having <code class="docutils literal notranslate"><span class="pre">WARNINGS</span></code>, and the remaining steps will still be executed.
This may be appropriate for certain kinds of optional build or test steps.
For example, a failure experienced while building documentation files should be made visible with a <code class="docutils literal notranslate"><span class="pre">WARNINGS</span></code> result but not be serious enough to warrant marking the whole build with a <code class="docutils literal notranslate"><span class="pre">FAILURE</span></code>.</p></li>
</ul>
<p>In addition, each <code class="xref py py-class docutils literal notranslate"><span class="pre">Step</span></code> produces its own results, may create logfiles, etc.
However only the flags described above have any effect on the build as a whole.</p>
<p>The pre-defined <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildStep</span></code>s like <code class="xref py py-class docutils literal notranslate"><span class="pre">Git</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Compile</span></code> have reasonably appropriate flags set on them already.
For example, without a source tree there is no point in continuing a build, so the <code class="xref py py-class docutils literal notranslate"><span class="pre">Git</span></code> class has the <code class="xref py py-attr docutils literal notranslate"><span class="pre">haltOnFailure</span></code> flag set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
Look in <code class="file docutils literal notranslate"><span class="pre">buildbot/steps/*.py</span></code> to see how the other <code class="xref py py-class docutils literal notranslate"><span class="pre">Step</span></code>s are marked.</p>
<p>Each <code class="xref py py-class docutils literal notranslate"><span class="pre">Step</span></code> is created with an additional <code class="docutils literal notranslate"><span class="pre">workdir</span></code> argument that indicates where its actions should take place.
This is specified as a subdirectory of the worker’s base directory, with a default value of <code class="file docutils literal notranslate"><span class="pre">build</span></code>.
This is only implemented as a step argument (as opposed to simply being a part of the base directory) because the Git/SVN steps need to perform their checkouts from the parent directory.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cls-worker.html" class="btn btn-neutral float-left" title="3.10.2. Workers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cls-changesources.html" class="btn btn-neutral float-right" title="3.10.4. Change Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>