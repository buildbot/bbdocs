
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.2. Release Notes for Buildbot 0.9.0 &#8212; Buildbot 0.9.8 documentation</title>
    
    <link rel="stylesheet" href="../_static/qtile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/buildbot.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.3. Release Notes for Buildbot 0.9.0rc4" href="0.9.0rc4.html" />
    <link rel="prev" title="5.1. Release Notes for Buildbot 0.9.1" href="0.9.1.html" /> 
  <!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="0.9.0rc4.html" title="5.3. Release Notes for Buildbot 0.9.0rc4"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="0.9.1.html" title="5.1. Release Notes for Buildbot 0.9.1"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Buildbot 0.9.8 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">4. Release Notes</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-notes-for-buildbot-0-9-0">
<h1>5.2. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0</span></code><a class="headerlink" href="#release-notes-for-buildbot-0-9-0" title="Permalink to this headline">¶</a></h1>
<p>The following are the release notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0</span></code>.
This version was released on October 6, 2016.</p>
<p>This is a concatenation of important changes done between 0.8.12 and 0.9.0.
This does not contain details of the bug fixes related to the nine beta and rc period.
This document was written during the very long period of nine development.
It might contain some incoherencies, <em>please</em> help us and report them on irc or trac.</p>
<p>See <a class="reference internal" href="../manual/installation/nine-upgrade.html#upgrading-to-nine"><span class="std std-ref">Upgrading to Nine</span></a> for a guide to upgrading from 0.8.x to 0.9.x</p>
<div class="section" id="master">
<h2>5.2.1. Master<a class="headerlink" href="#master" title="Permalink to this headline">¶</a></h2>
<p>This version represents a refactoring of Buildbot into a consistent, well-defined application composed of loosely coupled components.
The components are linked by a common database backend and a messaging system.
This allows components to be distributed across multiple build masters.
It also allows the rendering of complex web status views to be performed in the browser, rather than on the buildmasters.</p>
<p>The branch looks forward to committing to long-term API compatibility, but does not reach that goal.
The Buildbot-0.9.x series of releases will give the new APIs time to “settle in” before we commit to them.
Commitment will wait for Buildbot-1.0.0 (as per <a class="reference external" href="http://semver.org">http://semver.org</a>).
Once Buildbot reaches version 1.0.0, upgrades will become much easier for users.</p>
<p>To encourage contributions from a wider field of developers, the web application is designed to look like a normal AngularJS application.
Developers familiar with AngularJS, but not with Python, should be able to start hacking on the web application quickly.
The web application is “pluggable”, so users who develop their own status displays can package those separately from Buildbot itself.</p>
<p>Other goals:</p>
<blockquote>
<div><ul class="simple">
<li>An approachable HTTP REST API, with real time event features used by the web application but available for any other purpose.</li>
<li>A high degree of coverage by reliable, easily-modified tests.</li>
<li>“Interlocking” tests to guarantee compatibility.
For example, the real and fake DB implementations must both pass the same suite of tests.
Then no unseen difference between the fake and real implementations can mask errors that will occur in production.</li>
</ul>
</div></blockquote>
<div class="section" id="requirements">
<h3>5.2.1.1. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">buildbot</span></code> package requires Python 2.7 – Python 2.5 and 2.6 are no longer supported.
The <code class="docutils literal"><span class="pre">buildbot-slave</span></code> package requires Python 2.6 or higher – Python 2.4 and 2.5 are no longer supported.</p>
<p>No additional software or systems, aside from some minor Python packages, are required.</p>
<p>But the devil is in the details:</p>
<blockquote>
<div><ul class="simple">
<li>If you want to do web <em>development</em>, or <em>build</em> the <code class="docutils literal"><span class="pre">buildbot-www</span></code> package, you’ll need Node.
It’s an Angular app, and that’s how such apps are developed.
We’ve taken pains to not make either a requirement for users - you can simply ‘pip install’ <code class="docutils literal"><span class="pre">buildbot-www</span></code> and be on your way.
This is the case even if you’re hacking on the Python side of Buildbot.</li>
<li>For a single master, nothing else is required.</li>
</ul>
</div></blockquote>
<div class="section" id="note-for-distro-package-maintainers-the-npm-dependency-hell">
<h4>Note for distro package maintainers: The npm dependency hell<a class="headerlink" href="#note-for-distro-package-maintainers-the-npm-dependency-hell" title="Permalink to this headline">¶</a></h4>
<p>In order to <em>build</em> the <code class="docutils literal"><span class="pre">buildbot-www</span></code> package, you’ll need Node.</p>
<p>Node has a very specific package manager named npm, which has the interesting property of allowing different version of package to co-exist in the same environment.
The node ecosystem also has the habit of creating packages for a few line of code.</p>
<p>Buildbot UI uses the node ecosystem to build its javascript UI.</p>
<p>The buildsystem that we use is called <a class="reference external" href="https://www.npmjs.com/package/guanlecoja">guanlecoja</a>, which is just an integration of various javascript build tools.</p>
<p>Through npm dependency hell, guanlecoja is depending on <em>625</em> npm packages/versions.
We do not advise you to try and package all those npm <em>build</em> dependencies.
They are <em>not</em> required in order to <em>run</em> buildbot.</p>
<p>We do release pre-built packages in the form of the <a class="reference external" href="http://pythonwheels.com/">wheel</a> format on pypi.
Those wheels contain the full python source code, and prebuilt javascript source code.</p>
<p>Depending on distro maintainers feedback, we <em>could</em> also release source tarballs with prebuilt javascript, but those would be pypi packages with different names, e.g. <code class="docutils literal"><span class="pre">buildbot_www_prebuilt.0.9.0.tar.gz</span></code>.</p>
<p>Another option would be to package a <a class="reference external" href="https://www.npmjs.com/package/guanlecoja">guanlecoja</a> that would embed all its dependencies inside one package.</p>
</div>
<div class="section" id="detailed-requirements">
<h4>Detailed requirements<a class="headerlink" href="#detailed-requirements" title="Permalink to this headline">¶</a></h4>
<p>see <a class="reference internal" href="../manual/installation/requirements.html#requirements"><span class="std std-ref">Requirements</span></a></p>
</div>
</div>
<div class="section" id="features">
<h3>5.2.1.2. Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<p>Buildbot-0.9.0 introduces the <a class="reference internal" href="../developer/data.html#data-api"><span class="std std-ref">Data API</span></a>, a consistent and scalable method for accessing and updating the state of the Buildbot system.
This API replaces the existing, ill-defined Status API, which has been removed.
Buildbot-0.9.0 introduces new <a class="reference internal" href="../developer/www-server.html#www"><span class="std std-ref">WWW Server</span></a> Interface using websocket for realtime updates.
Buildbot code that interacted with the Status API (a substantial portion!) has been rewritten to use the Data API.
Individual features and improvements to the Data API are not described on this page.</p>
<ul>
<li><p class="first">Buildbot now supports plugins.
They allow Buildbot to be extended by using components distributed independently from the main code.
They also provide for a unified way to access all components.
When previously the following construction was used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.kind.other.bits</span> <span class="k">import</span> <span class="n">ComponentClass</span>

<span class="o">...</span> <span class="n">ComponentClass</span> <span class="o">...</span>
</pre></div>
</div>
<p>the following construction achieves the same result:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="k">import</span> <span class="n">kind</span>

<span class="o">...</span> <span class="n">kind</span><span class="o">.</span><span class="n">ComponentClass</span> <span class="o">...</span>
</pre></div>
</div>
<p>Kinds of components that are available this way are described in <a class="reference internal" href="../manual/plugins.html"><span class="doc">Plugin Infrastructure in Buildbot</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While the components can be still directly imported as <code class="docutils literal"><span class="pre">buildbot.kind.other.bits</span></code>, this might not be the case after Buildbot v1.0 is released.</p>
</div>
</li>
<li><p class="first">Both the P4 source step and P4 change source support ticket-based authentication.</p>
</li>
<li><p class="first">OpenStack latent slaves now support block devices as a bootable volume.</p>
</li>
<li><p class="first">Add new <a class="reference internal" href="../manual/cfg-buildsteps.html#step-Cppcheck" title="Cppcheck"><code class="xref bb bb-step docutils literal"><span class="pre">Cppcheck</span></code></a> step.</p>
</li>
<li><p class="first">Add a new <a class="reference internal" href="../manual/cfg-workers-docker.html"><span class="doc">Docker latent Workers</span></a>.</p>
</li>
<li><p class="first">Add a new configuration for creating custom services in out-of-tree CI systems or plugins. See <a class="reference internal" href="../developer/utils.html#buildbot.util.service.BuildbotService" title="buildbot.util.service.BuildbotService"><code class="xref py py-class docutils literal"><span class="pre">buildbot.util.service.BuildbotService</span></code></a></p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">try_ssh</span></code> configuration file setting and <code class="docutils literal"><span class="pre">--ssh</span></code> command line option for the try tool to specify the command to use for connecting to the build master.</p>
</li>
<li><p class="first">GitHub change hook now supports application/json format.</p>
</li>
<li><p class="first">Add support for dynamically adding steps during a build. See <a class="reference internal" href="../manual/cfg-buildfactories.html#dynamicbuildfactories"><span class="std std-ref">Dynamic Build Factories</span></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-GitPoller" title="GitPoller"><code class="xref bb bb-chsrc docutils literal"><span class="pre">GitPoller</span></code></a> now supports detecting new branches</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-buildsteps.html#step-Git" title="Git"><code class="xref bb bb-step docutils literal"><span class="pre">Git</span></code></a> supports an “origin” option to give a name to the remote repo.</p>
</li>
<li><p class="first">Mercurial hook was updated and modernized.
It is no longer necessary to fork.
One can now extend PYTHONPATH via the hook configuration.
Among others, it permits to use a buildbot virtualenv instead of installing buildbot in all the system.
Added documentation inside the hook.
Misc. clean-up and reorganization in order to make the code a bit more readable.</p>
</li>
<li><p class="first">UI templates can now be customizable.
You can provide html or jade overrides to the www plugins, to customize the UI</p>
</li>
<li><p class="first">The irc command <code class="docutils literal"><span class="pre">hello</span></code> now returns ‘Hello’ in a random language if invoked more than once.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-schedulers.html#sched-Triggerable" title="Triggerable"><code class="xref bb bb-sched docutils literal"><span class="pre">Triggerable</span></code></a> now accepts a <code class="docutils literal"><span class="pre">reason</span></code> parameter.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a> now accepts a <code class="docutils literal"><span class="pre">builders</span></code> parameter.</p>
</li>
<li><p class="first"><cite>StatusPush</cite> callback now receives build results (success/failure/etc) with the <code class="docutils literal"><span class="pre">buildFinished</span></code> event.</p>
</li>
<li><p class="first">There’s a new renderable type, <a class="reference internal" href="../manual/cfg-properties.html#transform"><span class="std std-ref">Transform</span></a>.</p>
</li>
<li><p class="first"><code class="xref py py-class docutils literal"><span class="pre">GitPoller</span></code> now has a <code class="docutils literal"><span class="pre">buildPushesWithNoCommits</span></code> option to allow the rebuild of already known commits on new branches.</p>
</li>
<li><p class="first">Add GitLab authentication plugin for web UI.
See <a class="reference internal" href="../manual/cfg-www.html#buildbot.www.oauth2.GitLabAuth" title="buildbot.www.oauth2.GitLabAuth"><code class="xref py py-class docutils literal"><span class="pre">buildbot.www.oauth2.GitLabAuth</span></code></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-buildsteps.html#step-CMake" title="CMake"><code class="xref bb bb-step docutils literal"><span class="pre">CMake</span></code></a> build step is added.
It provides a convenience interface to <a class="reference external" href="https://cmake.org/cmake/help/latest/">CMake</a> build system.</p>
</li>
<li><p class="first">MySQL InnoDB tables are now supported.</p>
</li>
<li><p class="first"><code class="xref py py-class docutils literal"><span class="pre">HttpStatusPush</span></code> has been ported to reporter API.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-reporters.html#buildbot.reporters.stash.StashStatusPush" title="buildbot.reporters.stash.StashStatusPush"><code class="xref py py-class docutils literal"><span class="pre">StashStatusPush</span></code></a> has been ported to reporter API.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">GithubStatusPush</span></code> has been ported to reporter API.</p>
</li>
<li><p class="first"><cite>summaryCB</cite> of <a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a> now gets not only pre-processed information but the actual build as well.</p>
</li>
<li><p class="first">EC2LatentWorker supports VPCs, instance profiles, and advanced volume mounts.</p>
</li>
<li><p class="first">New steps for Visual Studio 2015 (VS2015, VC14, and MsBuild14).</p>
</li>
<li><p class="first">The <a class="reference internal" href="../manual/cfg-buildsteps.html#step-P4" title="P4"><code class="xref bb bb-step docutils literal"><span class="pre">P4</span></code></a> step now obfuscates the password in status logs.</p>
</li>
<li><p class="first">Added support for specifying the depth of a shallow clone in <a class="reference internal" href="../manual/cfg-buildsteps.html#step-Git" title="Git"><code class="xref bb bb-step docutils literal"><span class="pre">Git</span></code></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-workers-openstack.html#worker-OpenStackLatentWorker" title="OpenStackLatentWorker"><code class="xref bb bb-worker docutils literal"><span class="pre">OpenStackLatentWorker</span></code></a> now uses a single novaclient instance to not require re-authentication when starting or stopping instances.</p>
</li>
<li><p class="first">Buildbot UI introduces branch new Authentication, and Authorizations framework.</p>
<blockquote>
<div><p>Please look at their respective guide in <a class="reference internal" href="../developer/www-server.html#www"><span class="std std-ref">WWW Server</span></a></p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">stop</span></code> now waits for complete buildmaster stop by default.</p>
</li>
<li><p class="first">New <code class="docutils literal"><span class="pre">--no-wait</span></code> argument for <code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">stop</span></code> which allows not to wait for complete master shutdown.</p>
</li>
<li><p class="first">New <code class="docutils literal"><span class="pre">LocalWorker</span></code> worker to run a worker in the master process, requires <code class="docutils literal"><span class="pre">buildbot-worker</span></code> package installed.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a> now includes build properties in the <code class="docutils literal"><span class="pre">startCB</span></code> and <code class="docutils literal"><span class="pre">reviewCB</span></code> functions. <code class="docutils literal"><span class="pre">startCB</span></code> now must return a dictionary.</p>
</li>
<li><p class="first">add tool to send usage data to buildbot.net <a class="reference internal" href="../manual/cfg-global.html#cfg-buildbotNetUsageData" title="buildbotNetUsageData"><code class="xref bb bb-cfg docutils literal"><span class="pre">buildbotNetUsageData</span></code></a></p>
</li>
<li><p class="first">new <a class="reference internal" href="../manual/cfg-buildsteps.html#step-GitHub" title="GitHub"><code class="xref bb bb-step docutils literal"><span class="pre">GitHub</span></code></a> which correctly checkout the magic branch like <code class="docutils literal"><span class="pre">refs/pull/xx/merge</span></code>.</p>
</li>
<li><p class="first">Enable parallel builds with Visual Studio and MSBuild.</p>
</li>
</ul>
</div>
<div class="section" id="reporters">
<h3>5.2.1.3. Reporters<a class="headerlink" href="#reporters" title="Permalink to this headline">¶</a></h3>
<p>Status plugins have been moved into the <code class="docutils literal"><span class="pre">reporters</span></code> namespace.
Their API has slightly to changed in order to adapt to the new data API.
See respective documentation for details.</p>
<ul class="simple">
<li><a class="reference internal" href="../manual/cfg-reporters.html#buildbot.status.status_gerrit.GerritStatusPush" title="buildbot.status.status_gerrit.GerritStatusPush"><code class="xref py py-class docutils literal"><span class="pre">GerritStatusPush</span></code></a> renamed to <code class="xref py py-class docutils literal"><span class="pre">GerritStatusPush</span></code></li>
<li><code class="xref py py-class docutils literal"><span class="pre">MailNotifier</span></code> renamed to <a class="reference internal" href="../manual/cfg-reporters.html#buildbot.reporters.mail.MailNotifier" title="buildbot.reporters.mail.MailNotifier"><code class="xref py py-class docutils literal"><span class="pre">MailNotifier</span></code></a></li>
<li><code class="xref py py-class docutils literal"><span class="pre">MailNotifier</span></code> argument <code class="docutils literal"><span class="pre">messageFormatter</span></code> should now be a <code class="xref py py-class docutils literal"><span class="pre">MessageFormatter</span></code>, due to removal of data api, custom message formaters need to be rewritten.</li>
<li><code class="xref py py-class docutils literal"><span class="pre">MailNotifier</span></code> argument <code class="docutils literal"><span class="pre">previousBuildGetter</span></code> is not supported anymore</li>
<li><code class="xref py py-class docutils literal"><span class="pre">Gerrit</span></code> supports specifying an SSH identity file explicitly.</li>
<li>Added StashStatusPush status hook for Atlassian Stash</li>
<li><a class="reference internal" href="../manual/cfg-reporters.html#reporter-MailNotifier" title="MailNotifier"><code class="xref bb bb-reporter docutils literal"><span class="pre">MailNotifier</span></code></a> no longer forces SSL 3.0 when <code class="docutils literal"><span class="pre">useTls</span></code> is true.</li>
<li><a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a> callbacks slightly changed signature, and include a master reference instead of a status reference.</li>
<li>new <a class="reference internal" href="../manual/cfg-reporters.html#reporter-GitLabStatusPush" title="GitLabStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GitLabStatusPush</span></code></a> to report builds results to GitLab.</li>
<li>new <a class="reference internal" href="../manual/cfg-reporters.html#reporter-HipchatStatusPush" title="HipchatStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">HipchatStatusPush</span></code></a> to report build results to Hipchat.</li>
</ul>
</div>
<div class="section" id="fixes">
<h3>5.2.1.4. Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Buildbot is now compatible with SQLAlchemy 0.8 and higher, using the newly-released SQLAlchemy-Migrate.</p>
</li>
<li><p class="first">The version check for SQLAlchemy-Migrate was fixed to accept more version string formats.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../manual/cfg-buildsteps.html#step-HTTPStep" title="HTTPStep"><code class="xref bb bb-step docutils literal"><span class="pre">HTTPStep</span></code></a> step’s requeset parameters are now renderable.</p>
</li>
<li><p class="first">With Git(), force the updating submodules to ensure local changes by the
build are overwitten. This both ensures more consistent builds and avoids
errors when updating submodules.</p>
</li>
<li><p class="first">Buildbot is now compatible with Gerrit v2.6 and higher.</p>
<p>To make this happen, the return result of <code class="docutils literal"><span class="pre">reviewCB</span></code> and <code class="docutils literal"><span class="pre">summaryCB</span></code>
callback has changed from</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">verified</span><span class="p">,</span> <span class="n">review</span><span class="p">)</span>
</pre></div>
</div>
<p>to</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">message</span><span class="p">,</span>
 <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;label-name&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
           <span class="o">...</span>
           <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The implications are:</p>
<ul class="simple">
<li>there are some differences in behaviour: only those labels that were
provided will be updated</li>
<li>Gerrit server must be able to provide a version, if it can’t the
<a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a> will not work</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have an old style <code class="docutils literal"><span class="pre">reviewCB</span></code> and/or <code class="docutils literal"><span class="pre">summaryCB</span></code> implemented,
these will still work, however there could be more labels updated than
anticipated.</p>
</div>
<p>More detailed information is available in <a class="reference internal" href="../manual/cfg-reporters.html#reporter-GerritStatusPush" title="GerritStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GerritStatusPush</span></code></a>
section.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-P4Source" title="P4Source"><code class="xref bb bb-chsrc docutils literal"><span class="pre">P4Source</span></code></a>’s <code class="docutils literal"><span class="pre">server_tz</span></code> parameter now works correctly.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">revlink</span></code> in changes produced by the Bitbucket hook now correctly includes the <code class="docutils literal"><span class="pre">changes/</span></code> portion of the URL.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-PBChangeSource" title="PBChangeSource"><code class="xref bb bb-chsrc docutils literal"><span class="pre">PBChangeSource</span></code></a>’s git hook <a class="reference external" href="https://github.com/buildbot/buildbot-contrib/blob/master/master/contrib/git_buildbot.py">master/contrib/git_buildbot.py</a> now supports git tags</p>
<p>A pushed git tag generates a change event with the <code class="docutils literal"><span class="pre">branch</span></code> property equal to the tag name.
To schedule builds based on buildbot tags, one could use something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;schedulers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
   <span class="n">SingleBranchScheduler</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span>
      <span class="n">change_filter</span><span class="o">=</span><span class="nb">filter</span><span class="o">.</span><span class="n">ChangeFilter</span><span class="p">(</span>
         <span class="n">branch_re</span><span class="o">=</span><span class="s1">&#39;v[0-9]+\.[0-9]+\.[0-9]+(?:-pre|rc[0-9]+|p[0-9]+)?&#39;</span><span class="p">)</span>
      <span class="n">treeStableTimer</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
      <span class="n">builderNames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tag_build&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</li>
<li><p class="first">Missing “name” and “email” properties received from Gerrit are now handled properly</p>
</li>
<li><p class="first">Fixed bug which made it impossible to specify the project when using the
BitBucket dialect.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../manual/cfg-buildsteps.html#step-PyLint" title="PyLint"><code class="xref bb bb-step docutils literal"><span class="pre">PyLint</span></code></a> step has been updated to understand newer output.</p>
</li>
<li><p class="first">Fixed SVN master-side source step: if a SVN operation fails, the repository end up in a situation when a manual intervention is required.
Now if SVN reports such a situation during initial check, the checkout will be clobbered.</p>
</li>
<li><p class="first">The build properties are now stored in the database in the <code class="docutils literal"><span class="pre">build_properties</span></code> table.</p>
</li>
<li><p class="first">The list of changes in the build page now displays all the changes since the last sucessful build.</p>
</li>
<li><p class="first">GitHub change hook now correctly responds to ping events.</p>
</li>
<li><p class="first">GitHub change hook now correctly use the refs/pull/xx/merge branch for testing PRs.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">buildbot.steps.http</span></code> steps now correctly have <code class="docutils literal"><span class="pre">url</span></code> parameter renderable</p>
</li>
<li><p class="first">When no arguments are used <code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">checkconfig</span></code> now uses <code class="file docutils literal"><span class="pre">buildbot.tac</span></code> to locate the master config file.</p>
</li>
<li><p class="first"><cite>buildbot.util.flatten</cite> now correctly flattens arbitrarily nested lists.
<cite>buildbot.util.flattened_iterator</cite> provides an iterable over the collection which may be more efficient for extremely large lists.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../manual/cfg-buildsteps.html#step-PyFlakes" title="PyFlakes"><code class="xref bb bb-step docutils literal"><span class="pre">PyFlakes</span></code></a> and <a class="reference internal" href="../manual/cfg-buildsteps.html#step-PyLint" title="PyLint"><code class="xref bb bb-step docutils literal"><span class="pre">PyLint</span></code></a> steps no longer parse output in Buildbot log headers (<a class="reference external" href="http://trac.buildbot.net/ticket/3337">bug #3337</a>).</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-GerritChangeSource" title="GerritChangeSource"><code class="xref bb bb-chsrc docutils literal"><span class="pre">GerritChangeSource</span></code></a> is now less verbose by default, and has a <code class="docutils literal"><span class="pre">debug</span></code> option to enable the logs.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-P4Source" title="P4Source"><code class="xref bb bb-chsrc docutils literal"><span class="pre">P4Source</span></code></a> no longer relies on the perforce server time to poll for new changes.</p>
</li>
<li><p class="first">The commit message for a change from <a class="reference internal" href="../manual/cfg-changesources.html#chsrc-P4Source" title="P4Source"><code class="xref bb bb-chsrc docutils literal"><span class="pre">P4Source</span></code></a> now matches what the user typed in.</p>
</li>
<li><p class="first">Fix incompatibility with MySQL-5.7 (<a class="reference external" href="http://trac.buildbot.net/ticket/3421">bug #3421</a>)</p>
</li>
<li><p class="first">Fix incompatibility with postgresql driver psycopg2 (<a class="reference external" href="http://trac.buildbot.net/ticket/3419">bug #3419</a>, further regressions will be caught by travis)</p>
</li>
<li><p class="first">Made <code class="xref py py-class docutils literal"><span class="pre">Interpolate</span></code> safe for deepcopy or serialization/deserialization</p>
</li>
<li><p class="first">sqlite access is serialized in order to improve stability (<a class="reference external" href="http://trac.buildbot.net/ticket/3565">bug #3565</a>)</p>
</li>
</ul>
</div>
<div class="section" id="deprecations-removals-and-non-compatible-changes">
<h3>5.2.1.5. Deprecations, Removals, and Non-Compatible Changes<a class="headerlink" href="#deprecations-removals-and-non-compatible-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Seamless upgrading between buildbot 0.8.12 and buildbot 0.9.0 is not supported.
Users should start from a clean install but can reuse their config according to the <a class="reference internal" href="../manual/installation/nine-upgrade.html#upgrading-to-nine"><span class="std std-ref">Upgrading to Nine</span></a> guide.</p>
</li>
<li><p class="first"><cite>BonsaiPoller</cite> is removed.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">buildbot.ec2buildslave</span></code> is removed; use <code class="docutils literal"><span class="pre">buildbot.buildslave.ec2</span></code> instead.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">buildbot.libvirtbuildslave</span></code> is removed; use <code class="docutils literal"><span class="pre">buildbot.buildslave.libvirt</span></code> instead.</p>
</li>
<li><p class="first"><cite>buildbot.util.flatten</cite> flattens lists and tuples by default (previously only lists).
Additionally, flattening something that isn’t the type to flatten has different behaviour.
Previously, it would return the original value.
Instead, it now returns an array with the original value as the sole element.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">buildbot.tac</span></code> does not support <code class="docutils literal"><span class="pre">print</span></code> statements anymore. Such files should now use <code class="docutils literal"><span class="pre">print</span></code>
as a function instead (see <a class="reference external" href="https://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function">https://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function</a>
for more details). Note that this applies to both python2.x and python3.x runtimes.</p>
</li>
<li><p class="first">Deprecated <code class="docutils literal"><span class="pre">workdir</span></code> property has been removed, <code class="docutils literal"><span class="pre">builddir</span></code> property should be used instead.</p>
</li>
<li><p class="first">To support MySQL InnoDB, the size of six VARCHAR(256) columns <code class="docutils literal"><span class="pre">changes.(author,</span> <span class="pre">branch,</span> <span class="pre">category,</span> <span class="pre">name);</span> <span class="pre">object_state.name;</span> <span class="pre">user.identifier</span></code> was reduced to VARCHAR(255).</p>
</li>
<li><dl class="first docutils">
<dt><code class="xref py py-class docutils literal"><span class="pre">StatusPush</span></code> has been removed from buildbot.</dt>
<dd><p class="first last">Please use the much simpler <code class="xref py py-class docutils literal"><span class="pre">HttpStatusPush</span></code> instead.</p>
</dd>
</dl>
</li>
<li><p class="first">Worker changes described in below worker section will probably impact a buildbot developer who uses undocumented ‘<em>slave</em>’ API.
Undocumented APIs have been replaced without failover, so any custom code that uses it shall be updated with new undocumented API.</p>
</li>
<li><p class="first">Web server does not provide /png and /redirect anymore (<a class="reference external" href="http://trac.buildbot.net/ticket/3357">bug #3357</a>).
This functionality is used to implement build status images.
This should be easy to implement if you need it.
One could port the old image generation code, or implement a redirection to <a class="reference external" href="http://shields.io/">http://shields.io/</a>.</p>
</li>
<li><p class="first">Support of worker-side <code class="docutils literal"><span class="pre">usePTY</span></code> was removed from <code class="docutils literal"><span class="pre">buildbot-worker</span></code>.
<code class="docutils literal"><span class="pre">usePTY</span></code> argument was removed from <code class="docutils literal"><span class="pre">WorkerForBuilder</span></code> and <code class="docutils literal"><span class="pre">Worker</span></code> classes.</p>
</li>
<li><p class="first">html is no longer permitted in ‘label’ attributes of forcescheduler parameters.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">public_html</span></code> directory is not created anymore in <code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">create-master</span></code> (it’s not used for some time already).
Documentation was updated with suggestions to use third party web server for serving static file.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">usePTY</span></code> default value has been changed from <code class="docutils literal"><span class="pre">slave-config</span></code> to <code class="docutils literal"><span class="pre">None</span></code> (use of <code class="docutils literal"><span class="pre">slave-config</span></code> will still work).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">/json</span></code> web status was removed. <a class="reference internal" href="../developer/data.html#data-api"><span class="std std-ref">Data API</span></a> should be used instead.</p>
</li>
</ul>
<div class="section" id="webstatus">
<h4>WebStatus<a class="headerlink" href="#webstatus" title="Permalink to this headline">¶</a></h4>
<p>The old, clunky WebStatus has been removed.
You will like the new interface!
RIP WebStatus, you were a good friend.</p>
<p>remove it and replace it with <a class="reference internal" href="../manual/cfg-www.html#cfg-www" title="www"><code class="xref bb bb-cfg docutils literal"><span class="pre">www</span> <span class="pre">configuration</span></code></a>.</p>
</div>
<div class="section" id="id1">
<h4>Requirements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Support for python 2.6 was dropped from the master.</li>
<li>Buildbot’s tests now require at least Mock-0.8.0.</li>
<li>SQLAlchemy-Migrate-0.6.1 is no longer supported.</li>
<li>Builder names are now restricted to unicode strings or ASCII bytestrings.
Encoded bytestrings are not accepted.</li>
</ul>
</div>
<div class="section" id="steps">
<h4>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>New-style steps are now the norm, and support for old-style steps is deprecated.
Upgrade your steps to new-style now, as support for old-style steps will be dropped after Buildbot-0.9.0.
See <a class="reference internal" href="../manual/new-style-steps.html#new-style-build-steps"><span class="std std-ref">New-Style Build Steps</span></a> for details.<ul>
<li>Status strings for old-style steps could be supplied through a wide variety of conflicting means (<code class="docutils literal"><span class="pre">describe</span></code>, <code class="docutils literal"><span class="pre">description</span></code>, <code class="docutils literal"><span class="pre">descriptionDone</span></code>, <code class="docutils literal"><span class="pre">descriptionSuffix</span></code>, <code class="docutils literal"><span class="pre">getText</span></code>, and <code class="docutils literal"><span class="pre">setText</span></code>, to name just a few).
While all attempts have been made to maintain compatibility, you may find that the status strings for old-style steps have changed in this version.
To fix steps that call <code class="docutils literal"><span class="pre">setText</span></code>, try setting the <code class="docutils literal"><span class="pre">descriptionDone</span></code> attribute directly, instead – or just rewrite the step in the new style.</li>
</ul>
</li>
<li>Old-style <em>source</em> steps (imported directly from <code class="docutils literal"><span class="pre">buildbot.steps.source</span></code>) are no longer supported on the master.</li>
<li>The monotone source step got an overhaul and can now better manage
its database (initialize and/or migrate it, if needed). In the
spirit of monotone, buildbot now always keeps the database around,
as it’s an append-only database.</li>
</ul>
</div>
<div class="section" id="changes-and-removals">
<h4>Changes and Removals<a class="headerlink" href="#changes-and-removals" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Buildslave names must now be 50-character <a class="reference internal" href="../developer/database.html#type-identifier"><span class="std std-ref">identifier</span></a>.
Note that this disallows some common characters in bulidslave names, including spaces, <code class="docutils literal"><span class="pre">/</span></code>, and <code class="docutils literal"><span class="pre">.</span></code>.</p>
</li>
<li><p class="first">Builders now have “tags” instead of a category.
Builders can have multiple tags, allowing more flexible builder displays.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-schedulers.html#sched-ForceScheduler" title="ForceScheduler"><code class="xref bb bb-sched docutils literal"><span class="pre">ForceScheduler</span></code></a> has the following changes:</p>
<ul class="simple">
<li>The default configuration no longer contains four <code class="docutils literal"><span class="pre">AnyPropertyParameter</span></code> instances.</li>
<li>Configuring <code class="docutils literal"><span class="pre">codebases</span></code> is now mandatory, and the deprecated <code class="docutils literal"><span class="pre">branch</span></code>,  <code class="docutils literal"><span class="pre">repository</span></code>, <code class="docutils literal"><span class="pre">project</span></code>, <code class="docutils literal"><span class="pre">revision</span></code> are not supported anymore in <a class="reference internal" href="../manual/cfg-schedulers.html#sched-ForceScheduler" title="ForceScheduler"><code class="xref bb bb-sched docutils literal"><span class="pre">ForceScheduler</span></code></a></li>
<li><code class="xref py py-meth docutils literal"><span class="pre">buildbot.schedulers.forcesched.BaseParameter.updateFromKwargs</span></code> now takes a <code class="docutils literal"><span class="pre">collector</span></code> parameter used to collect all validation errors</li>
</ul>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-schedulers.html#sched-Periodic" title="Periodic"><code class="xref bb bb-sched docutils literal"><span class="pre">Periodic</span></code></a>, <a class="reference internal" href="../manual/cfg-schedulers.html#sched-Nightly" title="Nightly"><code class="xref bb bb-sched docutils literal"><span class="pre">Nightly</span></code></a> and <a class="reference internal" href="../manual/cfg-schedulers.html#sched-NightlyTriggerable" title="NightlyTriggerable"><code class="xref bb bb-sched docutils literal"><span class="pre">NightlyTriggerable</span></code></a> have the following changes:</p>
<ul class="simple">
<li>The <a class="reference internal" href="../manual/cfg-schedulers.html#sched-Periodic" title="Periodic"><code class="xref bb bb-sched docutils literal"><span class="pre">Periodic</span></code></a> and <a class="reference internal" href="../manual/cfg-schedulers.html#sched-Nightly" title="Nightly"><code class="xref bb bb-sched docutils literal"><span class="pre">Nightly</span></code></a> schedulers can now consume changes and use <code class="docutils literal"><span class="pre">onlyIfChanged</span></code> and <code class="docutils literal"><span class="pre">createAbsoluteTimestamps</span></code>.</li>
<li>All “timed” schedulers now handle <code class="docutils literal"><span class="pre">codebases</span></code> the same way. Configuring <code class="docutils literal"><span class="pre">codebases</span></code> is strongly recommended.
Using the <code class="docutils literal"><span class="pre">branch</span></code> parameter is discouraged.</li>
</ul>
</li>
<li><p class="first">Logs are now stored as Unicode strings, and thus must be decoded properly from the bytestrings provided by shell commands.
By default this encoding is assumed to be UTF-8, but the <a class="reference internal" href="../manual/cfg-global.html#cfg-logEncoding" title="logEncoding"><code class="xref bb bb-cfg docutils literal"><span class="pre">logEncoding</span></code></a> parameter can be used to select an alternative.
Steps and individual logfiles can also override the global default.</p>
</li>
<li><p class="first">The PB status service uses classes which have now been removed, and anyway is redundant to the REST API, so it has been removed.
It has taken the following with it:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">statuslog</span></code></li>
<li><code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">statusgui</span></code> (the GTK client)</li>
<li><code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">debugclient</span></code></li>
</ul>
<p>The <code class="docutils literal"><span class="pre">PBListener</span></code> status listener is now deprecated and does nothing.
Accordingly, there is no external access to status objects via Perspective Broker, aside from some compatibility code for the try scheduler.</p>
<p>The <code class="docutils literal"><span class="pre">debugPassword</span></code> configuration option is no longer needed and is thus deprecated.</p>
</li>
<li><p class="first">The undocumented and un-tested <code class="docutils literal"><span class="pre">TinderboxMailNotifier</span></code>, designed to send emails suitable for the abandoned and insecure Tinderbox tool, has been removed.</p>
</li>
<li><p class="first">Buildslave info is no longer available via <a class="reference internal" href="../manual/cfg-properties.html#interpolate"><span class="std std-ref">Interpolate</span></a> and the <code class="docutils literal"><span class="pre">SetSlaveInfo</span></code> buildstep has been removed.</p>
</li>
<li><p class="first">The undocumented <code class="docutils literal"><span class="pre">path</span></code> parameter of the <a class="reference internal" href="../manual/cfg-buildsteps.html#step-MasterShellCommand" title="MasterShellCommand"><code class="xref bb bb-step docutils literal"><span class="pre">MasterShellCommand</span></code></a> buildstep has been renamed <code class="docutils literal"><span class="pre">workdir</span></code> for better consistency with the other steps.</p>
</li>
<li><p class="first">The name and source of a Property have to be unicode or ascii string.</p>
</li>
<li><p class="first">Property values must be serializable in JSON.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-reporters.html#reporter-IRC" title="IRC"><code class="xref bb bb-reporter docutils literal"><span class="pre">IRC</span></code></a> has the following changes:</p>
<ul class="simple">
<li>categories parameter is deprecated and removed. It should be replaced with tags=[cat]</li>
<li>noticeOnChannel parameter is deprecated and removed.</li>
</ul>
</li>
<li><p class="first">workdir behavior has been unified:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">workdir</span></code> attribute of steps is now a property in <a class="reference internal" href="../developer/cls-buildsteps.html#buildbot.process.buildstep.BuildStep" title="buildbot.process.buildstep.BuildStep"><code class="xref py py-class docutils literal"><span class="pre">BuildStep</span></code></a>, and choose the workdir given following priority:</p>
<blockquote>
<div><ul class="simple">
<li>workdir of the step, if defined</li>
<li>workdir of the builder (itself defaults to ‘build’)</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>setDefaultWorkdir() has been deprecated, but is now behaving the same for all the steps: Setting self.workdir if not already set</li>
</ul>
</li>
</ul>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-buildsteps.html#step-Trigger" title="Trigger"><code class="xref bb bb-step docutils literal"><span class="pre">Trigger</span></code></a> now has a <code class="docutils literal"><span class="pre">getSchedulersAndProperties</span></code> method that can ve overridden to support dynamic triggering.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">`master.cfg</span></code> is now parsed from a thread. Previously it was run in the main thread, and thus slowing down the master in case of big config, or network access done to generate the config.</p>
</li>
<li><p class="first"><a class="reference internal" href="../manual/cfg-changesources.html#chsrc-SVNPoller" title="SVNPoller"><code class="xref bb bb-chsrc docutils literal"><span class="pre">SVNPoller</span></code></a>’s svnurl parameter has been changed to repourl.</p>
</li>
<li><p class="first">Providing Latent AWS EC2 credentials by the <code class="file docutils literal"><span class="pre">.ec2/aws_id</span></code> file is deprecated:
Use the standard <code class="file docutils literal"><span class="pre">.aws/credentials</span></code> file, instead.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="changes-for-developers">
<h3>5.2.1.6. Changes for Developers<a class="headerlink" href="#changes-for-developers" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Botmaster no longer service parent for workers. Service parent functionality has been transferred to WorkerManager.
It should be noted Botmaster no longer has a <code class="docutils literal"><span class="pre">slaves</span></code> field as it was moved to WorkerManager.</p>
</li>
<li><p class="first">The sourcestamp DB connector now returns a <code class="docutils literal"><span class="pre">patchid</span></code> field.</p>
</li>
<li><p class="first">Buildbot no longer polls the database for jobs.
The <code class="docutils literal"><span class="pre">db_poll_interval</span></code> configuration parameter and the <a class="reference internal" href="../manual/cfg-global.html#cfg-db" title="db"><code class="xref bb bb-cfg docutils literal"><span class="pre">db</span></code></a> key of the same name are deprecated and will be ignored.</p>
</li>
<li><p class="first">The interface for adding changes has changed.
The new method is <code class="docutils literal"><span class="pre">master.data.updates.addChange</span></code> (implemented by <code class="xref py py-meth docutils literal"><span class="pre">addChange</span></code>), although the old interface (<code class="docutils literal"><span class="pre">master.addChange</span></code>) will remain in place for a few versions.
The new method:</p>
<ul class="simple">
<li>returns a change ID, not a Change instance;</li>
<li>takes its <code class="docutils literal"><span class="pre">when_timestamp</span></code> argument as epoch time (UNIX time), not a datetime instance; and</li>
<li>does not accept the deprecated parameters <code class="docutils literal"><span class="pre">who</span></code>, <code class="docutils literal"><span class="pre">isdir</span></code>, <code class="docutils literal"><span class="pre">is_dir</span></code>, and <code class="docutils literal"><span class="pre">when</span></code>.</li>
<li>requires that all strings be unicode, not bytestrings.</li>
</ul>
<p>Please adjust any custom change sources accordingly.</p>
</li>
<li><p class="first">A new build status, CANCELLED, has been added.
It is used when a step or build is deliberately cancelled by a user.</p>
</li>
<li><p class="first">This upgrade will delete all rows from the <code class="docutils literal"><span class="pre">buildrequest_claims</span></code> table.
If you are using this table for analytical purposes outside of Buildbot, please back up its contents before the upgrade, and restore it afterward, translating object IDs to scheduler IDs if necessary.
This translation would be very slow and is not required for most users, so it is not done automatically.</p>
</li>
<li><p class="first">All of the schedulers DB API methods now accept a schedulerid, rather than an objectid.
If you have custom code using these methods, check your code and make the necessary adjustments.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">addBuildsetForSourceStamp</span></code> method has become <code class="docutils literal"><span class="pre">addBuildsetForSourceStamps</span></code>, and its signature has changed.
The <code class="docutils literal"><span class="pre">addBuildsetForSourceStampSetDetails</span></code> method has become <code class="docutils literal"><span class="pre">addBuildsetForSourceStampsWithDefaults</span></code>, and its signature has changed.
The <code class="docutils literal"><span class="pre">addBuildsetForSourceStampDetails</span></code> method has been removed.
The <code class="docutils literal"><span class="pre">addBuildsetForLatest</span></code> method has been removed.
It is equivalent to <code class="docutils literal"><span class="pre">addBuildsetForSourceStampDetails</span></code> with <code class="docutils literal"><span class="pre">sourcestamps=None</span></code>.
These methods are not yet documented, and their interface is not stable.
Consult the source code for details on the changes.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">preStartConsumingChanges</span></code> and <code class="docutils literal"><span class="pre">startTimedSchedulerService</span></code> hooks have been removed.</p>
</li>
<li><p class="first">The triggerable schedulers <code class="docutils literal"><span class="pre">trigger</span></code> method now requires a list of sourcestamps, rather than a dictionary.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal"><span class="pre">SourceStamp</span></code> class is no longer used.
It remains in the codebase to support loading data from pickles on upgrade, but should not be used in running code.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal"><span class="pre">BuildRequest</span></code> class no longer has full <code class="docutils literal"><span class="pre">source</span></code> or <code class="docutils literal"><span class="pre">sources</span></code> attributes.
Use the data API to get this information (which is associated with the buildset, not the build request) instead.</p>
</li>
<li><p class="first">The undocumented <code class="docutils literal"><span class="pre">BuilderControl</span></code> method <code class="docutils literal"><span class="pre">submitBuildRequest</span></code> has been removed.</p>
</li>
<li><p class="first">The debug client no longer supports requesting builds (the <code class="docutils literal"><span class="pre">requestBuild</span></code> method has been removed).
If you have been using this method in production, consider instead creating a new change source, using the <a class="reference internal" href="../manual/cfg-schedulers.html#sched-ForceScheduler" title="ForceScheduler"><code class="xref bb bb-sched docutils literal"><span class="pre">ForceScheduler</span></code></a>, or using one of the try schedulers.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">buildbot.misc.SerializedInvocation</span></code> class has been removed; use <a class="reference internal" href="../developer/utils.html#buildbot.util.debounce.method" title="buildbot.util.debounce.method"><code class="xref py py-func docutils literal"><span class="pre">buildbot.util.debounce.method</span></code></a> instead.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">progress</span></code> attributes of both <a class="reference internal" href="../developer/cls-buildsteps.html#buildbot.process.buildstep.BuildStep" title="buildbot.process.buildstep.BuildStep"><code class="xref py py-class docutils literal"><span class="pre">buildbot.process.buildstep.BuildStep</span></code></a> and <a class="reference internal" href="../developer/cls-build.html#buildbot.process.build.Build" title="buildbot.process.build.Build"><code class="xref py py-class docutils literal"><span class="pre">buildbot.process.build.Build</span></code></a> have been removed.
Subclasses should only be accessing the progress-tracking mechanics via the <a class="reference internal" href="../developer/cls-buildsteps.html#buildbot.process.buildstep.BuildStep.setProgress" title="buildbot.process.buildstep.BuildStep.setProgress"><code class="xref py py-meth docutils literal"><span class="pre">buildbot.process.buildstep.BuildStep.setProgress</span></code></a> method.</p>
</li>
<li><p class="first">The <a class="reference internal" href="../developer/config.html#buildbot.config.BuilderConfig" title="buildbot.config.BuilderConfig"><code class="xref py py-class docutils literal"><span class="pre">BuilderConfig</span></code></a> <code class="docutils literal"><span class="pre">nextSlave</span></code> keyword argument takes a callable.
This callable now receives <code class="xref py py-class docutils literal"><span class="pre">BuildRequest</span></code> instance in its signature as 3rd parameter.
<strong>For retro-compatibility, all callable taking only 2 parameters will still work</strong>.</p>
</li>
<li><p class="first">properties object is now directly present in build, and not in build_status.
This should not change much unless you try to access your properties via step.build.build_status.
Remember that with PropertiesMixin, you can access properties via getProperties on the steps, and on the builds objects.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="slaves-workers">
<h2>5.2.2. Slaves/Workers<a class="headerlink" href="#slaves-workers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="transition-to-worker-terminology">
<h3>5.2.2.1. Transition to “worker” terminology<a class="headerlink" href="#transition-to-worker-terminology" title="Permalink to this headline">¶</a></h3>
<p>Since version 0.9.0 of Buildbot “slave”-based terminology is deprecated in favor of “worker”-based terminology.</p>
<p>For details about public API changes see <a class="reference internal" href="../manual/worker-transition.html#transition-to-worker-terminology"><span class="std std-ref">Transition to “worker” terminology</span></a>, and <a class="reference internal" href="0.9.0b8.html#b8"><span class="std std-ref">Release Notes for Buildbot 0.9.0b8</span></a> release notes.</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">buildbot-slave</span></code> package has been renamed to <code class="docutils literal"><span class="pre">buildbot-worker</span></code>.</li>
<li>Buildbot now requires import to be sorted using <a class="reference external" href="https://isort.readthedocs.io/en/stable/">isort</a>.
Please run <code class="docutils literal"><span class="pre">make</span> <span class="pre">isort</span></code> before creating a PR or use any available editor plugin in order to reorder your imports.</li>
</ul>
</div>
<div class="section" id="id2">
<h3>5.2.2.2. Requirements<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">buildbot-worker</span></code> requires Python 2.6</li>
</ul>
</div>
<div class="section" id="id3">
<h3>5.2.2.3. Features<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Buildbot worker now includes the number of CPUs in the information it supplies to the master on connection.
This value is autodetected, but can be overridden with the <code class="docutils literal"><span class="pre">--numcpus</span></code> argument to <code class="docutils literal"><span class="pre">buildslave</span> <span class="pre">create-worker</span></code>.</li>
<li>The <code class="xref py py-class docutils literal"><span class="pre">DockerLatentWorker</span></code> image attribute is now renderable (can take properties in account).</li>
<li>The <code class="xref py py-class docutils literal"><span class="pre">DockerLatentWorker</span></code> sets environment variables describing how to connect to the master.
Example dockerfiles can be found in <a class="reference external" href="https://github.com/buildbot/buildbot-contrib/blob/master/master/contrib/docker">master/contrib/docker</a>.</li>
<li><code class="xref py py-class docutils literal"><span class="pre">DockerLatentWorker</span></code> now has a <code class="docutils literal"><span class="pre">hostconfig</span></code> parameter that can be used to setup host configuration when creating a new container.</li>
<li><code class="xref py py-class docutils literal"><span class="pre">DockerLatentWorker</span></code> now has a <code class="docutils literal"><span class="pre">networking_config</span></code> parameter that can be used to setup container networks.</li>
<li>The <code class="xref py py-class docutils literal"><span class="pre">DockerLatentWorker</span></code> <code class="docutils literal"><span class="pre">volumes</span></code> attribute is now renderable.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>5.2.2.4. Fixes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id5">
<h3>5.2.2.5. Changes for Developers<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>EC2 Latent Worker upgraded from <code class="docutils literal"><span class="pre">boto2</span></code> to <code class="docutils literal"><span class="pre">boto3</span></code>.</li>
</ul>
</div>
<div class="section" id="id6">
<h3>5.2.2.6. Deprecations, Removals, and Non-Compatible Changes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>buildmaster and worker no longer supports old-style source steps.</li>
<li>On Windows, if a <a class="reference internal" href="../manual/cfg-buildsteps.html#step-ShellCommand" title="ShellCommand"><code class="xref bb bb-step docutils literal"><span class="pre">ShellCommand</span></code></a> step in which <code class="docutils literal"><span class="pre">command</span></code> was specified as a list is executed, and a
list element is a string consisting of a single pipe character, it no longer creates a pipeline.
Instead, the pipe character is passed verbatim as an argument to the program, like any other string.
This makes command handling consistent between Windows and Unix-like systems.
To have a pipeline, specify <code class="docutils literal"><span class="pre">command</span></code> as a string.</li>
<li>Support for python 2.6 was dropped from the master.</li>
<li><code class="docutils literal"><span class="pre">public_html</span></code> directory is not created anymore in <code class="docutils literal"><span class="pre">buildbot</span> <span class="pre">create-master</span></code> (it’s not used for some time already).
Documentation was updated with suggestions to use third party web server for serving static file.</li>
<li><code class="docutils literal"><span class="pre">usePTY</span></code> default value has been changed from <code class="docutils literal"><span class="pre">slave-config</span></code> to <code class="docutils literal"><span class="pre">None</span></code> (use of <code class="docutils literal"><span class="pre">slave-config</span></code> will still work).</li>
<li><code class="docutils literal"><span class="pre">GithubStatusPush</span></code> reporter was renamed to <a class="reference internal" href="../manual/cfg-reporters.html#reporter-GitHubStatusPush" title="GitHubStatusPush"><code class="xref bb bb-reporter docutils literal"><span class="pre">GitHubStatusPush</span></code></a>.</li>
<li>Worker commands version bumped to 3.0.</li>
<li>Master/worker protocol has been changed:<ul>
<li><code class="docutils literal"><span class="pre">slave_commands</span></code> key in worker information was renamed to <code class="docutils literal"><span class="pre">worker_commands</span></code>.</li>
<li><code class="docutils literal"><span class="pre">getSlaveInfo</span></code> remote method was renamed to <code class="docutils literal"><span class="pre">getWorkerInfo</span></code>.</li>
<li><code class="docutils literal"><span class="pre">slave-config</span></code> value of <code class="docutils literal"><span class="pre">usePTY</span></code> is not supported anymore.</li>
<li><code class="docutils literal"><span class="pre">slavesrc</span></code> command argument was renamed to <code class="docutils literal"><span class="pre">workersrc</span></code> in <code class="docutils literal"><span class="pre">uploadFile</span></code> and <code class="docutils literal"><span class="pre">uploadDirectory</span></code> commands.</li>
<li><code class="docutils literal"><span class="pre">slavedest</span></code> command argument was renamed to <code class="docutils literal"><span class="pre">workerdest</span></code> in <code class="docutils literal"><span class="pre">downloadFile</span></code> command.</li>
<li>Previously deprecated <code class="docutils literal"><span class="pre">WorkerForBuilder.remote_shutdown()</span></code> remote command has been removed.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="details">
<h2>5.2.3. Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>For a more detailed description of the changes made in this version, see the git log itself:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git log v0.8.12..v0.9.0
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/header-text-transparent.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Table Of Contents</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">4. Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html#older-release-notes">5. Older Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0.9.1.html">5.1. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.1</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.2. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0rc4.html">5.3. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0rc4</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0rc3.html">5.4. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0rc3</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0rc2.html">5.5. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0rc2</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0rc1.html">5.6. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0rc1</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b9.html">5.7. Release Notes for Buildbot 0.9.0b9</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b8.html">5.8. Release Notes for Buildbot 0.9.0b8</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b7.html">5.9. Release Notes for Buildbot 0.9.0b7</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b6.html">5.10. Release Notes for Buildbot 0.9.0b6</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b5.html">5.11. Release Notes for Buildbot 0.9.0b5</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b4.html">5.12. Release Notes for Buildbot 0.9.0b4</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b3.html">5.13. Release Notes for Buildbot 0.9.0b3</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b2.html">5.14. Release Notes for Buildbot 0.9.0b2</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.9.0b1.html">5.15. Release Notes for Buildbot 0.9.0b1</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.12.html">5.16. Release Notes for Buildbot 0.8.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.10.html">5.17. Release Notes for Buildbot 0.8.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.9.html">5.18. Release Notes for Buildbot 0.8.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.8.html">5.19. Release Notes for Buildbot v0.8.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.7.html">5.20. Release Notes for Buildbot v0.8.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="0.8.6.html">5.21. Release Notes for Buildbot v0.8.6p1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. Indices and Tables</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="0.9.1.html"
                        title="previous chapter">5.1. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.1</span></code></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="0.9.0rc4.html"
                        title="next chapter">5.3. Release Notes for Buildbot <code class="docutils literal"><span class="pre">0.9.0rc4</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/relnotes/0.9.0.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>