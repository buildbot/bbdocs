<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.3.10. Javascript Data Module &mdash; Buildbot 3.11.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=e6f4c021"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.3.11. Base web application" href="www-base-app.html" />
    <link rel="prev" title="3.3.9. WWW Server" href="www-server.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Buildbot
              <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.11.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">3.1. Development Quick-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="general.html">3.3. General Documents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="master-overview.html">3.3.1. Master Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="style.html">3.3.2. Buildbot Coding Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="tests.html">3.3.3. Buildbot’s Test Suite</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html">3.3.4. Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#configuration-in-angularjs">3.3.5. Configuration in AngularJS</a></li>
<li class="toctree-l3"><a class="reference internal" href="schedulers.html">3.3.6. Writing Schedulers</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html">3.3.7. Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="results.html">3.3.8. Build Result Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="www-server.html">3.3.9. WWW Server</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.3.10. Javascript Data Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#base-concepts">3.3.10.1. Base Concepts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="www-base-app.html">3.3.11. Base web application</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth.html">3.3.12. Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="authz.html">3.3.13. Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="master-worker.html">3.3.14. Master-Worker API</a></li>
<li class="toctree-l3"><a class="reference internal" href="master-worker-msgpack.html">3.3.15. Master-Worker connection with MessagePack over WebSocket protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="br-claiming.html">3.3.16. Claiming Build Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="encodings.html">3.3.17. String Encodings</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics.html">3.3.18. Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="secrets.html">3.3.19. Secrets</a></li>
<li class="toctree-l3"><a class="reference internal" href="secrets.html#secrets-manager">3.3.20. Secrets manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="secrets.html#secrets-providers">3.3.21. Secrets providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats-service.html">3.3.22. Statistics Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins-publish.html">3.3.23. How to package Buildbot plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">3.7. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">3.8. Database connectors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes.html">3.10. Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Buildbot Development</a></li>
          <li class="breadcrumb-item"><a href="general.html"><span class="section-number">3.3. </span>General Documents</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.3.10. </span>Javascript Data Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/www-data-module.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="javascript-data-module">
<span id="www-data-module"></span><h1><span class="section-number">3.3.10. </span>Javascript Data Module<a class="headerlink" href="#javascript-data-module" title="Link to this heading"></a></h1>
<p>The Data module is a reusable AngularJS module used to access Buildbot’s data API from the browser.
Its main purpose is to handle the 3 way binding.</p>
<p>2 way binding is the angular MVVM concept, which seamlessly synchronise the view and the model.
Here, we introduce an additional way of synchronisation, which is from the server to the model.</p>
<a class="reference internal image-reference" href="../_images/js-data-module-mvvm.svg"><img alt="../_images/js-data-module-mvvm.svg" src="../_images/js-data-module-mvvm.svg" width="100%" /></a>
<p>We use the message queue and the websocket interfaces to maintain synchronisation between the server and the client.</p>
<p>The client application just needs to query the needed data using a highlevel API, and the data module uses the best approach to make the data always up to date.</p>
<p>Once the binding is set up by the controller, everything is automatically up to date.</p>
<section id="base-concepts">
<h2><span class="section-number">3.3.10.1. </span>Base Concepts<a class="headerlink" href="#base-concepts" title="Link to this heading"></a></h2>
<section id="collections">
<h3>Collections<a class="headerlink" href="#collections" title="Link to this heading"></a></h3>
<p>All the data you can get are Collections.
Even a query to a single resource returns a collection.
A collection is an Array subclass which has extra capabilities:</p>
<ul class="simple">
<li><p>It listens to the event stream and is able to maintain itself up-to-date</p></li>
<li><p>It implements client side queries in order to guarantee up-to-date filtering, ordering and limiting queries.</p></li>
<li><p>It has a fast access to each item it contains via its id.</p></li>
<li><p>It has its own event handlers so that the client code can react when the Collection is changing</p></li>
</ul>
</section>
<section id="wrappers">
<h3>Wrappers<a class="headerlink" href="#wrappers" title="Link to this heading"></a></h3>
<p>Each data type contained in a collection is wrapped in a javascript object.
This allows to create some custom enhancements to the data model.
For example, the Change wrapper decodes the author name and email from the “author” field.</p>
<p>Each wrapper class also has specific access methods, which allow to access more data from the REST hierarchy.</p>
<a class="reference internal image-reference" href="../_images/js-data-module-wrappers.svg"><img alt="../_images/js-data-module-wrappers.svg" src="../_images/js-data-module-wrappers.svg" width="100%" /></a>
</section>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h3>
<p>The Data module is available as a standalone AngularJS module.</p>
<p>Installation via yarn:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>yarn<span class="w"> </span>add<span class="w"> </span>buildbot-data
</pre></div>
</div>
</div></blockquote>
<p>Inject the <code class="docutils literal notranslate"><span class="pre">bbData</span></code> module to your application:</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;bbData&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="service-api">
<h3>Service API<a class="headerlink" href="#service-api" title="Link to this heading"></a></h3>
<dl class="js class">
<dt class="sig sig-object js" id="DataService">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="n"><span class="pre">DataService</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DataService" title="Link to this definition"></a></dt>
<dd><p>DataService is the service used for accessing the Buildbot data API.
It has a modern interface for accessing data in such a way that the updating of the data via web socket is transparent.</p>
<dl class="js method">
<dt class="sig sig-object js" id="DataService.open">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataService</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">open</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DataService.open" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a DataAccessor which handles 3 way data binding</p>
</dd>
</dl>
<p>Open a new accessor every time you need to update the data in a controller.</p>
<p>It registers on $destroy event on the scope, and thus automatically unsubscribes from updates when the data is not used anymore.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// open a new accessor every time you need updating data in a controller</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">DemoController</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span><span class="w"> </span><span class="nx">dataService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// automatically closes all the bindings when the $scope is destroyed</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dataService</span><span class="p">.</span><span class="nx">open</span><span class="p">().</span><span class="nx">closeOnDestroy</span><span class="p">(</span><span class="nx">$scope</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// request new data, it updates automatically</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">builders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">getBuilders</span><span class="p">({</span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">order</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;-started_at&#39;</span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="DataService.getXs">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataService</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">getXs</span></span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#DataService.getXs" title="Link to this definition"></a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Xs</span></code> can be the following: <code class="docutils literal notranslate"><span class="pre">Builds</span></code>, <code class="docutils literal notranslate"><span class="pre">Builders</span></code>, <code class="docutils literal notranslate"><span class="pre">Buildrequests</span></code>, <code class="docutils literal notranslate"><span class="pre">Buildsets</span></code>, <code class="docutils literal notranslate"><span class="pre">Workers</span></code>, <code class="docutils literal notranslate"><span class="pre">Changes</span></code>, <code class="docutils literal notranslate"><span class="pre">Changesources</span></code>, <code class="docutils literal notranslate"><span class="pre">Forceschedulers</span></code>, <code class="docutils literal notranslate"><span class="pre">Masters</span></code>, <code class="docutils literal notranslate"><span class="pre">Schedulers</span></code>, <code class="docutils literal notranslate"><span class="pre">Sourcestamps</span></code>.</p>
<p>It’s highly advised to use these methods instead of the lower level <code class="docutils literal notranslate"><span class="pre">get('string')</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>collection which will eventually contain all the requested data</p>
</dd>
</dl>
<p>The collections returned without using an accessor are not automatically updated.
So use those methods only when you know the data are not changing.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// assign builds to $scope.builds and then load the steps when the builds are discovered</span>
<span class="c1">// onNew is called at initial load</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dataService</span><span class="p">.</span><span class="nx">getBuilds</span><span class="p">({</span><span class="nx">builderid</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">});</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="p">.</span><span class="nx">onNew</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">build</span><span class="p">.</span><span class="nx">loadSteps</span><span class="p">();</span>
</pre></div>
</div>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="DataService.get">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataService</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">get</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#DataService.get" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a collection; when the promise is resolved, the collection contains all the requested data</p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// assign builds to $scope.builds once the Collection is filled</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">builderid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dataService</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`builders/</span><span class="si">${</span><span class="nx">builderid</span><span class="si">}</span><span class="sb">/builds`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">limit</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">});</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="p">.</span><span class="nx">onNew</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">build</span><span class="p">.</span><span class="nx">loadSteps</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// assign builds to $scope.builds before the Collection is filled using the</span>
<span class="c1">// getArray() method</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dataService</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;builds&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">builderid</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">});</span>
</pre></div>
</div>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="DataService.control">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataService</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">control</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#DataService.control" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a promise; sends a JSON RPC2 POST request to the server</p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// open a new accessor every time you need to update the data in a controller</span>
<span class="nx">dataService</span><span class="p">.</span><span class="nx">control</span><span class="p">(</span><span class="s1">&#39;forceschedulers/force&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;force&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$log</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="nx">response</span><span class="p">),</span>
<span class="w">          </span><span class="nx">reason</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">$log</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">reason</span><span class="p">));</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="js class">
<dt class="sig sig-object js" id="DataAccessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="n"><span class="pre">DataAccessor</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DataAccessor" title="Link to this definition"></a></dt>
<dd><p>DataAccessor object is returned by the <code class="docutils literal notranslate"><span class="pre">dataService.open()</span></code> method.</p>
<dl class="js method">
<dt class="sig sig-object js" id="DataAccessor.closeOnDestroy">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataAccessor</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">closeOnDestroy</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">$scope</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#DataAccessor.closeOnDestroy" title="Link to this definition"></a></dt>
<dd><p>Registers scope destruction as waterfall destruction for all collection accessed via this accessor.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="DataAccessor.close">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataAccessor</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">close</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#DataAccessor.close" title="Link to this definition"></a></dt>
<dd><p>Destructs all collections previously accessed via this accessor.
Destroying a collection means it will unsubscribe from any events necessary to maintain it up-to-date.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="DataAccessor.getXs">
<span class="sig-prename descclassname"><span class="n"><span class="pre">DataAccessor</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">getXs</span></span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#DataAccessor.getXs" title="Link to this definition"></a></dt>
<dd><p>Same methods as in DataService, except here the data will be maintained up-to-date.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a collection which will eventually contain all the requested data</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="js class">
<dt class="sig sig-object js" id="Collections">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="n"><span class="pre">Collections</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collections" title="Link to this definition"></a></dt>
<dd><dl class="js method">
<dt class="sig sig-object js" id="Collections.get">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">get</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Collections.get" title="Link to this definition"></a></dt>
<dd><p>This method does not do any network access, and thus only knows about data already fetched.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>one element of the collection by id, or undefined, if this id is unknown to the collection.</p>
</dd>
</dl>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.hasOwnProperty">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">hasOwnProperty</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Collections.hasOwnProperty" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if this id is known by this collection.</p>
</dd>
</dl>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.close">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">close</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collections.close" title="Link to this definition"></a></dt>
<dd><p>Forcefully unsubscribes this connection from auto-update.
Normally, this is done automatically on scope destruction, but sometimes, when you got enough data, you want to save bandwidth and disconnect the collection.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.put">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">put</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Collections.put" title="Link to this definition"></a></dt>
<dd><p>Inserts one plain object to the collection.
As an external API, this method is only useful for unit tests to simulate new data coming asynchronously.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.from">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">from</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Collections.from" title="Link to this definition"></a></dt>
<dd><p>Inserts several plain objects to the collection.
This method is only useful for unit tests to simulate new data coming asynchronously.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.onNew-object">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">onNew</span> <span class="pre">=</span> <span class="pre">(object)</span> <span class="pre">-&gt;</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collections.onNew-object" title="Link to this definition"></a></dt>
<dd><p>Callback method which is called when a new object arrives in the collection.
This can be called either when initial data is coming via REST API, or when data is coming via the event stream.
The affected object is given in parameter.
<cite>this</cite> context is the collection.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.onUpdate-object">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">onUpdate</span> <span class="pre">=</span> <span class="pre">(object)</span> <span class="pre">-&gt;</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collections.onUpdate-object" title="Link to this definition"></a></dt>
<dd><p>Callback method which is called when an object is modified.
This is called when data is coming via the event stream.
The affected object is given in parameter.
<cite>this</cite> context is the collection.</p>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Collections.onChange-collection">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">onChange</span> <span class="pre">=</span> <span class="pre">(collection)</span> <span class="pre">-&gt;</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collections.onChange-collection" title="Link to this definition"></a></dt>
<dd><p>Callback method which is called when an object is modified.
This is called when data is coming via the event stream.
<cite>this</cite> context is the collection.
The full collection is given in parameter (in case you override <code class="docutils literal notranslate"><span class="pre">this</span></code> via fat arrow).</p>
</dd></dl>

<dl class="js attribute">
<dt class="sig sig-object js" id="Collections.-ready">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Collections</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">$ready</span></span></span><a class="headerlink" href="#Collections.-ready" title="Link to this definition"></a></dt>
<dd><p>Attribute similar to what <code class="docutils literal notranslate"><span class="pre">ngResource</span></code> provides.
True after first server interaction is completed, false before that.
Knowing if the Collection has been resolved is useful in data-binding (for example to display a loading graphic).</p>
</dd></dl>

</dd></dl>

<dl class="js class">
<dt class="sig sig-object js" id="Wrapper">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="n"><span class="pre">Wrapper</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Wrapper" title="Link to this definition"></a></dt>
<dd><p>Wrapper objects are objects stored in the collection.
These objects have specific methods, depending on their types.</p>
<dl class="js method">
<dt class="sig sig-object js" id="Wrapper.getXs">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Wrapper</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">getXs</span></span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Wrapper.getXs" title="Link to this definition"></a></dt>
<dd><p>Same as <code class="docutils literal notranslate"><span class="pre">DataService.getXs</span></code>, but with a relative endpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a collection; when the promise is resolved, the collection contains all the requested data</p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// assign builds to $scope.builds once the Collection is filled</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dataService</span><span class="p">.</span><span class="nx">getBuilds</span><span class="p">({</span><span class="nx">builderid</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">});</span>
<span class="nx">$scope</span><span class="p">.</span><span class="nx">builds</span><span class="p">.</span><span class="nx">onNew</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">complete_steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">getSteps</span><span class="p">({</span><span class="nx">complete</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
<span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">running_steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">getSteps</span><span class="p">({</span><span class="nx">complete</span><span class="o">:</span><span class="kc">false</span><span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Wrapper.loadXs">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Wrapper</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">loadXs</span></span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Wrapper.loadXs" title="Link to this definition"></a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">o.loadXs()</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">o.xs</span> <span class="pre">=</span> <span class="pre">o.getXs()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a collection; the collection contains all the requested data, which is also assigned to <code class="docutils literal notranslate"><span class="pre">o.Xs</span></code></p>
</dd>
</dl>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// get builder with id = 1</span>
<span class="nx">dataService</span><span class="p">.</span><span class="nx">getBuilders</span><span class="p">(</span><span class="mf">1</span><span class="p">).</span><span class="nx">onNew</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">builder</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// load all builds in builder.builds</span>
<span class="w">    </span><span class="nx">builder</span><span class="p">.</span><span class="nx">loadBuilds</span><span class="p">().</span><span class="nx">onNew</span><span class="p">(</span><span class="nx">build</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// load all buildsteps in build.steps</span>
<span class="w">        </span><span class="nx">build</span><span class="p">.</span><span class="nx">loadSteps</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
</dd></dl>

<dl class="js method">
<dt class="sig sig-object js" id="Wrapper.control">
<span class="sig-prename descclassname"><span class="n"><span class="pre">Wrapper</span></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">control</span></span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Wrapper.control" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a promise; sends a JSON RPC2 POST request to the server</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="www-server.html" class="btn btn-neutral float-left" title="3.3.9. WWW Server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="www-base-app.html" class="btn btn-neutral float-right" title="3.3.11. Base web application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>