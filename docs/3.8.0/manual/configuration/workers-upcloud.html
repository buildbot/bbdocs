<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UpCloud &mdash; Buildbot 3.8.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/buildbot_rtd.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.5.7. Builder Configuration" href="builders.html" />
    <link rel="prev" title="Docker latent worker" href="workers-docker.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Buildbot
            <img src="../../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.8.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">2. Buildbot Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts.html">2.3. Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secretsmanagement.html">2.4. Secret Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2.5. Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">2.5.1. Configuring Buildbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="global.html">2.5.2. Global Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html">2.5.3. Change Sources and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html#changes">2.5.4. Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="schedulers.html">2.5.5. Schedulers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="workers.html">2.5.6. Workers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="workers.html#defining-workers">2.5.6.1. Defining Workers</a></li>
<li class="toctree-l4"><a class="reference internal" href="workers.html#worker-options">2.5.6.2. Worker Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="workers.html#local-workers">2.5.6.3. Local Workers</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="workers.html#latent-workers">2.5.6.4. Latent Workers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="builders.html">2.5.7. Builder Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildfactories.html">2.5.8. Build Factories</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildsets.html">2.5.9. Build Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties.html">2.5.10. Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="steps/index.html">2.5.11. Build Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="interlocks.html">2.5.12. Interlocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="report_generators/index.html">2.5.13. Report Generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="reporters/index.html">2.5.14. Reporters</a></li>
<li class="toctree-l3"><a class="reference internal" href="www.html">2.5.15. Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="wwwhooks.html">2.5.16. Change Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/index.html">2.5.17. Custom Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="dbconfig.html">2.5.18. DbConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="configurators.html">2.5.19. Configurators</a></li>
<li class="toctree-l3"><a class="reference internal" href="manhole.html">2.5.20. Manhole</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimaster.html">2.5.21. Multimaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicodebase.html">2.5.22. Multiple-Codebase Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/index.html">2.5.23. Miscellaneous Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tests/index.html">2.5.24. Testing Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../customization.html">2.6. Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline.html">2.7. Command-line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">2.8. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization.html">2.9. Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">2.10. Plugin Infrastructure in Buildbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html">2.11. Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading/index.html">2.12. Upgrading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html"><span class="section-number">2. </span>Buildbot Manual</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">2.5. </span>Configuration</a> &raquo;</li>
          <li><a href="workers.html"><span class="section-number">2.5.6. </span>Workers</a> &raquo;</li>
      <li>UpCloud</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manual/configuration/workers-upcloud.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Buildbot no longer supports Python 2.7 on the Buildbot master.</p>
</div>
<span class="target" id="index-0"></span><section id="upcloud">
<span id="worker-UpcloudLatentWorker"></span><h1>UpCloud<a class="headerlink" href="#upcloud" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="buildbot.worker.upcloud.UpcloudLatentWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">buildbot.worker.upcloud.</span></span><span class="sig-name descname"><span class="pre">UpcloudLatentWorker</span></span><a class="headerlink" href="#buildbot.worker.upcloud.UpcloudLatentWorker" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<p><a class="reference external" href="https://www.upcloud.com/">UpCloud</a> is a web service that allows you to start virtual machines in cloud.
Please see their website for details, including costs.</p>
<p>This document will guide you through setup of a UpCloud latent worker:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#get-an-upcloud-account" id="id2">Get an UpCloud Account</a></p></li>
<li><p><a class="reference internal" href="#configure-the-master-with-an-upcloudlatentworker" id="id3">Configure the Master with an <a class="reference internal" href="#buildbot.worker.upcloud.UpcloudLatentWorker" title="buildbot.worker.upcloud.UpcloudLatentWorker"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpcloudLatentWorker</span></code></a></a></p></li>
</ul>
</div>
<section id="get-an-upcloud-account">
<h2><a class="toc-backref" href="#id2">Get an UpCloud Account</a><a class="headerlink" href="#get-an-upcloud-account" title="Permalink to this heading"></a></h2>
<p>To start off, to use the UpCloud latent worker, you need to sign up on UpCloud.</p>
<ol class="arabic simple">
<li><p>Go to <a class="reference external" href="https://www.upcloud.com/">https://www.upcloud.com/</a> and create an account.</p></li>
<li><p>Once you are logged into your account, create a sub-account for buildbot to use.
You need to tick the box enabling it for API usage.
You should disable the box enabling web interface.
You should not use your primary account for safety and security reasons.</p></li>
</ol>
</section>
<section id="configure-the-master-with-an-upcloudlatentworker">
<h2><a class="toc-backref" href="#id3">Configure the Master with an <a class="reference internal" href="#buildbot.worker.upcloud.UpcloudLatentWorker" title="buildbot.worker.upcloud.UpcloudLatentWorker"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpcloudLatentWorker</span></code></a></a><a class="headerlink" href="#configure-the-master-with-an-upcloudlatentworker" title="Permalink to this heading"></a></h2>
<p>Quick-start sample</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">upcloud</span><span class="o">.</span><span class="n">UpcloudLatentWorker</span><span class="p">(</span><span class="s1">&#39;upcloud-worker&#39;</span><span class="p">,</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s1">&#39;Debian GNU/Linux 9.3 (Stretch)&#39;</span><span class="p">,</span>
    <span class="n">api_username</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
    <span class="n">api_password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
    <span class="n">hostconfig</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;user_data&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">/usr/bin/apt-get update</span>
<span class="s2">/usr/bin/apt-get install -y buildbot-slave</span>
<span class="s2">/usr/bin/buildslave create-slave --umask=022 /buildslave buildbot.example.com upcloud-01 slavepass</span>
<span class="s2">/usr/bin/buildslave start /buildslave</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">}))</span>
</pre></div>
</div>
<p>Complete example with default values</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">upcloud</span><span class="o">.</span><span class="n">UpcloudLatentWorker</span><span class="p">(</span><span class="s1">&#39;upcloud-worker&#39;</span><span class="p">,</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s1">&#39;Debian GNU/Linux 9.3 (Stretch)&#39;</span><span class="p">,</span>
    <span class="n">api_username</span><span class="o">=</span><span class="s2">&quot;username&quot;</span><span class="p">,</span>
    <span class="n">api_password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
    <span class="n">hostconfig</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;zone&quot;</span><span class="p">:</span><span class="s2">&quot;de-fra1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plan&quot;</span><span class="p">:</span><span class="s2">&quot;1xCPU-1GB&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hostname&quot;</span><span class="p">:</span><span class="s2">&quot;hostname&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ssh_keys&quot;</span><span class="p">:[</span><span class="s2">&quot;ssh-rsa ....&quot;</span><span class="p">],</span>
        <span class="s2">&quot;os_disk_size&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
        <span class="s2">&quot;core_number&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;memory_amount&quot;</span><span class="p">:</span><span class="mi">512</span><span class="p">,</span>
        <span class="s2">&quot;user_data&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
    <span class="p">}))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">image</span></code> argument specifies the name of image in the image library.
UUID is not currently supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">api_username</span></code> and <code class="docutils literal notranslate"><span class="pre">api_password</span></code> are for the sub-account you created on UpCloud.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">hostconfig</span></code> can be used to set various aspects about the created host.</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">zone</span></code> is a valid execution zone in UpCloud environment, check their <cite>API documentation &lt;https://developers.upcloud.com/&gt;</cite> for valid values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plan</span></code> is a valid pre-configured machine specification, or custom if you want to define your own.
See their API documentation for valid values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_data</span></code> field is used to specify startup script to run on the host.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hostname</span></code> specifies the hostname for the worker.
Defaults to name of the worker.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssh_keys</span></code> specifies ssh key(s) to add for root account.
Some images support only one SSH key.
At the time of writing, only RSA keys are supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">os_disk_size</span></code> specifies size of the system disk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">core_number</span></code> can be used to specify number of cores, when plan is custom.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">memory_amount</span></code> can be used to specify memory in megabytes, when plan is custom.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_data</span></code> can be used to specify either URL to script, or script to execute when machine is started.</p></li>
</ul>
</dd>
</dl>
<p>Note that by default buildbot retains latent workers for 10 minutes, see <code class="docutils literal notranslate"><span class="pre">build_wait_time</span></code> on how to change this.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="workers-docker.html" class="btn btn-neutral float-left" title="Docker latent worker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="builders.html" class="btn btn-neutral float-right" title="2.5.7. Builder Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>