

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.5.14.14. MailNotifier &mdash; Buildbot 2.9.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/icon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.5.14.15. PushjetNotifier" href="pushjet_notifier.html" />
    <link rel="prev" title="2.5.14.13. IRC Bot" href="irc.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Buildbot
          

          
            
            <img src="../../../_static/full_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">2. Buildbot Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation/index.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts.html">2.3. Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../secretsmanagement.html">2.4. Secret Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">2.5. Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intro.html">2.5.1. Configuring Buildbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../global.html">2.5.2. Global Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changesources.html">2.5.3. Change Sources and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changesources.html#changes">2.5.4. Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../schedulers.html">2.5.5. Schedulers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workers.html">2.5.6. Workers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builders.html">2.5.7. Builder Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../buildfactories.html">2.5.8. Build Factories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../buildsets.html">2.5.9. Build Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../properties.html">2.5.10. Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../steps/index.html">2.5.11. Build Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interlocks.html">2.5.12. Interlocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../report_generators/index.html">2.5.13. Report Generators</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">2.5.14. Reporters</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="reporter_base.html">2.5.14.1. ReporterBase</a></li>
<li class="toctree-l4"><a class="reference internal" href="bitbucket_server_core_api_status.html">2.5.14.2. BitbucketServerCoreAPIStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="bitbucket_server_pr_comment_push.html">2.5.14.3. BitbucketServerPRCommentPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="bitbucket_server_status.html">2.5.14.4. BitbucketServerStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="bitbucket_status.html">2.5.14.5. BitbucketStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="gerrit_status.html">2.5.14.6. GerritStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="gerrit_verify_status.html">2.5.14.7. GerritVerifyStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="github_comment.html">2.5.14.8. GitHubCommentPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="github_status.html">2.5.14.9. GitHubStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="gitlab_status.html">2.5.14.10. GitLabStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="hipchat_status.html">2.5.14.11. HipchatStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="http_status.html">2.5.14.12. HttpStatusPush</a></li>
<li class="toctree-l4"><a class="reference internal" href="irc.html">2.5.14.13. IRC Bot</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">2.5.14.14. MailNotifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="pushjet_notifier.html">2.5.14.15. PushjetNotifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="pushover_notifier.html">2.5.14.16. PushoverNotifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="telegram.html">2.5.14.17. Telegram Bot</a></li>
<li class="toctree-l4"><a class="reference internal" href="zulip_status.html">2.5.14.18. ZulipStatusPush</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../www.html">2.5.15. Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wwwhooks.html">2.5.16. Change Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../services.html">2.5.17. Custom Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dbconfig.html">2.5.18. DbConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configurators.html">2.5.19. Configurators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../customization.html">2.6. Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmdline.html">2.7. Command-line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources.html">2.8. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimization.html">2.9. Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html">2.10. Plugin Infrastructure in Buildbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deploy.html">2.11. Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrading/index.html">2.12. Upgrading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../indices.html">6. API Indices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Buildbot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html"><span class="section-number">2. </span>Buildbot Manual</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">2.5. </span>Configuration</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">2.5.14. </span>Reporters</a> &raquo;</li>
        
      <li><span class="section-number">2.5.14.14. </span>MailNotifier</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/manual/configuration/reporters/mail_notifier.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Buildbot no longer supports Python 2.7 on the Buildbot master.</p>
</div>
<div class="section" id="mailnotifier">
<span id="reporter-MailNotifier"></span><h1><span class="section-number">2.5.14.14. </span>MailNotifier<a class="headerlink" href="#mailnotifier" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="buildbot.reporters.mail.MailNotifier">
<em class="property">class </em><code class="sig-prename descclassname">buildbot.reporters.mail.</code><code class="sig-name descname">MailNotifier</code><a class="headerlink" href="#buildbot.reporters.mail.MailNotifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The Buildbot can send email when builds finish.
The most common use of this is to tell developers when their change has caused the build to fail.
It is also quite common to send a message to a mailing list (usually named <cite>builds</cite> or similar) about every build.</p>
<p>The <a class="reference internal" href="#buildbot.reporters.mail.MailNotifier" title="buildbot.reporters.mail.MailNotifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">MailNotifier</span></code></a> reporter is used to accomplish this.
You configure it by specifying who mail should be sent to, under what circumstances mail should be sent, and how to deliver the mail.
It can be configured to only send out mail for certain builders, and only send messages when the build fails, or when the builder transitions from success to failure.
It can also be configured to include various build logs in each message.</p>
<p>If a proper lookup function is configured, the message will be sent to the “interested users” list (<a class="reference internal" href="../../concepts.html#doing-things-with-users"><span class="std std-ref">Doing Things With Users</span></a>), which includes all developers who made changes in the build.
By default, however, Buildbot does not know how to construct an email addressed based on the information from the version control system.
See the <code class="docutils literal notranslate"><span class="pre">lookup</span></code> argument, below, for more information.</p>
<p>You can add additional, statically-configured, recipients with the <code class="docutils literal notranslate"><span class="pre">extraRecipients</span></code> argument.
You can also add interested users by setting the <code class="docutils literal notranslate"><span class="pre">owners</span></code> build property to a list of users in the scheduler constructor (<a class="reference internal" href="../schedulers.html#configuring-schedulers"><span class="std std-ref">Configuring Schedulers</span></a>).</p>
<p>Each <a class="reference internal" href="#buildbot.reporters.mail.MailNotifier" title="buildbot.reporters.mail.MailNotifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">MailNotifier</span></code></a> sends mail to a single set of recipients.
To send different kinds of mail to different recipients, use multiple <a class="reference internal" href="#buildbot.reporters.mail.MailNotifier" title="buildbot.reporters.mail.MailNotifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">MailNotifier</span></code></a>s.
TODO: or subclass MailNotifier and override getRecipients()</p>
<p>The following simple example will send an email upon the completion of each build, to just those developers whose <code class="xref py py-class docutils literal notranslate"><span class="pre">Change</span></code>s were included in the build.
The email contains a description of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Build</span></code>, its results, and URLs where more information can be obtained.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">reporters</span>
<span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;buildbot@example.org&quot;</span><span class="p">,</span>
                            <span class="n">lookup</span><span class="o">=</span><span class="s2">&quot;example.org&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
</pre></div>
</div>
<p>To get a simple one-message-per-build (say, for a mailing list), use the following form instead.
This form does not send mail to individual developers (and thus does not need the <code class="docutils literal notranslate"><span class="pre">lookup=</span></code> argument, explained below), instead it only ever sends mail to the <cite>extra recipients</cite> named in the arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;buildbot@example.org&quot;</span><span class="p">,</span>
                            <span class="n">sendToInterestedUsers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extraRecipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;listaddr@example.org&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If your SMTP host requires authentication before it allows you to send emails, this can also be done by specifying <code class="docutils literal notranslate"><span class="pre">smtpUser</span></code> and <code class="docutils literal notranslate"><span class="pre">smtpPassword</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;myuser@example.com&quot;</span><span class="p">,</span>
                            <span class="n">sendToInterestedUsers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extraRecipients</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;listaddr@example.org&quot;</span><span class="p">],</span>
                            <span class="n">relayhost</span><span class="o">=</span><span class="s2">&quot;smtp.example.com&quot;</span><span class="p">,</span> <span class="n">smtpPort</span><span class="o">=</span><span class="mi">587</span><span class="p">,</span>
                            <span class="n">smtpUser</span><span class="o">=</span><span class="s2">&quot;myuser@example.com&quot;</span><span class="p">,</span>
                            <span class="n">smtpPassword</span><span class="o">=</span><span class="s2">&quot;mypassword&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If for some reasons you are not able to send a notification with TLS enabled and specified user name and password, you might want to use <a class="reference external" href="https://github.com/buildbot/buildbot-contrib/tree/master/master/contrib/check_smtp.py">master/contrib/check_smtp.py</a> to see if it works at all.</p>
</div>
<p>If you want to require Transport Layer Security (TLS), then you can also set <code class="docutils literal notranslate"><span class="pre">useTls</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;myuser@example.com&quot;</span><span class="p">,</span>
                            <span class="n">sendToInterestedUsers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extraRecipients</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;listaddr@example.org&quot;</span><span class="p">],</span>
                            <span class="n">useTls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">relayhost</span><span class="o">=</span><span class="s2">&quot;smtp.example.com&quot;</span><span class="p">,</span>
                            <span class="n">smtpPort</span><span class="o">=</span><span class="mi">587</span><span class="p">,</span> <span class="n">smtpUser</span><span class="o">=</span><span class="s2">&quot;myuser@example.com&quot;</span><span class="p">,</span>
                            <span class="n">smtpPassword</span><span class="o">=</span><span class="s2">&quot;mypassword&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you see <code class="docutils literal notranslate"><span class="pre">twisted.mail.smtp.TLSRequiredError</span></code> exceptions in the log while using TLS, this can be due <em>either</em> to the server not supporting TLS or to a missing <a class="reference external" href="http://pyopenssl.sourceforge.net/">PyOpenSSL</a> package on the BuildMaster system.</p>
</div>
<p>In some cases it is desirable to have different information then what is provided in a standard MailNotifier message.
For this purpose MailNotifier provides the argument <code class="docutils literal notranslate"><span class="pre">messageFormatter</span></code> (an instance of <code class="docutils literal notranslate"><span class="pre">MessageFormatter</span></code>) which allows for the creation of messages with unique content.</p>
<p>For example, if only short emails are desired (e.g., for delivery to phones):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">reporters</span>
<span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span>
    <span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;buildbot@example.org&quot;</span><span class="p">,</span>
    <span class="n">sendToInterestedUsers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;problem&#39;</span><span class="p">,),</span>
    <span class="n">extraRecipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;listaddr@example.org&#39;</span><span class="p">],</span>
    <span class="n">messageFormatter</span><span class="o">=</span><span class="n">reporters</span><span class="o">.</span><span class="n">MessageFormatter</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s2">&quot;STATUS: {{ summary }}&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Another example of a function delivering a customized html email is given below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">reporters</span>

<span class="n">template</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s1">&lt;h4&gt;Build status: {{ summary }}&lt;/h4&gt;</span>
<span class="s1">&lt;p&gt; Worker used: {{ workername }}&lt;/p&gt;</span>
<span class="s1">{</span><span class="si">% f</span><span class="s1">or step in build[&#39;steps&#39;] %}</span>
<span class="s1">&lt;p&gt; {{ step[&#39;name&#39;] }}: {{ step[&#39;results&#39;] }}&lt;/p&gt;</span>
<span class="s1">{</span><span class="si">% e</span><span class="s1">ndfor %}</span>
<span class="s1">&lt;p&gt;&lt;b&gt; -- The Buildbot&lt;/b&gt;&lt;/p&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;buildbot@example.org&quot;</span><span class="p">,</span>
                            <span class="n">sendToInterestedUsers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;failing&#39;</span><span class="p">,),</span>
                            <span class="n">extraRecipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;listaddr@example.org&#39;</span><span class="p">],</span>
                            <span class="n">messageFormatter</span><span class="o">=</span><span class="n">reporters</span><span class="o">.</span><span class="n">MessageFormatter</span><span class="p">(</span>
                                <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span> <span class="n">template_type</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span>
                                <span class="n">wantProperties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wantSteps</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="mailnotifier-arguments">
<h2>MailNotifier arguments<a class="headerlink" href="#mailnotifier-arguments" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">fromaddr</span></code></dt><dd><p>The email address to be used in the ‘From’ header.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sendToInterestedUsers</span></code></dt><dd><p>(boolean).
If <code class="docutils literal notranslate"><span class="pre">True</span></code> (the default), send mail to all of the Interested Users.
Interested Users are authors of changes and users from the <code class="docutils literal notranslate"><span class="pre">owners</span></code> build property.
Override <code class="docutils literal notranslate"><span class="pre">MailNotifier</span></code> <code class="docutils literal notranslate"><span class="pre">getResponsibleUsersForBuild</span></code> method to change that.
If <code class="docutils literal notranslate"><span class="pre">False</span></code>, only send mail to the <code class="docutils literal notranslate"><span class="pre">extraRecipients</span></code> list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extraRecipients</span></code></dt><dd><p>(list of strings).
A list of email addresses to which messages should be sent (in addition to the InterestedUsers list, which includes any developers who made <code class="xref py py-class docutils literal notranslate"><span class="pre">Change</span></code>s that went into this build).
It is a good idea to create a small mailing list and deliver to that, then let subscribers come and go as they please.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">generators</span></code></dt><dd><p>(list)
A list of instances of <code class="docutils literal notranslate"><span class="pre">IReportGenerator</span></code> which defines the conditions of when the messages will be sent and contents of them.
See <a class="reference internal" href="../report_generators/index.html#report-generators"><span class="std std-ref">Report Generators</span></a> for more information.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">subject</span></code></dt><dd><p>(string, deprecated).
A string to be used as the subject line of the message.
<code class="docutils literal notranslate"><span class="pre">%(builder)s</span></code> will be replaced with the name of the builder which provoked the message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mode</span></code></dt><dd><p>(list of strings or string, deprecated).
Defines the cases when a message should be sent.
There are two strings which can be used as shortcuts instead of the full lists.</p>
<p>The possible shortcuts are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt><dd><p>Always send mail about builds.
Equivalent to (<code class="docutils literal notranslate"><span class="pre">change</span></code>, <code class="docutils literal notranslate"><span class="pre">failing</span></code>, <code class="docutils literal notranslate"><span class="pre">passing</span></code>, <code class="docutils literal notranslate"><span class="pre">problem</span></code>, <code class="docutils literal notranslate"><span class="pre">warnings</span></code>, <code class="docutils literal notranslate"><span class="pre">exception</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">warnings</span></code></dt><dd><p>Equivalent to (<code class="docutils literal notranslate"><span class="pre">warnings</span></code>, <code class="docutils literal notranslate"><span class="pre">failing</span></code>).</p>
</dd>
</dl>
<p>Set these shortcuts as actual strings in the configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">reporters</span>
<span class="n">mn</span> <span class="o">=</span> <span class="n">reporters</span><span class="o">.</span><span class="n">MailNotifier</span><span class="p">(</span><span class="n">fromaddr</span><span class="o">=</span><span class="s2">&quot;buildbot@example.org&quot;</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;warnings&quot;</span><span class="p">)</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span>
</pre></div>
</div>
<p>If the argument is list of strings, it must be a combination of:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cancelled</span></code></dt><dd><p>Send mail about builds which were cancelled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">change</span></code></dt><dd><p>Send mail about builds which change status.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failing</span></code></dt><dd><p>Send mail about builds which fail.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">passing</span></code></dt><dd><p>Send mail about builds which succeed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">problem</span></code></dt><dd><p>Send mail about a build which failed when the previous build has passed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">warnings</span></code></dt><dd><p>Send mail about builds which generate warnings.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">exception</span></code></dt><dd><p>Send mail about builds which generate exceptions.</p>
</dd>
</dl>
<p>Defaults to (<code class="docutils literal notranslate"><span class="pre">failing</span></code>, <code class="docutils literal notranslate"><span class="pre">passing</span></code>, <code class="docutils literal notranslate"><span class="pre">warnings</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">builders</span></code></dt><dd><p>(list of strings, deprecated).
A list of builder names for which mail should be sent.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (send mail for all builds).
Use either builders or tags, but not both.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tags</span></code></dt><dd><p>(list of strings, deprecated).
A list of tag names to serve status information for.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (all tags).
Use either builders or tags, but not both.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">schedulers</span></code></dt><dd><p>(list of strings, deprecated).
A list of scheduler names to serve status information for.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (all schedulers).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">branches</span></code></dt><dd><p>(list of strings, deprecated).
A list of branch names to serve status information for.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (all branches).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">addLogs</span></code></dt><dd><p>(boolean, deprecated).
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, include all build logs as attachments to the messages.
These can be quite large.
This can also be set to a list of log names, to send a subset of the logs.
Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">addPatch</span></code></dt><dd><p>(boolean, deprecated).
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, include the patch content if a patch was present.
Patches are usually used on a <code class="xref py py-class docutils literal notranslate"><span class="pre">Try</span></code> server.
Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buildSetSummary</span></code></dt><dd><p>(boolean, deprecated).
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, send a single summary email consisting of the concatenation of all build completion messages rather than a completion message for each build.
Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">relayhost</span></code></dt><dd><p>(string, deprecated).
The host to which the outbound SMTP connection should be made.
Defaults to ‘localhost’</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtpPort</span></code></dt><dd><p>(int).
The port that will be used on outbound SMTP connections.
Defaults to 25.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">useTls</span></code></dt><dd><p>(boolean).
When this argument is <code class="docutils literal notranslate"><span class="pre">True</span></code> (default is <code class="docutils literal notranslate"><span class="pre">False</span></code>) <code class="docutils literal notranslate"><span class="pre">MailNotifier</span></code> requires that STARTTLS encryption is used for the connection with the <code class="docutils literal notranslate"><span class="pre">relayhost</span></code>.
Authentication is required for STARTTLS so the arguments <code class="docutils literal notranslate"><span class="pre">smtpUser</span></code> and <code class="docutils literal notranslate"><span class="pre">smtpPassword</span></code> must also be specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">useSmtps</span></code></dt><dd><p>(boolean).
When this argument is <code class="docutils literal notranslate"><span class="pre">True</span></code> (default is <code class="docutils literal notranslate"><span class="pre">False</span></code>) <code class="docutils literal notranslate"><span class="pre">MailNotifier</span></code> connects to <code class="docutils literal notranslate"><span class="pre">relayhost</span></code> over an encrypted SSL/TLS connection.
This configuration is typically used over port 465.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtpUser</span></code></dt><dd><p>(string).
The user name to use when authenticating with the <code class="docutils literal notranslate"><span class="pre">relayhost</span></code>.
Can be a <a class="reference internal" href="../../secretsmanagement.html#secret"><span class="std std-ref">Secret</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smtpPassword</span></code></dt><dd><p>(string).
The password that will be used when authenticating with the <code class="docutils literal notranslate"><span class="pre">relayhost</span></code>.
Can be a <a class="reference internal" href="../../secretsmanagement.html#secret"><span class="std std-ref">Secret</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lookup</span></code></dt><dd><p>(implementer of <code class="xref py py-class docutils literal notranslate"><span class="pre">IEmailLookup</span></code>).
Object which provides <code class="xref py py-class docutils literal notranslate"><span class="pre">IEmailLookup</span></code>, which is responsible for mapping User names (which come from the VC system) into valid email addresses.</p>
<p>If the argument is not provided, the <code class="docutils literal notranslate"><span class="pre">MailNotifier</span></code> will attempt to build the <code class="docutils literal notranslate"><span class="pre">sendToInterestedUsers</span></code> from the authors of the Changes that led to the Build via <a class="reference internal" href="../../concepts.html#user-objects"><span class="std std-ref">User Objects</span></a>.
If the author of one of the Build’s Changes has an email address stored, it will added to the recipients list.
With this method, <code class="docutils literal notranslate"><span class="pre">owners</span></code> are still added to the recipients.
Note that, in the current implementation of user objects, email addresses are not stored; as a result, unless you have specifically added email addresses to the user database, this functionality is unlikely to actually send any emails.</p>
<p>Most of the time you can use a simple Domain instance.
As a shortcut, you can pass as string: this will be treated as if you had provided <code class="docutils literal notranslate"><span class="pre">Domain(str)</span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">lookup='example.com'</span></code> will allow mail to be sent to all developers whose SVN usernames match their <code class="docutils literal notranslate"><span class="pre">example.com</span></code> account names.
See <a class="reference external" href="https://github.com/buildbot/buildbot/tree/master/master/buildbot/reporters/mail.py">master/buildbot/reporters/mail.py</a> for more details.</p>
<p>Regardless of the setting of <code class="docutils literal notranslate"><span class="pre">lookup</span></code>, <code class="docutils literal notranslate"><span class="pre">MailNotifier</span></code> will also send mail to addresses in the <code class="docutils literal notranslate"><span class="pre">extraRecipients</span></code> list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">messageFormatter</span></code></dt><dd><p>(optional, deprecated)
This is an optional instance of the <code class="docutils literal notranslate"><span class="pre">reporters.MessageFormatter</span></code> class that can be used to generate a custom mail message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extraHeaders</span></code></dt><dd><p>(dictionary).
A dictionary containing key/value pairs of extra headers to add to sent e-mails.
Both the keys and the values may be a <cite>Interpolate</cite> instance.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">watchedWorkers</span></code></dt><dd><p>This is a list of names of workers, which should be watched. In case a worker get missing, a notification is sent.
The value of <code class="docutils literal notranslate"><span class="pre">watchedWorkers</span></code> can also be set to <em>all</em> (default) or <code class="docutils literal notranslate"><span class="pre">None</span></code>. You also need to specify email address to which the notification is sent in the worker configuration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">messageFormatterMissingWorker</span></code></dt><dd><p>(optional, deprecated)
This is an optional instance of the <code class="docutils literal notranslate"><span class="pre">reporters.messageFormatterMissingWorker</span></code> class that can be used to generate a custom mail message for missing workers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dumpMailsToLog</span></code></dt><dd><p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, all completely formatted mails will be dumped to the log before being sent. This can be useful to debug problems with your mail provider.
Be sure to only turn this on if you really need it, especially if you attach logs to emails. This can dump sensitive information to logs, and make them very large.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pushjet_notifier.html" class="btn btn-neutral float-right" title="2.5.14.15. PushjetNotifier" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="irc.html" class="btn btn-neutral float-left" title="2.5.14.13. IRC Bot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Buildbot Team Members

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>