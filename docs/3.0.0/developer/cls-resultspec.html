

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.10.12. ResultSpecs &mdash; Buildbot 3.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/buildbot_rtd.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/icon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.10.13. Protocols" href="cls-protocols.html" />
    <link rel="prev" title="3.10.11. IConfigurator" href="cls-iconfigurator.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Buildbot
          

          
            
            <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">3.1. Development Quick-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">3.3. General Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">3.7. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">3.8. Database connectors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="classes.html">3.10. Classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cls-build.html">3.10.1. Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-worker.html">3.10.2. Workers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-buildfactory.html">3.10.3. BuildFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-changesources.html">3.10.4. Change Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-remotecommands.html">3.10.5. RemoteCommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-buildsteps.html">3.10.6. BuildSteps</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-basescheduler.html">3.10.7. BaseScheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-forcesched.html">3.10.8. ForceScheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-irenderable.html">3.10.9. IRenderable</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iproperties.html">3.10.10. IProperties</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iconfigurator.html">3.10.11. <code class="docutils literal notranslate"><span class="pre">IConfigurator</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.10.12. ResultSpecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-protocols.html">3.10.13. Protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-workermanager.html">3.10.14. WorkerManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-log.html">3.10.15. Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-logobserver.html">3.10.16. LogObservers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-auth.html">3.10.17. Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-avatar.html">3.10.18. Avatars</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-www.html">3.10.19. Web Server Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">3. </span>Buildbot Development</a> &raquo;</li>
        
          <li><a href="classes.html"><span class="section-number">3.10. </span>Classes</a> &raquo;</li>
        
      <li><span class="section-number">3.10.12. </span>ResultSpecs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/developer/cls-resultspec.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Buildbot no longer supports Python 2.7 on the Buildbot master.</p>
</div>
<div class="section" id="module-buildbot.data.resultspec">
<span id="resultspecs"></span><h1><span class="section-number">3.10.12. </span>ResultSpecs<a class="headerlink" href="#module-buildbot.data.resultspec" title="Permalink to this headline">¶</a></h1>
<p>Result specifications are used by the <a class="reference internal" href="data.html#data-api"><span class="std std-ref">Data API</span></a> to describe the desired results of a <code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code> call.
They can be used to filter, sort and paginate the contents of collections, and to limit the fields returned for each item.</p>
<p>Python calls to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code> call can pass a <a class="reference internal" href="#buildbot.data.resultspec.ResultSpec" title="buildbot.data.resultspec.ResultSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSpec</span></code></a> instance directly.
Requests to the HTTP REST API are converted into instances automatically.</p>
<p>Implementers of Data API endpoints can ignore result specifications entirely, except where efficiency suffers.
Any filters, sort keys, and so on still present after the endpoint returns its result are applied generically.
<a class="reference internal" href="#buildbot.data.resultspec.ResultSpec" title="buildbot.data.resultspec.ResultSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSpec</span></code></a> instances are mutable, so endpoints that do apply some of the specification can remove parts of the specification.</p>
<p>Result specifications are applied in the following order:</p>
<blockquote>
<div><ul class="simple">
<li><p>Field Selection (fields)</p></li>
<li><p>Filters</p></li>
<li><p>Order</p></li>
<li><p>Pagination (limit/offset)</p></li>
<li><p>Properties</p></li>
</ul>
</div></blockquote>
<p>Only fields &amp; properties are applied to non-collection results.
Endpoints processing a result specification should take care to replicate this behavior.</p>
<dl class="py class">
<dt id="buildbot.data.resultspec.ResultSpec">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">buildbot.data.resultspec.</span></code><code class="sig-name descname"><span class="pre">ResultSpec</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>A result specification has the following attributes, which should be treated as read-only:</p>
<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.filters">
<code class="sig-name descname"><span class="pre">filters</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.filters" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#buildbot.data.resultspec.Filter" title="buildbot.data.resultspec.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> instances to be applied.
The result is a logical AND of all filters.</p>
</dd></dl>

<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.fields">
<code class="sig-name descname"><span class="pre">fields</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.fields" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of field names that should be included, or <code class="docutils literal notranslate"><span class="pre">None</span></code> for no sorting.
if the field names all begin with <code class="docutils literal notranslate"><span class="pre">-</span></code>, then those fields will be omitted and all others included.</p>
</dd></dl>

<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.order">
<code class="sig-name descname"><span class="pre">order</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.order" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of field names to sort on.
if any field name begins with <code class="docutils literal notranslate"><span class="pre">-</span></code>, then the ordering on that field will be in reverse.</p>
</dd></dl>

<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.limit">
<code class="sig-name descname"><span class="pre">limit</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.limit" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum number of collection items to return.</p>
</dd></dl>

<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.offset">
<code class="sig-name descname"><span class="pre">offset</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>The 0-based index of the first collection item to return.</p>
</dd></dl>

<dl class="py attribute">
<dt id="buildbot.data.resultspec.ResultSpec.properties">
<code class="sig-name descname"><span class="pre">properties</span></code><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.properties" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>A list of <a class="reference internal" href="#buildbot.data.resultspec.Property" title="buildbot.data.resultspec.Property"><code class="xref py py-class docutils literal notranslate"><span class="pre">Property</span></code></a> instances to be applied.
The result is a logical AND of all properties.</p>
</div></blockquote>
<p>All of the attributes can be supplied as constructor keyword arguments.</p>
<p>Endpoint implementations may call these methods to indicate that they have processed part of the result spec.
A subsequent call to <a class="reference internal" href="#buildbot.data.resultspec.ResultSpec.apply" title="buildbot.data.resultspec.ResultSpec.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">apply</span></code></a> will then not waste time re-applying that part.</p>
<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popProperties">
<code class="sig-name descname"><span class="pre">popProperties</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>If a property exists, return its values list and remove it from the result spec.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popFilter">
<code class="sig-name descname"><span class="pre">popFilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>If a filter exists for the given field and operator, return its values list and remove it from the result spec.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popBooleanFilter">
<code class="sig-name descname"><span class="pre">popBooleanFilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popBooleanFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>If a filter exists for the field, remove it and return the expected value (True or False); otherwise return None.
This method correctly handles odd cases like <code class="docutils literal notranslate"><span class="pre">field__ne=false</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popStringFilter">
<code class="sig-name descname"><span class="pre">popStringFilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popStringFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>If one string filter exists for the field, remove it and return the expected value (as string); otherwise return None.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popIntegerFilter">
<code class="sig-name descname"><span class="pre">popIntegerFilter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popIntegerFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>If one integer filter exists for the field, remove it and return the expected value (as integer); otherwise return None.
raises ValueError if the field is not convertible to integer.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.removePagination">
<code class="sig-name descname"><span class="pre">removePagination</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.removePagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the pagination attributes (<a class="reference internal" href="#buildbot.data.resultspec.ResultSpec.limit" title="buildbot.data.resultspec.ResultSpec.limit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">limit</span></code></a> and <a class="reference internal" href="#buildbot.data.resultspec.ResultSpec.offset" title="buildbot.data.resultspec.ResultSpec.offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">offset</span></code></a>) from the result spec.
And endpoint that calls this method should return a <code class="xref py py-class docutils literal notranslate"><span class="pre">ListResult</span></code> instance with its pagination attributes set appropriately.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.removeOrder">
<code class="sig-name descname"><span class="pre">removeOrder</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.removeOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the order attribute.</p>
</dd></dl>

<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.popField">
<code class="sig-name descname"><span class="pre">popField</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.popField" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a single field from the <a class="reference internal" href="#buildbot.data.resultspec.ResultSpec.fields" title="buildbot.data.resultspec.ResultSpec.fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">fields</span></code></a> attribute, returning True if it was present.
Endpoints can use this in conditionals to avoid fetching particularly expensive fields from the DB API.</p>
</dd></dl>

<p>The following method is used internally to apply any remaining parts of a result spec that are not handled by the endpoint.</p>
<dl class="py method">
<dt id="buildbot.data.resultspec.ResultSpec.apply">
<code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.ResultSpec.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the result specification to the data, returning a transformed copy of the data.
If the data is a collection, then the result will be a <code class="xref py py-class docutils literal notranslate"><span class="pre">ListResult</span></code> instance.</p>
</dd></dl>

</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="buildbot.data.resultspec.Filter">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">buildbot.data.resultspec.</span></code><code class="sig-name descname"><span class="pre">Filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.Filter" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<em>string</em>) – the field to filter on</p></li>
<li><p><strong>op</strong> (<em>string</em>) – the comparison operator (e.g., “eq” or “gt”)</p></li>
<li><p><strong>values</strong> (<em>list</em>) – the values on the right side of the operator</p></li>
</ul>
</dd>
</dl>
<p>A filter represents a limitation of the items from a collection that should be returned.</p>
<p>Many operators, such as “gt”, only accept one value.
Others, such as “eq” or “ne”, can accept multiple values.
In either case, the values must be passed as a list.</p>
</dd></dl>

<dl class="py class">
<dt id="buildbot.data.resultspec.Property">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">buildbot.data.resultspec.</span></code><code class="sig-name descname"><span class="pre">Property</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.data.resultspec.Property" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>values</strong> (<em>list</em>) – the values on the right side of the operator (<code class="docutils literal notranslate"><span class="pre">eq</span></code>)</p>
</dd>
</dl>
<p>A property represents an item of a foreign table.</p>
<p>In either case, the values must be passed as a list.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cls-protocols.html" class="btn btn-neutral float-right" title="3.10.13. Protocols" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cls-iconfigurator.html" class="btn btn-neutral float-left" title="3.10.11. IConfigurator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Buildbot Team Members.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>