<html lang="en">
<head>
<title>Dependent Scheduler - BuildBot Manual - latest</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="BuildBot Manual - latest">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Schedulers.html#Schedulers" title="Schedulers">
<link rel="prev" href="AnyBranchScheduler.html#AnyBranchScheduler" title="AnyBranchScheduler">
<link rel="next" href="Periodic-Scheduler.html#Periodic-Scheduler" title="Periodic Scheduler">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is the BuildBot manual for Buildbot version latest.

Copyright (C) 2005, 2006, 2009, 2010 Brian Warner

Copying and distribution of this file, with or without
modification, are permitted in any medium without royalty
provided the copyright notice and this notice are preserved.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>
<body>
<div class="node">
<a name="Dependent-Scheduler"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Periodic-Scheduler.html#Periodic-Scheduler">Periodic Scheduler</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="AnyBranchScheduler.html#AnyBranchScheduler">AnyBranchScheduler</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Schedulers.html#Schedulers">Schedulers</a>
<hr>
</div>

<h4 class="subsection">4.7.3 Dependent Scheduler</h4>

<p><a name="index-Dependent-48"></a><a name="index-Dependencies-49"></a><a name="index-buildbot_002escheduler_002eDependent-50"></a>
It is common to wind up with one kind of build which should only be
performed if the same source code was successfully handled by some
other kind of build first. An example might be a packaging step: you
might only want to produce .deb or RPM packages from a tree that was
known to compile successfully and pass all unit tests. You could put
the packaging step in the same Build as the compile and testing steps,
but there might be other reasons to not do this (in particular you
might have several Builders worth of compiles/tests, but only wish to
do the packaging once). Another example is if you want to skip the
&ldquo;full&rdquo; builds after a failing &ldquo;quick&rdquo; build of the same source
code. Or, if one Build creates a product (like a compiled library)
that is used by some other Builder, you'd want to make sure the
consuming Build is run <em>after</em> the producing one.

   <p>You can use &ldquo;Dependencies&rdquo; to express this relationship
to the Buildbot. There is a special kind of Scheduler named
<code>scheduler.Dependent</code> that will watch an &ldquo;upstream&rdquo; Scheduler
for builds to complete successfully (on all of its Builders). Each time
that happens, the same source code (i.e. the same <code>SourceStamp</code>)
will be used to start a new set of builds, on a different set of
Builders. This &ldquo;downstream&rdquo; scheduler doesn't pay attention to
Changes at all. It only pays attention to the upstream scheduler.

   <p>If the build fails on any of the Builders in the upstream set,
the downstream builds will not fire.  Note that, for SourceStamps
generated by a ChangeSource, the <code>revision</code> is None, meaning HEAD. 
If any changes are committed between the time the upstream scheduler
begins its build and the time the dependent scheduler begins its
build, then those changes will be included in the downstream build. 
See the see <a href="Triggerable-Scheduler.html#Triggerable-Scheduler">Triggerable Scheduler</a> for a more flexible dependency
mechanism that can avoid this problem.

   <p>The keyword arguments to this scheduler are:

     <dl>
<dt><code>name</code>
<br><dt><code>builderNames</code>
<br><dt><code>properties</code>
<br><dt><code>upstream</code><dd>The upstream scheduler to watch.  Note that this is an &ldquo;instance&rdquo;,
not the name of the scheduler. 
</dl>

   <p>Example:

<pre class="example">     from buildbot import scheduler
     tests = scheduler.Scheduler("just-tests", None, 5*60,
                                 ["full-linux", "full-netbsd", "full-OSX"])
     package = scheduler.Dependent(name="build-package",
                                   upstream=tests, # &lt;- no quotes!
                                   builderNames=["make-tarball", "make-deb", "make-rpm"])
     c['schedulers'] = [tests, package]
</pre>
   </body></html>

