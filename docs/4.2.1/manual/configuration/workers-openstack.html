

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenStack &mdash; Buildbot 4.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../../_static/icon.png"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=74d6e94f"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Docker latent worker" href="workers-docker.html" />
    <link rel="prev" title="Libvirt" href="workers-libvirt.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Buildbot
              <img src="../../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">2. Buildbot Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts.html">2.3. Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secretsmanagement.html">2.4. Secret Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2.5. Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">2.5.1. Configuring Buildbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="global.html">2.5.2. Global Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html">2.5.3. Change Sources and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html#changes">2.5.4. Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="schedulers.html">2.5.5. Schedulers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="workers.html">2.5.6. Workers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="workers.html#defining-workers">2.5.6.1. Defining Workers</a></li>
<li class="toctree-l4"><a class="reference internal" href="workers.html#worker-options">2.5.6.2. Worker Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="workers.html#local-workers">2.5.6.3. Local Workers</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="workers.html#latent-workers">2.5.6.4. Latent Workers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="builders.html">2.5.7. Builder Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">2.5.8. Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildfactories.html">2.5.9. Build Factories</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildsets.html">2.5.10. Build Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties.html">2.5.11. Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="steps/index.html">2.5.12. Build Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="interlocks.html">2.5.13. Interlocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="report_generators/index.html">2.5.14. Report Generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="reporters/index.html">2.5.15. Reporters</a></li>
<li class="toctree-l3"><a class="reference internal" href="www.html">2.5.16. Web Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="wwwhooks.html">2.5.17. Change Hooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="services/index.html">2.5.18. Custom Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="dbconfig.html">2.5.19. DbConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="configurators.html">2.5.20. Configurators</a></li>
<li class="toctree-l3"><a class="reference internal" href="manhole.html">2.5.21. Manhole</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimaster.html">2.5.22. Multimaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicodebase.html">2.5.23. Multiple-Codebase Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/index.html">2.5.24. Miscellaneous Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tests/index.html">2.5.25. Testing Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../customization.html">2.6. Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline.html">2.7. Command-line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">2.8. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization.html">2.9. Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">2.10. Plugin Infrastructure in Buildbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html">2.11. Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading/index.html">2.12. Upgrading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">2. </span>Buildbot Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">2.5. </span>Configuration</a></li>
          <li class="breadcrumb-item"><a href="workers.html"><span class="section-number">2.5.6. </span>Workers</a></li>
      <li class="breadcrumb-item active">OpenStack</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manual/configuration/workers-openstack.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="openstack">
<span id="worker-OpenStackLatentWorker"></span><h1>OpenStack<a class="headerlink" href="#openstack" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="buildbot.worker.openstack.OpenStackLatentWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">buildbot.worker.openstack.</span></span><span class="sig-name descname"><span class="pre">OpenStackLatentWorker</span></span><a class="headerlink" href="#buildbot.worker.openstack.OpenStackLatentWorker" title="Link to this definition"></a></dt>
<dd></dd></dl>

<p><a class="reference external" href="http://openstack.org/">OpenStack</a> is a series of interconnected components that facilitates managing compute, storage, and network resources in a data center.
It is available under the Apache License and has a REST interface along with a Python client.</p>
<p>This document will guide you through setup of an OpenStack latent worker:</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#install-dependencies" id="id2">Install dependencies</a></p></li>
<li><p><a class="reference internal" href="#get-an-account-in-an-openstack-cloud" id="id3">Get an Account in an OpenStack cloud</a></p></li>
<li><p><a class="reference internal" href="#create-an-image" id="id4">Create an Image</a></p></li>
<li><p><a class="reference internal" href="#configure-the-master-with-an-openstacklatentworker" id="id5">Configure the Master with an OpenStackLatentWorker</a></p></li>
</ul>
</nav>
<section id="install-dependencies">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Install dependencies</a><a class="headerlink" href="#install-dependencies" title="Link to this heading"></a></h2>
<p>OpenStackLatentWorker requires python-novaclient to work, you can install it with pip install python-novaclient.</p>
</section>
<section id="get-an-account-in-an-openstack-cloud">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Get an Account in an OpenStack cloud</a><a class="headerlink" href="#get-an-account-in-an-openstack-cloud" title="Link to this heading"></a></h2>
<p>Setting up OpenStack is outside the domain of this document.
There are four account details necessary for the Buildbot master to interact with your OpenStack cloud: username, password, a tenant name, and the auth URL to use.</p>
</section>
<section id="create-an-image">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Create an Image</a><a class="headerlink" href="#create-an-image" title="Link to this heading"></a></h2>
<p>OpenStack supports a large number of image formats.
OpenStack maintains a short list of prebuilt images; if the desired image is not listed, The <a class="reference external" href="http://docs.openstack.org/trunk/openstack-compute/admin/content/index.html">OpenStack Compute Administration Manual</a> is a good resource for creating new images.
You need to configure the image with a buildbot worker to connect to the master on boot.</p>
</section>
<section id="configure-the-master-with-an-openstacklatentworker">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Configure the Master with an OpenStackLatentWorker</a><a class="headerlink" href="#configure-the-master-with-an-openstacklatentworker" title="Link to this heading"></a></h2>
<p>With the configured image in hand, it is time to configure the buildbot master to create OpenStack instances of it.
You will need the aforementioned account details.
These are the same details set in either environment variables or passed as options to an OpenStack client.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenStackLatentWorker</span></code> accepts the following arguments:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>The worker name.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>A password for the worker to login to the master with.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flavor</span></code></dt><dd><p>A string containing the flavor name or UUID to use for the instance.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code></dt><dd><p>A string containing the image name or UUID to use for the instance.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">os_username</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">os_password</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">os_tenant_name</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">os_user_domain</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">os_project_domain</span></code></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">os_auth_url</span></code></dt><dd><p>The OpenStack authentication needed to create and delete instances.
These are the same as the environment variables with uppercase names of the arguments.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">os_auth_args</span></code></dt><dd><p>Arguments passed directly to keystone.
If this is specified, other authentication parameters (see above) are ignored.
You can use <code class="docutils literal notranslate"><span class="pre">auth_type</span></code> to specify auth plugin to load.
See <cite>OpenStack documentation &lt;https://docs.openstack.org/python-keystoneclient/&gt;</cite> for more information.
Usually this should contain <code class="docutils literal notranslate"><span class="pre">auth_url</span></code>, <code class="docutils literal notranslate"><span class="pre">username</span></code>, <code class="docutils literal notranslate"><span class="pre">password</span></code>, <code class="docutils literal notranslate"><span class="pre">project_domain_name</span></code>
and <code class="docutils literal notranslate"><span class="pre">user_domain_name</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">block_devices</span></code></dt><dd><p>A list of dictionaries.
Each dictionary specifies a block device to set up during instance creation.
The values support using properties from the build and will be rendered when the instance is started.</p>
<p>Supported keys</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">uuid</span></code></dt><dd><p>(required):
The image, snapshot, or volume UUID.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">volume_size</span></code></dt><dd><p>(optional):
Size of the block device in GiB.
If not specified, the minimum size in GiB to contain the source will be calculated and used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device_name</span></code></dt><dd><p>(optional): defaults to <code class="docutils literal notranslate"><span class="pre">vda</span></code>.
The name of the device in the instance; e.g. vda or xda.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">source_type</span></code></dt><dd><p>(optional): defaults to <code class="docutils literal notranslate"><span class="pre">image</span></code>.
The origin of the block device.
Valid values are <code class="docutils literal notranslate"><span class="pre">image</span></code>, <code class="docutils literal notranslate"><span class="pre">snapshot</span></code>, or <code class="docutils literal notranslate"><span class="pre">volume</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">destination_type</span></code></dt><dd><p>(optional): defaults to <code class="docutils literal notranslate"><span class="pre">volume</span></code>.
Destination of block device: <code class="docutils literal notranslate"><span class="pre">volume</span></code> or <code class="docutils literal notranslate"><span class="pre">local</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delete_on_termination</span></code></dt><dd><p>(optional): defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.
Controls if the block device will be deleted when the instance terminates.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">boot_index</span></code></dt><dd><p>(optional): defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
Integer used for boot order.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meta</span></code></dt><dd><p>A dictionary of string key-value pairs to pass to the instance.
These will be available under the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> key from the metadata service.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nova_args</span></code></dt><dd><p>(optional)
A dict that will be appended to the arguments when creating a VM.
Buildbot uses the OpenStack Nova version 2 API by default (see client_version).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">client_version</span></code></dt><dd><p>(optional)
A string containing the Nova client version to use.
Defaults to <code class="docutils literal notranslate"><span class="pre">2</span></code>.
Supports using <code class="docutils literal notranslate"><span class="pre">2.X</span></code>, where X is a micro-version.
Use <code class="docutils literal notranslate"><span class="pre">1.1</span></code> for the previous, deprecated, version.
If using <code class="docutils literal notranslate"><span class="pre">1.1</span></code>, note that an older version of novaclient will be needed so it won’t switch to using <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">region</span></code></dt><dd><p>(optional)
A string specifying region where to instantiate the worker.</p>
</dd>
</dl>
<p>Here is the simplest example of configuring an OpenStack latent worker.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">OpenStackLatentWorker</span><span class="p">(</span><span class="s1">&#39;bot2&#39;</span><span class="p">,</span> <span class="s1">&#39;sekrit&#39;</span><span class="p">,</span>
                <span class="n">flavor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;8ac9d4a4-5e03-48b0-acde-77a0345a9ab1&#39;</span><span class="p">,</span>
                <span class="n">os_username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">os_password</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
                <span class="n">os_tenant_name</span><span class="o">=</span><span class="s1">&#39;tenant&#39;</span><span class="p">,</span>
                <span class="n">os_auth_url</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:35357/v2.0&#39;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">image</span></code> argument also supports being given a callable.
The callable will be passed the list of available images and must return the image to use.
The invocation happens in a separate thread to prevent blocking the build master when interacting with OpenStack.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>

<span class="k">def</span> <span class="nf">find_image</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
    <span class="c1"># Sort oldest to newest.</span>
    <span class="k">def</span> <span class="nf">key_fn</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">created</span>

    <span class="n">candidate_images</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key_fn</span><span class="p">)</span>
    <span class="c1"># Return the oldest candidate image.</span>
    <span class="k">return</span> <span class="n">candidate_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">OpenStackLatentWorker</span><span class="p">(</span><span class="s1">&#39;bot2&#39;</span><span class="p">,</span> <span class="s1">&#39;sekrit&#39;</span><span class="p">,</span>
                <span class="n">flavor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">find_image</span><span class="p">,</span>
                <span class="n">os_username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">os_password</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
                <span class="n">os_tenant_name</span><span class="o">=</span><span class="s1">&#39;tenant&#39;</span><span class="p">,</span>
                <span class="n">os_auth_url</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:35357/v2.0&#39;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">block_devices</span></code> argument is minimally manipulated to provide some defaults and passed directly to novaclient.
The simplest example is an image that is converted to a volume and the instance boots from that volume.
When the instance is destroyed, the volume will be terminated as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">OpenStackLatentWorker</span><span class="p">(</span><span class="s1">&#39;bot2&#39;</span><span class="p">,</span> <span class="s1">&#39;sekrit&#39;</span><span class="p">,</span>
                <span class="n">flavor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;8ac9d4a4-5e03-48b0-acde-77a0345a9ab1&#39;</span><span class="p">,</span>
                <span class="n">os_username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">os_password</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
                <span class="n">os_tenant_name</span><span class="o">=</span><span class="s1">&#39;tenant&#39;</span><span class="p">,</span>
                <span class="n">os_auth_url</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:35357/v2.0&#39;</span><span class="p">,</span>
                <span class="n">block_devices</span><span class="o">=</span><span class="p">[</span>
                    <span class="p">{</span><span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="s1">&#39;3f0b8868-67e7-4a5b-b685-2824709bd486&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;volume_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}])</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">nova_args</span></code> can be used to specify additional arguments for the novaclient.
For example network mappings, which is required if your OpenStack tenancy has more than one network, and default cannot be determined.
Please refer to your OpenStack manual whether it wants net-id or net-name.</p>
<p>Other useful parameters are <code class="docutils literal notranslate"><span class="pre">availability_zone</span></code>, <code class="docutils literal notranslate"><span class="pre">security_groups</span></code> and <code class="docutils literal notranslate"><span class="pre">config_drive</span></code>.
Refer to <a class="reference external" href="http://docs.openstack.org/developer/python-novaclient/">Python bindings to the OpenStack Nova API</a> for more information.
It is found on section Servers, method create.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">worker</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;workers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">OpenStackLatentWorker</span><span class="p">(</span><span class="s1">&#39;bot2&#39;</span><span class="p">,</span> <span class="s1">&#39;sekrit&#39;</span><span class="p">,</span>
                <span class="n">flavor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;8ac9d4a4-5e03-48b0-acde-77a0345a9ab1&#39;</span><span class="p">,</span>
                <span class="n">os_username</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">os_password</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">,</span>
                <span class="n">os_tenant_name</span><span class="o">=</span><span class="s1">&#39;tenant&#39;</span><span class="p">,</span>
                <span class="n">os_auth_url</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:35357/v2.0&#39;</span><span class="p">,</span>
                <span class="n">nova_args</span><span class="o">=</span><span class="p">{</span>
                  <span class="s1">&#39;nics&#39;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span><span class="s1">&#39;net-id&#39;</span><span class="p">:</span><span class="s1">&#39;uid-of-network&#39;</span><span class="p">}</span>
                          <span class="p">]})</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenStackLatentWorker</span></code> supports all other configuration from the standard <code class="xref py py-class docutils literal notranslate"><span class="pre">Worker</span></code>.
The <code class="docutils literal notranslate"><span class="pre">missing_timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">notify_on_missing</span></code> specify how long to wait for an OpenStack instance to attach before considering the attempt to have failed and email addresses to alert, respectively.
<code class="docutils literal notranslate"><span class="pre">missing_timeout</span></code> defaults to 20 minutes.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="workers-libvirt.html" class="btn btn-neutral float-left" title="Libvirt" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="workers-docker.html" class="btn btn-neutral float-right" title="Docker latent worker" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>