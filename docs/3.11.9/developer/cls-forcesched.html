<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.10.8. ForceScheduler &mdash; Buildbot 3.11.9 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=0eee63e3"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.10.9. IRenderable" href="cls-irenderable.html" />
    <link rel="prev" title="3.10.7. BaseScheduler" href="cls-basescheduler.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Buildbot
              <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.11.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Buildbot Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">3.1. Development Quick-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="pull-request.html">3.2. Submitting Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">3.3. General Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest.html">3.4. REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="raml/index.html">3.5. REST API Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">3.6. Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">3.7. Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="database/index.html">3.8. Database connectors API</a></li>
<li class="toctree-l2"><a class="reference internal" href="mq.html">3.9. Messaging and Queues</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="classes.html">3.10. Classes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cls-build.html">3.10.1. Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-worker.html">3.10.2. Workers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-buildfactory.html">3.10.3. BuildFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-changesources.html">3.10.4. Change Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-remotecommands.html">3.10.5. RemoteCommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-buildsteps.html">3.10.6. BuildSteps</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-basescheduler.html">3.10.7. BaseScheduler</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.10.8. ForceScheduler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameters">3.10.8.1. Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nested-parameters">3.10.8.2. Nested Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cls-irenderable.html">3.10.9. IRenderable</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iproperties.html">3.10.10. IProperties</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-iconfigurator.html">3.10.11. IConfigurator</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-resultspec.html">3.10.12. ResultSpecs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-protocols.html">3.10.13. Protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-workermanager.html">3.10.14. WorkerManager</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-log.html">3.10.15. Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-logobserver.html">3.10.16. LogObservers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-auth.html">3.10.17. Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-avatar.html">3.10.18. Avatars</a></li>
<li class="toctree-l3"><a class="reference internal" href="cls-www.html">3.10.19. Web Server Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">3. </span>Buildbot Development</a></li>
          <li class="breadcrumb-item"><a href="classes.html"><span class="section-number">3.10. </span>Classes</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.10.8. </span>ForceScheduler</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/cls-forcesched.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="forcescheduler">
<span id="id1"></span><h1><span class="section-number">3.10.8. </span>ForceScheduler<a class="headerlink" href="#forcescheduler" title="Link to this heading"></a></h1>
<p>The force scheduler has a symbiotic relationship with the web application, so it deserves some further description.</p>
<section id="parameters">
<h2><span class="section-number">3.10.8.1. </span>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<p>The force scheduler comes with a set of parameter classes.
This section contains information to help users or developers who are interested in adding new parameter types or hacking the existing types.</p>
<dl class="py class" id="module-buildbot.schedulers.forceshed">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">buildbot.schedulers.forceshed.</span></span><span class="sig-name descname"><span class="pre">BaseParameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regex</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter" title="Link to this definition"></a></dt>
<dd><p>This is the base implementation for most parameters, it will check validity, ensure the arg is present if the <a class="reference internal" href="#buildbot.schedulers.forceshed.BaseParameter.required" title="buildbot.schedulers.forceshed.BaseParameter.required"><code class="xref py py-attr docutils literal notranslate"><span class="pre">required</span></code></a> attribute is set, and implement the default value.
It will finally call <a class="reference internal" href="#buildbot.schedulers.forceshed.BaseParameter.updateFromKwargs" title="buildbot.schedulers.forceshed.BaseParameter.updateFromKwargs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">updateFromKwargs</span></code></a> to process the string(s) from the HTTP POST.</p>
<p>The <a class="reference internal" href="#buildbot.schedulers.forceshed.BaseParameter" title="buildbot.schedulers.forceshed.BaseParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseParameter</span></code></a> constructor converts all keyword arguments into instance attributes, so it is generally not necessary for subclasses to implement a constructor.</p>
<p>For custom parameters that set properties, one simple customization point is <cite>getFromKwargs</cite>:</p>
<blockquote>
<div><dl class="py method">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.getFromKwargs">
<span class="sig-name descname"><span class="pre">getFromKwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.getFromKwargs" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – a dictionary of the posted values</p>
</dd>
</dl>
<p>Given the passed-in POST parameters, return the value of the property that should be set.</p>
</dd></dl>

</div></blockquote>
<p>For more control over parameter parsing, including modifying sourcestamps or changeids, override the <code class="docutils literal notranslate"><span class="pre">updateFromKwargs</span></code> function, which is the function that <code class="xref py py-class docutils literal notranslate"><span class="pre">ForceScheduler</span></code> invokes for processing:</p>
<blockquote>
<div><dl class="py method">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.updateFromKwargs">
<span class="sig-name descname"><span class="pre">updateFromKwargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">master</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">changes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sourcestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.updateFromKwargs" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>master</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildMaster</span></code> instance</p></li>
<li><p><strong>properties</strong> – a dictionary of properties</p></li>
<li><p><strong>changes</strong> – a list of changeids that will be used to build the SourceStamp for the forced builds</p></li>
<li><p><strong>sourcestamps</strong> – the SourceStamp dictionary that will be passed to the build; some parameters modify sourcestamps rather than properties</p></li>
<li><p><strong>collector</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">buildbot.schedulers.forcesched.ValidationErrorCollector</span></code> object, which is used by nestedParameter to collect errors from its childs</p></li>
<li><p><strong>kwargs</strong> – a dictionary of the posted values</p></li>
</ul>
</dd>
</dl>
<p>This method updates <code class="docutils literal notranslate"><span class="pre">properties</span></code>, <code class="docutils literal notranslate"><span class="pre">changes</span></code>,  and/or <code class="docutils literal notranslate"><span class="pre">sourcestamps</span></code> according to the request.
The default implementation is good for many simple uses, but can be overridden for more complex purposes.</p>
<p>When overriding this function, take all parameters by name (not by position), and include an <code class="docutils literal notranslate"><span class="pre">**unused</span></code> catch-all to guard against future changes.</p>
</dd></dl>

<p>The remaining attributes and methods should be overridden by subclasses, although <a class="reference internal" href="#buildbot.schedulers.forceshed.BaseParameter" title="buildbot.schedulers.forceshed.BaseParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseParameter</span></code></a> provides appropriate defaults.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.name" title="Link to this definition"></a></dt>
<dd><p>The name of the parameter.
This corresponds to the name of the property that your parameter will set.
This name is also used internally as identifier for HTTP POST arguments.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.label">
<span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.label" title="Link to this definition"></a></dt>
<dd><p>The label of the parameter, as displayed to the user.
This value can contain raw HTML.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.fullName">
<span class="sig-name descname"><span class="pre">fullName</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.fullName" title="Link to this definition"></a></dt>
<dd><p>A fully-qualified name that uniquely identifies the parameter in the scheduler.
This name is used internally as the identifier for HTTP POST arguments.
It is a mix of <cite>name</cite> and the parent’s <cite>name</cite> (in the case of nested parameters).
This field is not modifiable.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.type" title="Link to this definition"></a></dt>
<dd><p>A string identifying the type that the parameter conforms to.
It is used by the angular application to find which angular directive to use for showing the form widget.
The available values are visible in <a class="reference external" href="https://github.com/buildbot/buildbot/tree/master/www/base/src/app/common/directives/forcefields/forcefields.directive.js">www/base/src/app/common/directives/forcefields/forcefields.directive.js</a>.</p>
<p>Examples of how to create a custom parameter widgets are available in the Buildbot source code in directories:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/buildbot/buildbot/tree/master/www/codeparameter">www/codeparameter</a></p></li>
<li><p><a class="reference external" href="https://github.com/buildbot/buildbot/tree/master/www/nestedexample">www/nestedexample</a></p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.default">
<span class="sig-name descname"><span class="pre">default</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.default" title="Link to this definition"></a></dt>
<dd><p>The default value to use if there is no user input.
This is also used to fill in the form presented to the user.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.required">
<span class="sig-name descname"><span class="pre">required</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.required" title="Link to this definition"></a></dt>
<dd><p>If true, an error will be shown to user if there is no input in this field.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.multiple">
<span class="sig-name descname"><span class="pre">multiple</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.multiple" title="Link to this definition"></a></dt>
<dd><p>If true, this parameter represents a list of values (e.g. list of tests to run).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.regex">
<span class="sig-name descname"><span class="pre">regex</span></span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.regex" title="Link to this definition"></a></dt>
<dd><p>A string that will be compiled as a regex and used to validate the string value of this parameter.
If None, then no validation will take place.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.parse_from_args">
<span class="sig-name descname"><span class="pre">parse_from_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">l</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.parse_from_args" title="Link to this definition"></a></dt>
<dd><p>Return the list of property values corresponding to the list of strings passed by the user.
The default function will just call <a class="reference internal" href="#buildbot.schedulers.forceshed.BaseParameter.parse_from_arg" title="buildbot.schedulers.forceshed.BaseParameter.parse_from_arg"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_from_arg</span></code></a> on every argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildbot.schedulers.forceshed.BaseParameter.parse_from_arg">
<span class="sig-name descname"><span class="pre">parse_from_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildbot.schedulers.forceshed.BaseParameter.parse_from_arg" title="Link to this definition"></a></dt>
<dd><p>Return the property value corresponding to the string passed by the user.
The default function will simply return the input argument.</p>
</dd></dl>

</div></blockquote>
</dd></dl>

</section>
<section id="nested-parameters">
<h2><span class="section-number">3.10.8.2. </span>Nested Parameters<a class="headerlink" href="#nested-parameters" title="Link to this heading"></a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">NestedParameter</span></code> class is a container for parameters.
The original motivating purpose for this feature is the multiple-codebase configuration, which needs to provide the user with a form to control the branch (et al) for each codebase independently.
Each branch parameter is a string field with name ‘branch’ and these must be disambiguated.</p>
<p>In Buildbot nine, this concept has been extended to allow grouping different parameters into UI containers.
Details of the available layouts is described in <a class="reference internal" href="../manual/configuration/schedulers.html#forcescheduler-parameters"><span class="std std-ref">NestedParameter</span></a>.</p>
<p>Each of the child parameters mixes in the parent’s name to create the fully qualified <code class="docutils literal notranslate"><span class="pre">fullName</span></code>.
This allows, for example, each of the ‘branch’ fields to have a unique name in the POST request.
The <cite>NestedParameter</cite> handles adding this extra bit to the name to each of the children.
When the <cite>kwarg</cite> dictionary is posted back, this class also converts the flat POST dictionary into a richer structure that represents the nested structure.</p>
<p>For example, if the nested parameter has the name ‘foo’, and has children ‘bar1’ and ‘bar2’, then the POST will have entries like “foo.bar1” and “foo.bar2”.
The nested parameter will translate this into a dictionary in the ‘kwargs’ structure, resulting in something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;bar1&#39;</span><span class="p">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar2&#39;</span><span class="p">:</span> <span class="s1">&#39;...&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Arbitrary nesting is allowed and results in a deeper dictionary structure.</p>
<p>Nesting can also be used for presentation purposes.
If the name of the <code class="xref py py-class docutils literal notranslate"><span class="pre">NestedParameter</span></code> is empty, the nest is “anonymous” and does not mangle the child names.
However, in the HTML layout, the nest will be presented as a logical group.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cls-basescheduler.html" class="btn btn-neutral float-left" title="3.10.7. BaseScheduler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cls-irenderable.html" class="btn btn-neutral float-right" title="3.10.9. IRenderable" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>