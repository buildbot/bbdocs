

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.1. First Run &mdash; Buildbot 4.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../_static/icon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a17b270f"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.2. A Quick Tour" href="tour.html" />
    <link rel="prev" title="1. Buildbot Tutorial" href="index.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Buildbot
              <img src="../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Buildbot Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.1. First Run</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#goal">1.1.1. Goal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-introduction-to-buildbot">1.1.2. Simple introduction to BuildBot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-ready">1.1.3. Getting ready</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-master">1.1.4. Creating a master</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-worker">1.1.5. Creating a worker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wrapping-up">1.1.6. Wrapping up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tour.html">1.2. A Quick Tour</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">1.3. First Buildbot run with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="further.html">1.4. Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/index.html">2. Buildbot Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">1. </span>Buildbot Tutorial</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1.1. </span>First Run</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/firstrun.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="first-run">
<span id="first-run-label"></span><h1><span class="section-number">1.1. </span>First Run<a class="headerlink" href="#first-run" title="Link to this heading"></a></h1>
<section id="goal">
<h2><span class="section-number">1.1.1. </span>Goal<a class="headerlink" href="#goal" title="Link to this heading"></a></h2>
<p>This tutorial will take you from zero to running your first buildbot master and worker as quickly
as possible, without changing the default configuration.</p>
<p>This tutorial is all about instant gratification and the five minute experience: in five minutes we
want to convince you that this project works, and that you should seriously consider spending time
learning the system. In this tutorial no configuration or code changes are done.</p>
<p>This tutorial assumes that you are running Unix, but might be adaptable to Windows.</p>
<p>Thanks to <a class="reference external" href="https://pypi.python.org/pypi/virtualenv">virtualenv</a>, installing buildbot in a standalone environment is very easy. For those more
familiar with <a class="reference external" href="https://docker.com">Docker</a>, there also exists a <a class="reference internal" href="docker.html#first-run-docker-label"><span class="std std-ref">docker version of these instructions</span></a>.</p>
<p>You should be able to cut and paste each shell block from this tutorial directly into a terminal.</p>
</section>
<section id="simple-introduction-to-buildbot">
<h2><span class="section-number">1.1.2. </span>Simple introduction to BuildBot<a class="headerlink" href="#simple-introduction-to-buildbot" title="Link to this heading"></a></h2>
<p>Before trying to run BuildBot it’s helpful to know what BuildBot is.</p>
<p>BuildBot is a continuous integration framework written in Python. It consists of a master daemon
and potentially many worker daemons that usually run on other machines. The master daemon runs a
web server that allows the end user to start new builds and to control the behaviour of the
BuildBot instance. The master also distributes builds to the workers. The worker daemons connect to
the master daemon and execute builds whenever master tells them to do so.</p>
<p>In this tutorial we will run a single master and a single worker on the same machine.</p>
<p>A more thorough explanation can be found in the <a class="reference internal" href="../manual/introduction.html#introduction"><span class="std std-ref">manual section</span></a> of the Buildbot documentation.</p>
</section>
<section id="getting-ready">
<span id="getting-code-label"></span><h2><span class="section-number">1.1.3. </span>Getting ready<a class="headerlink" href="#getting-ready" title="Link to this heading"></a></h2>
<p>There are many ways to get the code on your machine.
We will use the easiest one: via <code class="docutils literal notranslate"><span class="pre">pip</span></code> in a <a class="reference external" href="https://pypi.python.org/pypi/virtualenv">virtualenv</a>.
It has the advantage of not polluting your operating system, as everything will be contained in the virtualenv.</p>
<p>To make this work, you will need the following installed:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/">Python</a> and the development packages for it</p></li>
<li><p><a class="reference external" href="https://pypi.python.org/pypi/virtualenv">virtualenv</a></p></li>
</ul>
<p>Preferably, use your distribution package manager to install these.</p>
<p>You will also need a working Internet connection, as virtualenv and pip will need to download other
projects from the Internet. The master and builder daemons will need to be able to connect to
<code class="docutils literal notranslate"><span class="pre">github.com</span></code> via HTTPS to fetch the repo we’re testing.</p>
<p>If you need to use a proxy for this ensure that either the <code class="docutils literal notranslate"><span class="pre">HTTPS_PROXY</span></code> or <code class="docutils literal notranslate"><span class="pre">ALL_PROXY</span></code>
environment variable is set to your proxy, e.g., by executing <code class="docutils literal notranslate"><span class="pre">export</span>
<span class="pre">HTTPS_PROXY=http://localhost:9080</span></code> in the shell before starting each daemon.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Buildbot does not require root access.
Run the commands in this tutorial as a normal, unprivileged user.</p>
</div>
</section>
<section id="creating-a-master">
<h2><span class="section-number">1.1.4. </span>Creating a master<a class="headerlink" href="#creating-a-master" title="Link to this heading"></a></h2>
<p>The first necessary step is to create a virtualenv for our master.
We first create a separate directory to demonstrate the distinction between a master and worker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/buildbot-test/master_root
<span class="nb">cd</span><span class="w"> </span>~/buildbot-test/master_root
</pre></div>
</div>
<p>Then we create the virtual environment. On Python 3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>sandbox
<span class="nb">source</span><span class="w"> </span>sandbox/bin/activate
</pre></div>
</div>
<p>Next, we need to install several build dependencies to make sure we can install buildbot and its supporting packages.
These build dependencies are:</p>
<ul class="simple">
<li><p>GCC build tools (<code class="docutils literal notranslate"><span class="pre">gcc</span></code> for RHEL/CentOS/Fedora based distributions, or <code class="docutils literal notranslate"><span class="pre">build-essential</span></code>
for Ubuntu/Debian based distributions).</p></li>
<li><p>Python development library (<code class="docutils literal notranslate"><span class="pre">python3-devel</span></code> for RHEL/CentOS/Fedora based distributions, or
<code class="docutils literal notranslate"><span class="pre">python3-dev</span></code> for Ubuntu/Debian based distributions).</p></li>
<li><p>OpenSSL development library (<code class="docutils literal notranslate"><span class="pre">openssl-devel</span></code> for RHEL/CentOS/Fedora based distributions, or
<code class="docutils literal notranslate"><span class="pre">libssl-dev</span></code> for Ubuntu/Debian based distributions).</p></li>
<li><p><cite>libffi</cite> development library (<code class="docutils literal notranslate"><span class="pre">libffi-devel</span></code> for RHEL/CentOS/Fedora based distributions, or
<code class="docutils literal notranslate"><span class="pre">libffi-dev</span></code> for Ubuntu/Debian based distributions).</p></li>
</ul>
<p>Install these build dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># if in Ubuntu/Debian based distributions:</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>build-essential<span class="w"> </span>python3-dev<span class="w"> </span>libssl-dev<span class="w"> </span>libffi-dev

<span class="c1"># if in RHEL/CentOS/Fedora based distributions:</span>
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>gcc<span class="w"> </span>python3-devel<span class="w"> </span>openssl-devel<span class="w"> </span>libffi-devel
</pre></div>
</div>
<p>or refer to your distribution’s documentation on how to install these packages.</p>
<p>Now that we are ready, we need to install buildbot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip
pip<span class="w"> </span>install<span class="w"> </span><span class="s1">&#39;buildbot[bundle]&#39;</span>
</pre></div>
</div>
<p>Now that buildbot is installed, it’s time to create the master.
<code class="docutils literal notranslate"><span class="pre">my_master</span></code> represents a path to a directory, where future master will be created:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot<span class="w"> </span>create-master<span class="w"> </span>my_master
</pre></div>
</div>
<p>Buildbot’s activity is controlled by a configuration file. Buildbot by default uses configuration
from file at <code class="docutils literal notranslate"><span class="pre">master.cfg</span></code>, but its installation comes with a sample configuration file named
<code class="docutils literal notranslate"><span class="pre">master.cfg.sample</span></code>. We will use the sample configuration file unchanged, but we have to rename
it to <code class="docutils literal notranslate"><span class="pre">master.cfg</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mv<span class="w"> </span>my_master/master.cfg.sample<span class="w"> </span>my_master/master.cfg
</pre></div>
</div>
<p>Finally, start the master:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot<span class="w"> </span>start<span class="w"> </span>my_master
</pre></div>
</div>
<p>You will now see some log information from the master in this terminal.
It should end with lines like these:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014-11-01 15:52:55+0100 [-] BuildMaster is running
The buildmaster appears to have (re)started correctly.
</pre></div>
</div>
<p>From now on, feel free to visit the web status page running on the port 8010: <a class="reference external" href="http://localhost:8010/">http://localhost:8010/</a></p>
<p>Our master now needs (at least) one worker to execute its commands.
For that, head on to the next section!</p>
</section>
<section id="creating-a-worker">
<h2><span class="section-number">1.1.5. </span>Creating a worker<a class="headerlink" href="#creating-a-worker" title="Link to this heading"></a></h2>
<p>The worker will be executing the commands sent by the master.
In this tutorial, we are using the buildbot/hello-world project as an example.
As a consequence of this, your worker will need access to the <a class="reference external" href="https://git-scm.com/">git</a> command in order to checkout some code.
Be sure that it is installed, or the builds will fail.</p>
<p>Same as we did for our master, we will create a virtualenv for our worker next to the master’s one.
It would however be completely ok to do this on another computer - as long as the <em>worker</em> computer
is able to connect to the <em>master’s</em> . We first create a new directory for the worker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/buildbot-test/worker_root
<span class="nb">cd</span><span class="w"> </span>~/buildbot-test/worker_root
</pre></div>
</div>
<p>Again, we create a virtual environment. On Python 3:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>sandbox
<span class="nb">source</span><span class="w"> </span>sandbox/bin/activate
</pre></div>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">buildbot-worker</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip
pip<span class="w"> </span>install<span class="w"> </span>buildbot-worker
<span class="c1"># required for `runtests` build</span>
pip<span class="w"> </span>install<span class="w"> </span>setuptools-trial
</pre></div>
</div>
<p>Now, create the worker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot-worker<span class="w"> </span>create-worker<span class="w"> </span>my_worker<span class="w"> </span>localhost<span class="w"> </span>example-worker<span class="w"> </span>pass
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you decided to create this from another computer, you should replace <code class="docutils literal notranslate"><span class="pre">localhost</span></code> with the
name of the computer where your master is running.</p>
</div>
<p>The username (<code class="docutils literal notranslate"><span class="pre">example-worker</span></code>), and password (<code class="docutils literal notranslate"><span class="pre">pass</span></code>) should be the same as those in
<code class="file docutils literal notranslate"><span class="pre">my_master/master.cfg</span></code>; verify this is the case by looking at the section for
<code class="docutils literal notranslate"><span class="pre">c['workers']</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>../master_root/my_master/master.cfg
</pre></div>
</div>
<p>And finally, start the worker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot-worker<span class="w"> </span>start<span class="w"> </span>my_worker
</pre></div>
</div>
<p>Check the worker’s output.
It should end with lines like these:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014-11-01 15:56:51+0100 [-] Connecting to localhost:9989
2014-11-01 15:56:51+0100 [Broker,client] message from master: attached
The worker appears to have (re)started correctly.
</pre></div>
</div>
<p>Meanwhile, from the other terminal, in the master log (<code class="file docutils literal notranslate"><span class="pre">twisted.log</span></code> in the master
directory), you should see lines like these:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2014-11-01 15:56:51+0100 [Broker,1,127.0.0.1] worker &#39;example-worker&#39; attaching from
IPv4Address(TCP, &#39;127.0.0.1&#39;, 54015)
2014-11-01 15:56:51+0100 [Broker,1,127.0.0.1] Got workerinfo from &#39;example-worker&#39;
2014-11-01 15:56:51+0100 [-] bot attached
</pre></div>
</div>
</section>
<section id="wrapping-up">
<h2><span class="section-number">1.1.6. </span>Wrapping up<a class="headerlink" href="#wrapping-up" title="Link to this heading"></a></h2>
<p>Your directory tree now should look like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>~/buildbot-test/master_root/my_master  # master base directory
~/buildbot-test/master_root/sandbox    # virtualenv for master

~/buildbot-test/worker_root/my_worker  # worker base directory
~/buildbot-test/worker_root/sandbox    # virtualenv for worker
</pre></div>
</div>
<p>You should now be able to go to <a class="reference external" href="http://localhost:8010">http://localhost:8010</a>, where you will see a web page similar to:</p>
<img alt="index page" src="../_images/index.png" />
<p>Click on “Builds” at the left to open the submenu and then
<a class="reference external" href="http://localhost:8010/#/builders">Builders</a> to see that the worker you just started (identified
by the green bubble) has connected to the master:</p>
<img alt="builder runtests is active." src="../_images/builders.png" />
<p>Your master is now quietly waiting for new commits to hello-world.
This doesn’t happen very often though.
In the next section, we’ll see how to manually start a build.</p>
<p>We just wanted to get you to dip your toes in the water. It’s easy to take your first steps, but
this is about as far as we can go without touching the configuration.</p>
<p>You’ve got a taste now, but you’re probably curious for more.
Let’s step it up a little in the second tutorial by changing the configuration and doing an actual build.
Continue on to <a class="reference internal" href="tour.html#quick-tour-label"><span class="std std-ref">A Quick Tour</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="1. Buildbot Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tour.html" class="btn btn-neutral float-right" title="1.2. A Quick Tour" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>