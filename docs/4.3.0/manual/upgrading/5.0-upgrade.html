

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.12.1. Upgrading to Buildbot 5.0 (not released) &mdash; Buildbot 4.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../../_static/icon.png"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=a17b270f"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.12.10. Upgrading to Buildbot 4.0" href="4.0-upgrade.html" />
    <link rel="prev" title="2.12. Upgrading" href="index.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Buildbot
              <img src="../../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">2. Buildbot Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts.html">2.3. Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secretsmanagement.html">2.4. Secret Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">2.5. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../customization/index.html">2.6. Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline.html">2.7. Command-line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">2.8. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization.html">2.9. Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">2.10. Plugin Infrastructure in Buildbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html">2.11. Deployment</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2.12. Upgrading</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.12.1. Upgrading to Buildbot 5.0 (not released)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-support">2.12.2. Testing support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#non-reconfigurable-services">2.12.3. Non-reconfigurable services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#http-service">2.12.4. HTTP service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-factories">2.12.5. Build factories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database-connectors">2.12.6. Database connectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schedulers">2.12.7. Schedulers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reporters">2.12.8. Reporters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-api">2.12.9. Data API</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.0-upgrade.html">2.12.10. Upgrading to Buildbot 4.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="3.0-upgrade.html">2.12.11. Upgrading to Buildbot 3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="2.0-upgrade.html">2.12.12. Upgrading to Buildbot 2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="1.0-upgrade.html">2.12.13. Upgrading to Buildbot 1.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="0.9-upgrade.html">2.12.14. Upgrading to Buildbot 0.9.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="0.9-new-style-steps.html">2.12.15. New-Style Build Steps in Buildbot 0.9.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="0.9-worker-transition.html">2.12.16. Transition to “worker” terminology in BuildBot 0.9.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">2. </span>Buildbot Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">2.12. </span>Upgrading</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.12.1. </span>Upgrading to Buildbot 5.0 (not released)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manual/upgrading/5.0-upgrade.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="upgrading-to-buildbot-5-0-not-released">
<span id="upgrading"></span><h1><span class="section-number">2.12.1. </span>Upgrading to Buildbot 5.0 (not released)<a class="headerlink" href="#upgrading-to-buildbot-5-0-not-released" title="Link to this heading"></a></h1>
<p>Upgrading a Buildbot instance from 4.x to 5.0 may require some work to achieve.</p>
<p>The recommended upgrade procedure is as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>Upgrade to the last released BuildBot version in 4.x series.</p></li>
<li><p>Remove usage of the deprecated APIs.
All usages of deprecated APIs threw a deprecation warning at the point of use.
If the code does not emit deprecation warnings, it’s in a good shape in this regard.
You may need to run the master on a real workload in order to force all deprecated code paths to be exercised.</p></li>
<li><p>Upgrade to the latest Buildbot 5.0.x release.</p></li>
<li><p>(Optional) Upgrade to newest Buildbot 5.x.
The newest point release will contain bug fixes and functionality improvements.</p></li>
</ul>
</div></blockquote>
</section>
<section id="testing-support">
<h1><span class="section-number">2.12.2. </span>Testing support<a class="headerlink" href="#testing-support" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">build_files</span></code>, <code class="docutils literal notranslate"><span class="pre">worker_env</span></code> and <code class="docutils literal notranslate"><span class="pre">worker_version</span></code> arguments of
<code class="docutils literal notranslate"><span class="pre">TestBuildStepMixin.setup_step()</span></code> have been removed. As a replacement, call
<code class="docutils literal notranslate"><span class="pre">TestBuildStepMixin.setup_build()</span></code> before <code class="docutils literal notranslate"><span class="pre">setup_step</span></code>.</p>
</section>
<section id="non-reconfigurable-services">
<h1><span class="section-number">2.12.3. </span>Non-reconfigurable services<a class="headerlink" href="#non-reconfigurable-services" title="Link to this heading"></a></h1>
<p>Raising <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> from <code class="docutils literal notranslate"><span class="pre">reconfigServiceWithSibling</span></code> or <code class="docutils literal notranslate"><span class="pre">reconfigService</span></code> service
functions has been deprecated. Use <code class="docutils literal notranslate"><span class="pre">canReconfigWithSibling()</span></code> that returns <code class="docutils literal notranslate"><span class="pre">False</span></code> as a
replacement.</p>
</section>
<section id="http-service">
<h1><span class="section-number">2.12.4. </span>HTTP service<a class="headerlink" href="#http-service" title="Link to this heading"></a></h1>
<p>The following methods of <code class="docutils literal notranslate"><span class="pre">httpclientservice.HTTPClientService</span></code> have been deprecated:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delete</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">post</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">put</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">updateHeaders</span></code></p></li>
</ul>
</div></blockquote>
<p>As a replacement, use <code class="docutils literal notranslate"><span class="pre">httpclientservice.HTTPSession</span></code> and call corresponding methods on it.</p>
</section>
<section id="build-factories">
<h1><span class="section-number">2.12.5. </span>Build factories<a class="headerlink" href="#build-factories" title="Link to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">BuildFactory</span></code> <code class="docutils literal notranslate"><span class="pre">workdir</span></code> attribute no longer supports callables. As a replacement, use a
renderable instead.</p>
</section>
<section id="database-connectors">
<h1><span class="section-number">2.12.6. </span>Database connectors<a class="headerlink" href="#database-connectors" title="Link to this heading"></a></h1>
<p>The internal API presented by the database connectors has been changed to return data classes
instead of Python dictionaries. To upgrade to the data classes simply access the data as class
attributes, not dictionary keys.</p>
<p>The following functions have been affected:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BuildDataConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getBuildData</span></code>, <code class="docutils literal notranslate"><span class="pre">getBuildDataNoValue</span></code>, and <code class="docutils literal notranslate"><span class="pre">getAllBuildDataNoValues</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BuildsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getBuild</span></code>, <code class="docutils literal notranslate"><span class="pre">getBuildByNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">getPrevSuccessfulBuild</span></code>,
<code class="docutils literal notranslate"><span class="pre">getBuildsForChange</span></code>, <code class="docutils literal notranslate"><span class="pre">getBuilds</span></code>, <code class="docutils literal notranslate"><span class="pre">_getRecentBuilds</span></code>, and <code class="docutils literal notranslate"><span class="pre">_getBuild</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BuildRequestsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getBuildRequest</span></code>, and <code class="docutils literal notranslate"><span class="pre">getBuildRequests</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BuildsetsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getBuildset</span></code>, <code class="docutils literal notranslate"><span class="pre">getBuildsets</span></code>, and <code class="docutils literal notranslate"><span class="pre">getRecentBuildsets</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BuildersConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getBuilder</span></code> and <code class="docutils literal notranslate"><span class="pre">getBuilders</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChangesConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getChange</span></code>, <code class="docutils literal notranslate"><span class="pre">getChangesForBuild</span></code>, <code class="docutils literal notranslate"><span class="pre">getChangeFromSSid</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ChangeSourcesConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getChangeSource</span></code>, and <code class="docutils literal notranslate"><span class="pre">getChangeSources</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LogsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getLog</span></code>, <code class="docutils literal notranslate"><span class="pre">getLogBySlug</span></code>, and <code class="docutils literal notranslate"><span class="pre">getLogs</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MastersConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getMaster</span></code>, and <code class="docutils literal notranslate"><span class="pre">getMasters</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProjectsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">get_project</span></code>, <code class="docutils literal notranslate"><span class="pre">get_projects</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SchedulersConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getScheduler</span></code>, and <code class="docutils literal notranslate"><span class="pre">getSchedulers</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SourceStampsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getSourceStamp</span></code>, <code class="docutils literal notranslate"><span class="pre">get_sourcestamps_for_buildset</span></code>,
<code class="docutils literal notranslate"><span class="pre">getSourceStampsForBuild</span></code>, and <code class="docutils literal notranslate"><span class="pre">getSourceStamps</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StepsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getStep</span></code>, and <code class="docutils literal notranslate"><span class="pre">getSteps</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TestResultsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getTestResult</span></code> and <code class="docutils literal notranslate"><span class="pre">getTestResults</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TestResultSetsConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getTestResultSet</span></code>, and <code class="docutils literal notranslate"><span class="pre">getTestResultSets</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UsersConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getUser</span></code>, <code class="docutils literal notranslate"><span class="pre">getUserByUsername</span></code>, and <code class="docutils literal notranslate"><span class="pre">getUsers</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WorkersConnectorComponent</span></code> <code class="docutils literal notranslate"><span class="pre">getWorker</span></code>, and <code class="docutils literal notranslate"><span class="pre">getWorkers</span></code>.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">DataConnector.produceEvent()</span></code> has been deprecated. The replacement is update methods from the
data API.</p>
</section>
<section id="schedulers">
<h1><span class="section-number">2.12.7. </span>Schedulers<a class="headerlink" href="#schedulers" title="Link to this heading"></a></h1>
<p>Old location of <code class="docutils literal notranslate"><span class="pre">Dependent</span></code> scheduler has been removed. Instead of
<code class="docutils literal notranslate"><span class="pre">buildbot.schedulers.basic.Dependent</span></code> use <code class="docutils literal notranslate"><span class="pre">buildbot.plugins.schedulers.Dependent</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">buildbot.schedulers.base.BaseScheduler</span></code> has been deprecated. Replace uses of it with
<code class="docutils literal notranslate"><span class="pre">buildbot.schedulers.base.ReconfigurableBaseScheduler</span></code>.</p>
</section>
<section id="reporters">
<h1><span class="section-number">2.12.8. </span>Reporters<a class="headerlink" href="#reporters" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">add_logs</span></code> argument of <code class="docutils literal notranslate"><span class="pre">BuildStatusGenerator</span></code>, <code class="docutils literal notranslate"><span class="pre">BuildStartEndStatusGenerator</span></code> and
<code class="docutils literal notranslate"><span class="pre">BuildSetStatusGenerator</span></code> has been removed. As a replacement, set <code class="docutils literal notranslate"><span class="pre">want_logs_content</span></code> of the
passed message formatter.</p>
</section>
<section id="data-api">
<h1><span class="section-number">2.12.9. </span>Data API<a class="headerlink" href="#data-api" title="Link to this heading"></a></h1>
<p>The multiline string type of <code class="docutils literal notranslate"><span class="pre">ResourceType.eventPathPatterns</span></code> and <code class="docutils literal notranslate"><span class="pre">Enpoint.pathPatterns</span></code>
attribute has been deprecated. Use list of strings type instead.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="2.12. Upgrading" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="4.0-upgrade.html" class="btn btn-neutral float-right" title="2.12.10. Upgrading to Buildbot 4.0" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>