

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.5.18. Change Hooks &mdash; Buildbot 4.3.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/buildbot_rtd.css?v=915d5e18" />

  
    <link rel="shortcut icon" href="../../_static/icon.png"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=a17b270f"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.5.19. Custom Services" href="services/index.html" />
    <link rel="prev" title="2.5.17. Web Server" href="www.html" /> 
<!-- GA-TRACKING-START -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-12313843-4");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}
</script>
<!-- GA-TRACKING-END -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Buildbot
              <img src="../../_static/full_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">1. Buildbot Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">2. Buildbot Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html">2.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts.html">2.3. Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secretsmanagement.html">2.4. Secret Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2.5. Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">2.5.1. Configuring Buildbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="global.html">2.5.2. Global Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html">2.5.3. Change Sources and Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="changesources.html#changes">2.5.4. Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="schedulers.html">2.5.5. Schedulers</a></li>
<li class="toctree-l3"><a class="reference internal" href="workers.html">2.5.6. Workers</a></li>
<li class="toctree-l3"><a class="reference internal" href="builders.html">2.5.7. Builder Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">2.5.8. Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="codebases.html">2.5.9. Codebases</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildfactories.html">2.5.10. Build Factories</a></li>
<li class="toctree-l3"><a class="reference internal" href="buildsets.html">2.5.11. Build Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="properties.html">2.5.12. Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="steps/index.html">2.5.13. Build Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="interlocks.html">2.5.14. Interlocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="report_generators/index.html">2.5.15. Report Generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="reporters/index.html">2.5.16. Reporters</a></li>
<li class="toctree-l3"><a class="reference internal" href="www.html">2.5.17. Web Server</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.5.18. Change Hooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#change-hooks-auth">2.5.18.1. Change Hooks Auth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mercurial-hook">2.5.18.2. Mercurial hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#github-hook">2.5.18.3. GitHub hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bitbucket-hook">2.5.18.4. BitBucket hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bitbucket-cloud-hook">2.5.18.5. Bitbucket Cloud hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bitbucket-server-hook">2.5.18.6. Bitbucket Server hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#poller-hook">2.5.18.7. Poller hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gitlab-hook">2.5.18.8. GitLab hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gitorious-hook">2.5.18.9. Gitorious Hook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-hooks">2.5.18.10. Custom Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="services/index.html">2.5.19. Custom Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="dbconfig.html">2.5.20. DbConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="configurators.html">2.5.21. Configurators</a></li>
<li class="toctree-l3"><a class="reference internal" href="manhole.html">2.5.22. Manhole</a></li>
<li class="toctree-l3"><a class="reference internal" href="multimaster.html">2.5.23. Multimaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicodebase.html">2.5.24. Multiple-Codebase Builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc/index.html">2.5.25. Miscellaneous Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tests/index.html">2.5.26. Testing Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../customization/index.html">2.6. Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmdline.html">2.7. Command-line Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources.html">2.8. Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization.html">2.9. Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins.html">2.10. Plugin Infrastructure in Buildbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deploy.html">2.11. Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading/index.html">2.12. Upgrading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">3. Buildbot Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html">4. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../relnotes/index.html#older-release-notes">5. Older Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indices.html">6. API Indices</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Buildbot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">2. </span>Buildbot Manual</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">2.5. </span>Configuration</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.5.18. </span>Change Hooks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manual/configuration/wwwhooks.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="change-hooks">
<span id="id1"></span><h1><span class="section-number">2.5.18. </span>Change Hooks<a class="headerlink" href="#change-hooks" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">/change_hook</span></code> URL is a magic URL which will accept HTTP requests and translate them into
changes for Buildbot. Implementations (such as a trivial json-based endpoint and a GitHub
implementation) can be found in <a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/master/buildbot/www/hooks">master/buildbot/www/hooks</a>. The format of the URL is
<code class="samp docutils literal notranslate"><span class="pre">/change_hook/</span><em><span class="pre">DIALECT</span></em></code> where DIALECT is a package within the hooks directory.
<code class="docutils literal notranslate"><span class="pre">change_hook</span></code> is disabled by default and each DIALECT has to be enabled separately, for security
reasons.</p>
<p>An example <code class="docutils literal notranslate"><span class="pre">www</span></code> configuration line which enables change_hook and two DIALECTS:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;base&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;somehook&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;option1&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;option2&#39;</span><span class="p">:</span><span class="kc">False</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Within the <code class="docutils literal notranslate"><span class="pre">www</span></code> config dictionary arguments, the <code class="docutils literal notranslate"><span class="pre">change_hook</span></code> key enables/disables the
module, and <code class="docutils literal notranslate"><span class="pre">change_hook_dialects</span></code> whitelists DIALECTs where the keys are the module names and
the values are optional arguments which will be passed to the hooks.</p>
<p>The <a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/master/contrib/post_build_request.py">master/contrib/post_build_request.py</a> script allows for the submission of an arbitrary
change request. Run <strong class="command">post_build_request.py --help</strong> for more information. The <code class="docutils literal notranslate"><span class="pre">base</span></code>
dialect must be enabled for this to work.</p>
<section id="change-hooks-auth">
<span id="id2"></span><h2><span class="section-number">2.5.18.1. </span>Change Hooks Auth<a class="headerlink" href="#change-hooks-auth" title="Link to this heading"></a></h2>
<p>By default, the change hook URL is not protected.
Some hooks implement their own authentication method.
Others require the generic method to be secured.</p>
<p>To protect URL against unauthorized access, you may use <code class="docutils literal notranslate"><span class="pre">change_hook_auth</span></code> option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method uses <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">BasicAuth</span></code>. It implies the use of SSL via <a class="reference internal" href="www.html#reverse-proxy-config"><span class="std std-ref">Reverse Proxy Configuration</span></a>
in order to be fully secured.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">twisted.cred</span> <span class="kn">import</span> <span class="n">strcred</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_auth&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">strcred</span><span class="o">.</span><span class="n">makeChecker</span><span class="p">(</span><span class="s2">&quot;file:changehook.passwd&quot;</span><span class="p">)],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Create a file <code class="docutils literal notranslate"><span class="pre">changehook.passwd</span></code> with content:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>user:password
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">change_hook_auth</span></code> should be a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ICredentialsChecker</span></code>. See the details of
available options in <a class="reference external" href="https://twistedmatrix.com/documents/current/core/howto/cred.html">Twisted documentation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the case of the <code class="docutils literal notranslate"><span class="pre">&quot;file:changehook.passwd&quot;</span></code> description in makeChecker, Buildbot
<code class="docutils literal notranslate"><span class="pre">checkconfig</span></code> might give you a warning “not a valid file: changehook.passwd”. To resolve
this, you need specify the full path to the file, <code class="docutils literal notranslate"><span class="pre">f&quot;file:{os.path.join(basedir,</span>
<span class="pre">'changehook.passwd')}&quot;</span></code>.</p>
</div>
</section>
<section id="mercurial-hook">
<span id="chsrc-Mercurial"></span><h2><span class="section-number">2.5.18.2. </span>Mercurial hook<a class="headerlink" href="#mercurial-hook" title="Link to this heading"></a></h2>
<p>The Mercurial hook uses the base dialect:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;base&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once this is configured on your buildmaster add the following hook on your server-side Mercurial
repository’s <code class="docutils literal notranslate"><span class="pre">hgrc</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[hooks]</span>
<span class="na">changegroup.buildbot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">python:/path/to/hgbuildbot.py:hook</span>
</pre></div>
</div>
<p>You’ll find <a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/master/contrib/hgbuildbot.py">master/contrib/hgbuildbot.py</a>, and its inline documentation, in the
<a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/../../">buildbot-contrib</a> repository.</p>
</section>
<section id="github-hook">
<span id="chsrc-GitHub"></span><h2><span class="section-number">2.5.18.3. </span>GitHub hook<a class="headerlink" href="#github-hook" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a standalone HTTP server available for receiving GitHub notifications as well:
<a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/master/contrib/github_buildbot.py">master/contrib/github_buildbot.py</a>. This script may be useful in cases where you cannot
expose the WebStatus for public consumption. Alternatively, you can setup a reverse proxy
<a class="reference internal" href="www.html#reverse-proxy-config"><span class="std std-ref">Reverse Proxy Configuration</span></a>.</p>
</div>
<p>The GitHub hook has the following parameters:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">secret</span></code> (default <cite>None</cite>)</dt><dd><p>Secret token to use to validate payloads.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">strict</span></code> (default <cite>False</cite>)</dt><dd><p>If the hook must be strict regarding valid payloads.
If the value is <cite>False</cite> (default), the signature will only be checked if a secret is specified
and a signature was supplied with the payload. If the value is <cite>True</cite>, a secret must be provided,
and payloads without signature will be ignored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">codebase</span></code> (default <cite>None</cite>)</dt><dd><p>The codebase value to include with created changes.
If the value is a function (or any other callable), it will be called with the GitHub event payload as argument and the function must return the codebase value to use for the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">github_property_whitelist</span></code> (default <cite>[]</cite>)</dt><dd><p>A list of <code class="docutils literal notranslate"><span class="pre">fnmatch</span></code> expressions which match against the flattened pull request information JSON prefixed with <code class="docutils literal notranslate"><span class="pre">github</span></code>. For example <code class="docutils literal notranslate"><span class="pre">github.number</span></code> represents the pull request number. Available entries can be looked up in the GitHub API Documentation or by examining the data returned for a pull request by the API.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">class</span></code> (default <cite>None</cite>)</dt><dd><p>A class to be used for processing incoming payloads.
If the value is <cite>None</cite> (default), the default class – <code class="xref py py-class docutils literal notranslate"><span class="pre">buildbot.www.hooks.github.GitHubEventHandler</span></code> – will be used.
The default class handles <cite>ping</cite>, <cite>push</cite> and <cite>pull_request</cite> events only.
If you’d like to handle other events (see <a class="reference external" href="https://developer.github.com/v3/activity/events/types/">Event Types &amp; Payloads</a> for more information), you’d need to subclass <code class="docutils literal notranslate"><span class="pre">GitHubEventHandler</span></code> and add handler methods for the corresponding events.
For example, if you’d like to handle <cite>blah</cite> events, your code should look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.www.hooks.github</span> <span class="kn">import</span> <span class="n">GitHubEventHandler</span>

<span class="k">class</span> <span class="nc">MyBlahHandler</span><span class="p">(</span><span class="n">GitHubEventHandler</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">handle_blah</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="c1"># Do some magic here</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="s1">&#39;git&#39;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">skips</span></code> (default <code class="docutils literal notranslate"><span class="pre">[r'\[</span> <span class="pre">*skip</span> <span class="pre">*ci</span> <span class="pre">*\]',</span> <span class="pre">r'\[</span> <span class="pre">*ci</span> <span class="pre">*skip</span> <span class="pre">*\]']</span></code>)</dt><dd><p>A list of regex pattern makes buildbot ignore the push event.
For instance, if user push 3 commits and the commit message of branch head
contains a key string <code class="docutils literal notranslate"><span class="pre">[ci</span> <span class="pre">skip]</span></code>, buildbot will ignore this push event.</p>
<p>If you want to disable the skip checking, please set it to <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">github_api_endpoint</span></code> (default <code class="docutils literal notranslate"><span class="pre">https://api.github.com</span></code>)</dt><dd><p>If you have a self-host GitHub Enterprise installation, please set this URL properly.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">token</span></code> If your GitHub or GitHub Enterprise instance does not allow anonymous communication, you</dt><dd><p>need to provide an access token.  Instructions can be found <a class="reference external" href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/">here</a>. This
attribute is rendered using the <a class="reference internal" href="../../developer/cls-irenderable.html#buildbot.interfaces.IRenderable" title="buildbot.interfaces.IRenderable"><code class="xref py py-class docutils literal notranslate"><span class="pre">IRenderable</span></code></a> interface, the only
property available is <code class="docutils literal notranslate"><span class="pre">full_name</span></code>, of the format <code class="docutils literal notranslate"><span class="pre">{owner}/{full_name}</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pullrequest_ref</span></code> (default <code class="docutils literal notranslate"><span class="pre">merge</span></code>)</dt><dd><p>Remote ref to test if a pull request is sent to the endpoint.
See the GitHub developer manual for possible values for pull requests. (e.g. <code class="docutils literal notranslate"><span class="pre">head</span></code>)</p>
</dd>
</dl>
<p>The simplest way to use GitHub hook is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;github&#39;</span><span class="p">:</span> <span class="p">{}},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Having added this line, you should add a webhook for your GitHub project (see <a class="reference external" href="https://developer.github.com/webhooks/creating/">Creating Webhooks
page at GitHub</a>). The parameters are:</p>
<dl>
<dt><span class="guilabel">Payload URL</span></dt><dd><p>This URL should point to <code class="docutils literal notranslate"><span class="pre">/change_hook/github</span></code> relative to the root of the web status.
For example, if the base URL is <code class="docutils literal notranslate"><span class="pre">http://builds.example.com/buildbot</span></code>, then point GitHub to
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/buildbot/change_hook/github</span></code>.
To specify a project associated to the repository, append <code class="docutils literal notranslate"><span class="pre">?project=name</span></code> to the URL.</p>
</dd>
<dt><span class="guilabel">Content Type</span></dt><dd><p>Specify <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code> or <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p>
</dd>
<dt><span class="guilabel">Secret</span></dt><dd><p>Any value.
If you provide a non-empty value (recommended), make sure that your hook is configured to use it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;github&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;secret&#39;</span><span class="p">:</span> <span class="s1">&#39;MY-SECRET&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt><span class="guilabel">Which events would you like to trigger this webhook?</span></dt><dd><p>Click – <code class="docutils literal notranslate"><span class="pre">Let</span> <span class="pre">me</span> <span class="pre">select</span> <span class="pre">individual</span> <span class="pre">events</span></code>, then select <code class="docutils literal notranslate"><span class="pre">Push</span></code> and <code class="docutils literal notranslate"><span class="pre">Pull</span> <span class="pre">request</span></code> –
other kind of events are not currently supported.</p>
</dd>
</dl>
<p>And then press the <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Webhook</span></code> button.</p>
<p>Github hook creates 3 kinds of changes, distinguishable by their <code class="docutils literal notranslate"><span class="pre">category</span></code> field:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code>: This change is a push to a branch.</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">util.ChangeFilter(category=None,</span> <span class="pre">repository=&quot;http://github.com/&lt;org&gt;/&lt;project&gt;&quot;)</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'tag'</span></code>: This change is a push to a tag.</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">util.ChangeFilter(category='tag',</span> <span class="pre">repository=&quot;http://github.com/&lt;org&gt;/&lt;project&gt;&quot;)</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">'pull'</span></code>: This change is from a pull-request creation or update.</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">util.ChangeFilter(category='pull',</span> <span class="pre">repository=&quot;http://github.com/&lt;org&gt;/&lt;project&gt;&quot;)</span></code>.
In this case, the <a class="reference internal" href="steps/source_github.html#step-GitHub" title="GitHub"><code class="xref bb bb-step docutils literal notranslate"><span class="pre">GitHub</span></code></a> step must be used instead of the standard <a class="reference internal" href="steps/source_git.html#step-Git" title="Git"><code class="xref bb bb-step docutils literal notranslate"><span class="pre">Git</span></code></a> in
order to be able to pull GitHub’s magic refs. With this method, the <a class="reference internal" href="steps/source_github.html#step-GitHub" title="GitHub"><code class="xref bb bb-step docutils literal notranslate"><span class="pre">GitHub</span></code></a> step will
always checkout the branch merged with latest master. This allows to test the result of the
merge instead of just the source branch. Note that you can use the <a class="reference internal" href="steps/source_github.html#step-GitHub" title="GitHub"><code class="xref bb bb-step docutils literal notranslate"><span class="pre">GitHub</span></code></a> for all
categories of event.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Pull requests against every branch will trigger the webhook; the base branch name will be in the
<code class="docutils literal notranslate"><span class="pre">basename</span></code> property of the build.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The incoming HTTP requests for this hook are not authenticated by default.
Anyone who can access the web server can “fake” a request from GitHub, potentially causing the
buildmaster to run arbitrary code.</p>
</div>
<p>To protect URL against unauthorized access you should use <a class="reference internal" href="#change-hooks-auth"><span class="std std-ref">Change Hooks Auth</span></a> option.
Then change the <code class="docutils literal notranslate"><span class="pre">Payload</span> <span class="pre">URL</span></code> of your GitHub webhook to
<code class="docutils literal notranslate"><span class="pre">https://user:password&#64;builds.example.com/bbot/change_hook/github</span></code>.</p>
</section>
<section id="bitbucket-hook">
<span id="chsrc-BitBucket"></span><h2><span class="section-number">2.5.18.4. </span>BitBucket hook<a class="headerlink" href="#bitbucket-hook" title="Link to this heading"></a></h2>
<p>The BitBucket hook is as simple as the GitHub one and takes no options.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bitbucket&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When this is set up, you should add a <cite>POST</cite> service pointing to <code class="docutils literal notranslate"><span class="pre">/change_hook/bitbucket</span></code>
relative to the root of the web status. For example, if the grid URL is
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/bbot/grid</span></code>, then point BitBucket to
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/change_hook/bitbucket</span></code>. To specify a project associated to the
repository, append <code class="docutils literal notranslate"><span class="pre">?project=name</span></code> to the URL.</p>
<p>Note that there is a standalone HTTP server available for receiving BitBucket notifications, as
well: <a class="extlink-src reference external" href="https://github.com/buildbot/buildbot/tree/master/master/contrib/bitbucket_buildbot.py">master/contrib/bitbucket_buildbot.py</a>. This script may be useful in cases where you
cannot expose the WebStatus for public consumption.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As in the previous case, the incoming HTTP requests for this hook are not authenticated by
default. Anyone who can access the web status can “fake” a request from BitBucket, potentially
causing the buildmaster to run arbitrary code.</p>
</div>
<p>To protect URL against unauthorized access you should use <a class="reference internal" href="#change-hooks-auth"><span class="std std-ref">Change Hooks Auth</span></a> option. Then,
create a BitBucket service hook (see
<a class="reference external" href="https://confluence.atlassian.com/display/BITBUCKET/POST+Service+Management">https://confluence.atlassian.com/display/BITBUCKET/POST+Service+Management</a>) with a WebHook URL like
<code class="docutils literal notranslate"><span class="pre">https://user:password&#64;builds.example.com/bbot/change_hook/bitbucket</span></code>.</p>
<p>Note that as before, not using <code class="docutils literal notranslate"><span class="pre">change_hook_auth</span></code> can expose you to security risks.</p>
</section>
<section id="bitbucket-cloud-hook">
<h2><span class="section-number">2.5.18.5. </span>Bitbucket Cloud hook<a class="headerlink" href="#bitbucket-cloud-hook" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bitbucketcloud&#39;</span><span class="p">:</span> <span class="p">{}},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When this is set up, you should add a webhook pointing to <code class="docutils literal notranslate"><span class="pre">/change_hook/bitbucketcloud</span></code> relative
to the root of the web status.</p>
<p>According to the type of the event, the change category is set to <code class="docutils literal notranslate"><span class="pre">push</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-created</span></code>,
<code class="docutils literal notranslate"><span class="pre">pull-rejected</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-updated</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-fulfilled</span></code> or <code class="docutils literal notranslate"><span class="pre">ref-deleted</span></code>.</p>
<p>The Bitbucket Cloud hook may have the following optional parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">codebase</span></code> (default <cite>None</cite>)</dt><dd><p>The codebase value to include with changes or a callable object that will be passed the payload
in order to get it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitbucket_property_whitelist</span></code> (default <cite>[]</cite>)</dt><dd><p>A list of <code class="docutils literal notranslate"><span class="pre">fnmatch</span></code> expressions which match against the flattened pull request information
JSON prefixed with <code class="docutils literal notranslate"><span class="pre">bitbucket</span></code>. For example <code class="docutils literal notranslate"><span class="pre">bitbucket.id</span></code> represents the pull request ID.
Available entries can be looked up in the BitBucket API Documentation or by examining the data
returned for a pull request by the API.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The incoming HTTP requests for this hook are not authenticated by default. Anyone who can
access the web server can “fake” a request from Bitbucket Cloud, potentially causing the
buildmaster to run arbitrary code.</p>
</div>
</section>
<section id="bitbucket-server-hook">
<h2><span class="section-number">2.5.18.6. </span>Bitbucket Server hook<a class="headerlink" href="#bitbucket-server-hook" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bitbucketserver&#39;</span><span class="p">:</span> <span class="p">{}},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When this is set up, you should add a webhook pointing to <code class="docutils literal notranslate"><span class="pre">/change_hook/bitbucketserver</span></code> relative
to the root of the web status.</p>
<p>According to the type of the event, the change category is set to <code class="docutils literal notranslate"><span class="pre">push</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-created</span></code>,
<code class="docutils literal notranslate"><span class="pre">pull-rejected</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-updated</span></code>, <code class="docutils literal notranslate"><span class="pre">pull-fulfilled</span></code> or <code class="docutils literal notranslate"><span class="pre">ref-deleted</span></code>.</p>
<p>The Bitbucket Server hook may have the following optional parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">codebase</span></code> (default <cite>None</cite>)</dt><dd><p>The codebase value to include with changes or a callable object that will be passed the payload
in order to get it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bitbucket_property_whitelist</span></code> (default <cite>[]</cite>)</dt><dd><p>A list of <code class="docutils literal notranslate"><span class="pre">fnmatch</span></code> expressions which match against the flattened pull request information
JSON prefixed with <code class="docutils literal notranslate"><span class="pre">bitbucket</span></code>. For example <code class="docutils literal notranslate"><span class="pre">bitbucket.id</span></code> represents the pull request ID.
Available entries can be looked up in the BitBucket API Documentation or by examining the data
returned for a pull request by the API.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The incoming HTTP requests for this hook are not authenticated by default. Anyone who can
access the web server can “fake” a request from Bitbucket Server, potentially causing the
buildmaster to run arbitrary code.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook requires the <cite>bitbucket-webhooks</cite> plugin (see
<a class="reference external" href="https://marketplace.atlassian.com/plugins/nl.topicus.bitbucket.bitbucket-webhooks/server/overview">https://marketplace.atlassian.com/plugins/nl.topicus.bitbucket.bitbucket-webhooks/server/overview</a>).</p>
</div>
</section>
<section id="poller-hook">
<h2><span class="section-number">2.5.18.7. </span>Poller hook<a class="headerlink" href="#poller-hook" title="Link to this heading"></a></h2>
<p>The poller hook allows you to use GET or POST requests to trigger polling. One advantage of this is
your buildbot instance can poll at launch (using the pollAtLaunch flag) to get changes that
happened while it was down, but then you can still use a commit hook to get fast notification of
new changes.</p>
<p>Suppose you have a poller configured like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;change_source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SVNPoller</span><span class="p">(</span>
    <span class="n">repourl</span><span class="o">=</span><span class="s2">&quot;https://amanda.svn.sourceforge.net/svnroot/amanda/amanda&quot;</span><span class="p">,</span>
    <span class="n">split_file</span><span class="o">=</span><span class="n">split_file_branches</span><span class="p">,</span>
    <span class="n">pollInterval</span><span class="o">=</span><span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">pollAtLaunch</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>And you configure your WebStatus to enable this hook:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;poller&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then you will be able to trigger a poll of the SVN repository by poking the <code class="docutils literal notranslate"><span class="pre">/change_hook/poller</span></code>
URL from a commit hook like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-s<span class="w"> </span>-F<span class="w"> </span><span class="nv">poller</span><span class="o">=</span>https://amanda.svn.sourceforge.net/svnroot/amanda/amanda<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>http://yourbuildbot/change_hook/poller
</pre></div>
</div>
<p>If no <code class="docutils literal notranslate"><span class="pre">poller</span></code> argument is provided then the hook will trigger polling of all polling change sources.</p>
<p>You can restrict which pollers the webhook has access to using the <code class="docutils literal notranslate"><span class="pre">allowed</span></code> option:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s1">&#39;change_hook_dialects&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;poller&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;https://amanda.svn.sourceforge.net/svnroot/amanda/amanda&#39;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="gitlab-hook">
<span id="chsrc-GitLab"></span><h2><span class="section-number">2.5.18.8. </span>GitLab hook<a class="headerlink" href="#gitlab-hook" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;gitlab&#39;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;secret&#39;</span><span class="p">:</span> <span class="s1">&#39;...&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The GitLab hook has the following parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">secret</span></code> (default <cite>None</cite>)</dt><dd><p>Secret token to use to validate payloads.</p>
</dd>
</dl>
<p>When this is set up, you should add a <cite>POST</cite> service pointing to <code class="docutils literal notranslate"><span class="pre">/change_hook/gitlab</span></code> relative
to the root of the web status. For example, if the grid URL is
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/bbot/grid</span></code>, then point GitLab to
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/change_hook/gitlab</span></code>. The project and/or codebase can also be passed in
the URL by appending <code class="docutils literal notranslate"><span class="pre">?project=name</span></code> or <code class="docutils literal notranslate"><span class="pre">?codebase=foo</span></code> to the URL. These parameters will be
passed along to the scheduler.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To handle merge requests from forks properly, it’s easiest to use a GitLab source step rather
than a Git source step.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your Git or GitLab step must be configured with a git&#64; repourl, not a https: one, else the
change from the webhook will not trigger a build.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As in the previous case, the incoming HTTP requests for this hook are not authenticated by
default. Anyone who can access the web status can “fake” a request from your GitLab server,
potentially causing the buildmaster to run arbitrary code.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When applicable, you need to permit access to internal/local networks.
See <code class="docutils literal notranslate"><span class="pre">https://docs.gitlab.com/ee/security/webhooks.html</span></code> for details.</p>
</div>
<p>To protect URL against unauthorized access you should either</p>
<blockquote>
<div><ul class="simple">
<li><p>set secret token in the configuration above, then set it in the GitLab service hook declaration, or</p></li>
<li><p>use the <a class="reference internal" href="#change-hooks-auth"><span class="std std-ref">Change Hooks Auth</span></a> option. Then, create a GitLab service hook (see
<code class="docutils literal notranslate"><span class="pre">https://your.gitlab.server/help/web_hooks</span></code>) with a WebHook URL like
<code class="docutils literal notranslate"><span class="pre">https://user:password&#64;builds.example.com/bbot/change_hook/gitlab</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Note that as before, not using <code class="docutils literal notranslate"><span class="pre">change_hook_auth</span></code> can expose you to security risks.</p>
</section>
<section id="gitorious-hook">
<span id="chsrc-Gitorious"></span><h2><span class="section-number">2.5.18.9. </span>Gitorious Hook<a class="headerlink" href="#gitorious-hook" title="Link to this heading"></a></h2>
<p>The Gitorious hook is as simple as GitHub one and it also takes no options.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;gitorious&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When this is set up, you should add a <cite>POST</cite> service pointing to <code class="docutils literal notranslate"><span class="pre">/change_hook/gitorious</span></code>
relative to the root of the web status. For example, if the grid URL is
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/bbot/grid</span></code>, then point Gitorious to
<code class="docutils literal notranslate"><span class="pre">http://builds.example.com/change_hook/gitorious</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As in the previous case, the incoming HTTP requests for this hook are not authenticated by
default. Anyone who can access the web status can “fake” a request from your Gitorious server,
potentially causing the buildmaster to run arbitrary code.</p>
</div>
<p>To protect URL against unauthorized access you should use <a class="reference internal" href="#change-hooks-auth"><span class="std std-ref">Change Hooks Auth</span></a> option. Then,
create a Gitorious web hook with a WebHook URL like
<code class="docutils literal notranslate"><span class="pre">https://user:password&#64;builds.example.com/bbot/change_hook/gitorious</span></code>.</p>
<p>Note that as before, not using <code class="docutils literal notranslate"><span class="pre">change_hook_auth</span></code> can expose you to security risks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Web hooks are only available for local Gitorious installations, since this feature is not
offered as part of Gitorious.org yet.</p>
</div>
</section>
<section id="custom-hooks">
<h2><span class="section-number">2.5.18.10. </span>Custom Hooks<a class="headerlink" href="#custom-hooks" title="Link to this heading"></a></h2>
<p>Custom hooks are supported via the <a class="reference internal" href="../plugins.html#plugins"><span class="std std-ref">Plugin Infrastructure in Buildbot</span></a> mechanism. You can subclass any of the available
hook handler classes available in <code class="xref py py-mod docutils literal notranslate"><span class="pre">buildbot.www.hooks</span></code> and register it in the plugin system
via a custom python module. For convenience, you can also use the generic option <code class="docutils literal notranslate"><span class="pre">custom_class</span></code>,
e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.plugins</span> <span class="kn">import</span> <span class="n">webhooks</span>
<span class="k">class</span> <span class="nc">CustomBase</span><span class="p">(</span><span class="n">webhooks</span><span class="o">.</span><span class="n">base</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">getChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">args</span>
        <span class="n">chdict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;revision&#39;</span><span class="p">),</span>
            <span class="s2">&quot;repository&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;repository&#39;</span><span class="p">),</span>
            <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;project&#39;</span><span class="p">),</span>
            <span class="s2">&quot;codebase&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;codebase&#39;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">([</span><span class="n">chdict</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>

<span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;change_hook_dialects&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;base&#39;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;custom_class&#39;</span><span class="p">:</span> <span class="n">CustomBase</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="www.html" class="btn btn-neutral float-left" title="2.5.17. Web Server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="services/index.html" class="btn btn-neutral float-right" title="2.5.19. Custom Services" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Buildbot Team Members.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>